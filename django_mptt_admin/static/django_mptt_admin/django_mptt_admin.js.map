{"version":3,"file":"django_mptt_admin.js","mappings":"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","sources":["webpack://django-mptt-admin/./node_modules/.pnpm/cookie@0.4.1/node_modules/cookie/index.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/dataLoader.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/dragAndDropHandler.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/elementsRenderer.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/keyHandler.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/mouse.widget.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/node.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/nodeElement.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/saveStateHandler.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/scrollHandler.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/selectNodeHandler.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/simple.widget.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/tree.jquery.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/util.js","webpack://django-mptt-admin/./node_modules/.pnpm/jqtree@1.6.1/node_modules/jqtree/lib/version.js","webpack://django-mptt-admin/external var \"jQuery\"","webpack://django-mptt-admin/webpack/bootstrap","webpack://django-mptt-admin/./node_modules/.pnpm/spin.js@4.1.1/node_modules/spin.js/spin.js","webpack://django-mptt-admin/./django_mptt_admin.ts"],"sourcesContent":["/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nexports.parse = parse;\nexports.serialize = serialize;\n\n/**\n * Module variables.\n * @private\n */\n\nvar decode = decodeURIComponent;\nvar encode = encodeURIComponent;\nvar pairSplitRegExp = /; */;\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n *\n * @param {string} str\n * @param {object} [options]\n * @return {object}\n * @public\n */\n\nfunction parse(str, options) {\n  if (typeof str !== 'string') {\n    throw new TypeError('argument str must be a string');\n  }\n\n  var obj = {}\n  var opt = options || {};\n  var pairs = str.split(pairSplitRegExp);\n  var dec = opt.decode || decode;\n\n  for (var i = 0; i < pairs.length; i++) {\n    var pair = pairs[i];\n    var eq_idx = pair.indexOf('=');\n\n    // skip things that don't look like key=value\n    if (eq_idx < 0) {\n      continue;\n    }\n\n    var key = pair.substr(0, eq_idx).trim()\n    var val = pair.substr(++eq_idx, pair.length).trim();\n\n    // quoted values\n    if ('\"' == val[0]) {\n      val = val.slice(1, -1);\n    }\n\n    // only assign once\n    if (undefined == obj[key]) {\n      obj[key] = tryDecode(val, dec);\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Serialize data into a cookie header.\n *\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n *\n * @param {string} name\n * @param {string} val\n * @param {object} [options]\n * @return {string}\n * @public\n */\n\nfunction serialize(name, val, options) {\n  var opt = options || {};\n  var enc = opt.encode || encode;\n\n  if (typeof enc !== 'function') {\n    throw new TypeError('option encode is invalid');\n  }\n\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n\n  var value = enc(val);\n\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument val is invalid');\n  }\n\n  var str = name + '=' + value;\n\n  if (null != opt.maxAge) {\n    var maxAge = opt.maxAge - 0;\n\n    if (isNaN(maxAge) || !isFinite(maxAge)) {\n      throw new TypeError('option maxAge is invalid')\n    }\n\n    str += '; Max-Age=' + Math.floor(maxAge);\n  }\n\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n\n    str += '; Domain=' + opt.domain;\n  }\n\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n\n    str += '; Path=' + opt.path;\n  }\n\n  if (opt.expires) {\n    if (typeof opt.expires.toUTCString !== 'function') {\n      throw new TypeError('option expires is invalid');\n    }\n\n    str += '; Expires=' + opt.expires.toUTCString();\n  }\n\n  if (opt.httpOnly) {\n    str += '; HttpOnly';\n  }\n\n  if (opt.secure) {\n    str += '; Secure';\n  }\n\n  if (opt.sameSite) {\n    var sameSite = typeof opt.sameSite === 'string'\n      ? opt.sameSite.toLowerCase() : opt.sameSite;\n\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      case 'none':\n        str += '; SameSite=None';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n\n  return str;\n}\n\n/**\n * Try decoding a string using a decoding function.\n *\n * @param {string} str\n * @param {function} decode\n * @private\n */\n\nfunction tryDecode(str, decode) {\n  try {\n    return decode(str);\n  } catch (e) {\n    return str;\n  }\n}\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nvar DataLoader = /** @class */ (function () {\n    function DataLoader(treeWidget) {\n        this.treeWidget = treeWidget;\n    }\n    DataLoader.prototype.loadFromUrl = function (urlInfo, parentNode, onFinished) {\n        var _this = this;\n        if (!urlInfo) {\n            return;\n        }\n        var $el = this.getDomElement(parentNode);\n        this.addLoadingClass($el);\n        this.notifyLoading(true, parentNode, $el);\n        var stopLoading = function () {\n            _this.removeLoadingClass($el);\n            _this.notifyLoading(false, parentNode, $el);\n        };\n        var handleSuccess = function (data) {\n            stopLoading();\n            _this.treeWidget.loadData(_this.parseData(data), parentNode);\n            if (onFinished && typeof onFinished === \"function\") {\n                onFinished();\n            }\n        };\n        var handleError = function (jqXHR) {\n            stopLoading();\n            if (_this.treeWidget.options.onLoadFailed) {\n                _this.treeWidget.options.onLoadFailed(jqXHR);\n            }\n        };\n        this.submitRequest(urlInfo, handleSuccess, handleError);\n    };\n    DataLoader.prototype.addLoadingClass = function ($el) {\n        if ($el) {\n            $el.addClass(\"jqtree-loading\");\n        }\n    };\n    DataLoader.prototype.removeLoadingClass = function ($el) {\n        if ($el) {\n            $el.removeClass(\"jqtree-loading\");\n        }\n    };\n    DataLoader.prototype.getDomElement = function (parentNode) {\n        if (parentNode) {\n            return jQuery(parentNode.element);\n        }\n        else {\n            return this.treeWidget.element;\n        }\n    };\n    DataLoader.prototype.notifyLoading = function (isLoading, node, $el) {\n        if (this.treeWidget.options.onLoading) {\n            this.treeWidget.options.onLoading(isLoading, node, $el);\n        }\n        this.treeWidget._triggerEvent(\"tree.loading_data\", {\n            isLoading: isLoading,\n            node: node,\n            $el: $el\n        });\n    };\n    DataLoader.prototype.submitRequest = function (urlInfoInput, handleSuccess, handleError) {\n        var _a;\n        var urlInfo = typeof urlInfoInput === \"string\"\n            ? { url: urlInfoInput }\n            : urlInfoInput;\n        var ajaxSettings = __assign({ method: \"GET\", cache: false, dataType: \"json\", success: handleSuccess, error: handleError }, urlInfo);\n        ajaxSettings.method = ((_a = ajaxSettings.method) === null || _a === void 0 ? void 0 : _a.toUpperCase()) || \"GET\";\n        void jQuery.ajax(ajaxSettings);\n    };\n    DataLoader.prototype.parseData = function (data) {\n        var dataFilter = this.treeWidget.options.dataFilter;\n        var getParsedData = function () {\n            if (typeof data === \"string\") {\n                return JSON.parse(data);\n            }\n            else {\n                return data;\n            }\n        };\n        var parsedData = getParsedData();\n        if (dataFilter) {\n            return dataFilter(parsedData);\n        }\n        else {\n            return parsedData;\n        }\n    };\n    return DataLoader;\n}());\nexports[\"default\"] = DataLoader;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nexports.HitAreasGenerator = exports.DragAndDropHandler = void 0;\nvar jQueryProxy = require(\"jquery\");\nvar node_1 = require(\"./node\");\n// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\nvar jQuery = jQueryProxy[\"default\"] || jQueryProxy;\nvar DragAndDropHandler = /** @class */ (function () {\n    function DragAndDropHandler(treeWidget) {\n        this.treeWidget = treeWidget;\n        this.hoveredArea = null;\n        this.hitAreas = [];\n        this.isDragging = false;\n        this.currentItem = null;\n        this.positionInfo = null;\n    }\n    DragAndDropHandler.prototype.mouseCapture = function (positionInfo) {\n        var $element = jQuery(positionInfo.target);\n        if (!this.mustCaptureElement($element)) {\n            return null;\n        }\n        if (this.treeWidget.options.onIsMoveHandle &&\n            !this.treeWidget.options.onIsMoveHandle($element)) {\n            return null;\n        }\n        var nodeElement = this.treeWidget._getNodeElement($element);\n        if (nodeElement && this.treeWidget.options.onCanMove) {\n            if (!this.treeWidget.options.onCanMove(nodeElement.node)) {\n                nodeElement = null;\n            }\n        }\n        this.currentItem = nodeElement;\n        return this.currentItem != null;\n    };\n    DragAndDropHandler.prototype.mouseStart = function (positionInfo) {\n        var _a;\n        if (!this.currentItem ||\n            positionInfo.pageX === undefined ||\n            positionInfo.pageY === undefined) {\n            return false;\n        }\n        this.refresh();\n        var offset = jQuery(positionInfo.target).offset();\n        var left = offset ? offset.left : 0;\n        var top = offset ? offset.top : 0;\n        var node = this.currentItem.node;\n        this.dragElement = new DragElement(node.name, positionInfo.pageX - left, positionInfo.pageY - top, this.treeWidget.element, (_a = this.treeWidget.options.autoEscape) !== null && _a !== void 0 ? _a : true);\n        this.isDragging = true;\n        this.positionInfo = positionInfo;\n        this.currentItem.$element.addClass(\"jqtree-moving\");\n        return true;\n    };\n    DragAndDropHandler.prototype.mouseDrag = function (positionInfo) {\n        if (!this.currentItem ||\n            !this.dragElement ||\n            positionInfo.pageX === undefined ||\n            positionInfo.pageY === undefined) {\n            return false;\n        }\n        this.dragElement.move(positionInfo.pageX, positionInfo.pageY);\n        this.positionInfo = positionInfo;\n        var area = this.findHoveredArea(positionInfo.pageX, positionInfo.pageY);\n        if (area && this.canMoveToArea(area)) {\n            if (!area.node.isFolder()) {\n                this.stopOpenFolderTimer();\n            }\n            if (this.hoveredArea !== area) {\n                this.hoveredArea = area;\n                // If this is a closed folder, start timer to open it\n                if (this.mustOpenFolderTimer(area)) {\n                    this.startOpenFolderTimer(area.node);\n                }\n                else {\n                    this.stopOpenFolderTimer();\n                }\n                this.updateDropHint();\n            }\n        }\n        else {\n            this.removeDropHint();\n            this.stopOpenFolderTimer();\n            this.hoveredArea = area;\n        }\n        if (!area) {\n            if (this.treeWidget.options.onDragMove) {\n                this.treeWidget.options.onDragMove(this.currentItem.node, positionInfo.originalEvent);\n            }\n        }\n        return true;\n    };\n    DragAndDropHandler.prototype.mouseStop = function (positionInfo) {\n        this.moveItem(positionInfo);\n        this.clear();\n        this.removeHover();\n        this.removeDropHint();\n        this.removeHitAreas();\n        var currentItem = this.currentItem;\n        if (this.currentItem) {\n            this.currentItem.$element.removeClass(\"jqtree-moving\");\n            this.currentItem = null;\n        }\n        this.isDragging = false;\n        this.positionInfo = null;\n        if (!this.hoveredArea && currentItem) {\n            if (this.treeWidget.options.onDragStop) {\n                this.treeWidget.options.onDragStop(currentItem.node, positionInfo.originalEvent);\n            }\n        }\n        return false;\n    };\n    DragAndDropHandler.prototype.refresh = function () {\n        this.removeHitAreas();\n        if (this.currentItem) {\n            this.generateHitAreas();\n            this.currentItem = this.treeWidget._getNodeElementForNode(this.currentItem.node);\n            if (this.isDragging) {\n                this.currentItem.$element.addClass(\"jqtree-moving\");\n            }\n        }\n    };\n    DragAndDropHandler.prototype.generateHitAreas = function () {\n        if (!this.currentItem) {\n            this.hitAreas = [];\n        }\n        else {\n            var hitAreasGenerator = new HitAreasGenerator(this.treeWidget.tree, this.currentItem.node, this.getTreeDimensions().bottom);\n            this.hitAreas = hitAreasGenerator.generate();\n        }\n    };\n    DragAndDropHandler.prototype.mustCaptureElement = function ($element) {\n        return !$element.is(\"input,select,textarea\");\n    };\n    DragAndDropHandler.prototype.canMoveToArea = function (area) {\n        if (!this.treeWidget.options.onCanMoveTo) {\n            return true;\n        }\n        if (!this.currentItem) {\n            return false;\n        }\n        var positionName = node_1.getPositionName(area.position);\n        return this.treeWidget.options.onCanMoveTo(this.currentItem.node, area.node, positionName);\n    };\n    DragAndDropHandler.prototype.removeHitAreas = function () {\n        this.hitAreas = [];\n    };\n    DragAndDropHandler.prototype.clear = function () {\n        if (this.dragElement) {\n            this.dragElement.remove();\n            this.dragElement = null;\n        }\n    };\n    DragAndDropHandler.prototype.removeDropHint = function () {\n        if (this.previousGhost) {\n            this.previousGhost.remove();\n        }\n    };\n    DragAndDropHandler.prototype.removeHover = function () {\n        this.hoveredArea = null;\n    };\n    DragAndDropHandler.prototype.findHoveredArea = function (x, y) {\n        var dimensions = this.getTreeDimensions();\n        if (x < dimensions.left ||\n            y < dimensions.top ||\n            x > dimensions.right ||\n            y > dimensions.bottom) {\n            return null;\n        }\n        var low = 0;\n        var high = this.hitAreas.length;\n        while (low < high) {\n            var mid = (low + high) >> 1;\n            var area = this.hitAreas[mid];\n            if (y < area.top) {\n                high = mid;\n            }\n            else if (y > area.bottom) {\n                low = mid + 1;\n            }\n            else {\n                return area;\n            }\n        }\n        return null;\n    };\n    DragAndDropHandler.prototype.mustOpenFolderTimer = function (area) {\n        var node = area.node;\n        return (node.isFolder() &&\n            !node.is_open &&\n            area.position === node_1.Position.Inside);\n    };\n    DragAndDropHandler.prototype.updateDropHint = function () {\n        if (!this.hoveredArea) {\n            return;\n        }\n        // remove previous drop hint\n        this.removeDropHint();\n        // add new drop hint\n        var nodeElement = this.treeWidget._getNodeElementForNode(this.hoveredArea.node);\n        this.previousGhost = nodeElement.addDropHint(this.hoveredArea.position);\n    };\n    DragAndDropHandler.prototype.startOpenFolderTimer = function (folder) {\n        var _this = this;\n        var openFolder = function () {\n            _this.treeWidget._openNode(folder, _this.treeWidget.options.slide, function () {\n                _this.refresh();\n                _this.updateDropHint();\n            });\n        };\n        this.stopOpenFolderTimer();\n        this.openFolderTimer = window.setTimeout(openFolder, this.treeWidget.options.openFolderDelay);\n    };\n    DragAndDropHandler.prototype.stopOpenFolderTimer = function () {\n        if (this.openFolderTimer) {\n            clearTimeout(this.openFolderTimer);\n            this.openFolderTimer = null;\n        }\n    };\n    DragAndDropHandler.prototype.moveItem = function (positionInfo) {\n        var _this = this;\n        if (this.currentItem &&\n            this.hoveredArea &&\n            this.hoveredArea.position !== node_1.Position.None &&\n            this.canMoveToArea(this.hoveredArea)) {\n            var movedNode_1 = this.currentItem.node;\n            var targetNode_1 = this.hoveredArea.node;\n            var position_1 = this.hoveredArea.position;\n            var previousParent = movedNode_1.parent;\n            if (position_1 === node_1.Position.Inside) {\n                this.hoveredArea.node.is_open = true;\n            }\n            var doMove = function () {\n                _this.treeWidget.tree.moveNode(movedNode_1, targetNode_1, position_1);\n                _this.treeWidget.element.empty();\n                _this.treeWidget._refreshElements(null);\n            };\n            var event_1 = this.treeWidget._triggerEvent(\"tree.move\", {\n                move_info: {\n                    moved_node: movedNode_1,\n                    target_node: targetNode_1,\n                    position: node_1.getPositionName(position_1),\n                    previous_parent: previousParent,\n                    do_move: doMove,\n                    original_event: positionInfo.originalEvent\n                }\n            });\n            if (!event_1.isDefaultPrevented()) {\n                doMove();\n            }\n        }\n    };\n    DragAndDropHandler.prototype.getTreeDimensions = function () {\n        // Return the dimensions of the tree. Add a margin to the bottom to allow\n        // to drag-and-drop after the last element.\n        var offset = this.treeWidget.element.offset();\n        if (!offset) {\n            return { left: 0, top: 0, right: 0, bottom: 0 };\n        }\n        else {\n            var el = this.treeWidget.element;\n            var width = el.width() || 0;\n            var height = el.height() || 0;\n            var left = offset.left + this.treeWidget._getScrollLeft();\n            return {\n                left: left,\n                top: offset.top,\n                right: left + width,\n                bottom: offset.top + height + 16\n            };\n        }\n    };\n    return DragAndDropHandler;\n}());\nexports.DragAndDropHandler = DragAndDropHandler;\nvar VisibleNodeIterator = /** @class */ (function () {\n    function VisibleNodeIterator(tree) {\n        this.tree = tree;\n    }\n    VisibleNodeIterator.prototype.iterate = function () {\n        var _this = this;\n        var isFirstNode = true;\n        var _iterateNode = function (node, nextNode) {\n            var mustIterateInside = (node.is_open || !node.element) && node.hasChildren();\n            var $element = null;\n            if (node.element) {\n                $element = jQuery(node.element);\n                if (!$element.is(\":visible\")) {\n                    return;\n                }\n                if (isFirstNode) {\n                    _this.handleFirstNode(node);\n                    isFirstNode = false;\n                }\n                if (!node.hasChildren()) {\n                    _this.handleNode(node, nextNode, $element);\n                }\n                else if (node.is_open) {\n                    if (!_this.handleOpenFolder(node, $element)) {\n                        mustIterateInside = false;\n                    }\n                }\n                else {\n                    _this.handleClosedFolder(node, nextNode, $element);\n                }\n            }\n            if (mustIterateInside) {\n                var childrenLength_1 = node.children.length;\n                node.children.forEach(function (_, i) {\n                    if (i === childrenLength_1 - 1) {\n                        _iterateNode(node.children[i], null);\n                    }\n                    else {\n                        _iterateNode(node.children[i], node.children[i + 1]);\n                    }\n                });\n                if (node.is_open && $element) {\n                    _this.handleAfterOpenFolder(node, nextNode);\n                }\n            }\n        };\n        _iterateNode(this.tree, null);\n    };\n    return VisibleNodeIterator;\n}());\nvar HitAreasGenerator = /** @class */ (function (_super) {\n    __extends(HitAreasGenerator, _super);\n    function HitAreasGenerator(tree, currentNode, treeBottom) {\n        var _this = _super.call(this, tree) || this;\n        _this.currentNode = currentNode;\n        _this.treeBottom = treeBottom;\n        return _this;\n    }\n    HitAreasGenerator.prototype.generate = function () {\n        this.positions = [];\n        this.lastTop = 0;\n        this.iterate();\n        return this.generateHitAreas(this.positions);\n    };\n    HitAreasGenerator.prototype.generateHitAreas = function (positions) {\n        var previousTop = -1;\n        var group = [];\n        var hitAreas = [];\n        for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\n            var position = positions_1[_i];\n            if (position.top !== previousTop && group.length) {\n                if (group.length) {\n                    this.generateHitAreasForGroup(hitAreas, group, previousTop, position.top);\n                }\n                previousTop = position.top;\n                group = [];\n            }\n            group.push(position);\n        }\n        this.generateHitAreasForGroup(hitAreas, group, previousTop, this.treeBottom);\n        return hitAreas;\n    };\n    HitAreasGenerator.prototype.handleOpenFolder = function (node, $element) {\n        if (node === this.currentNode) {\n            // Cannot move inside current item\n            // Stop iterating\n            return false;\n        }\n        // Cannot move before current item\n        if (node.children[0] !== this.currentNode) {\n            this.addPosition(node, node_1.Position.Inside, this.getTop($element));\n        }\n        // Continue iterating\n        return true;\n    };\n    HitAreasGenerator.prototype.handleClosedFolder = function (node, nextNode, $element) {\n        var top = this.getTop($element);\n        if (node === this.currentNode) {\n            // Cannot move after current item\n            this.addPosition(node, node_1.Position.None, top);\n        }\n        else {\n            this.addPosition(node, node_1.Position.Inside, top);\n            // Cannot move before current item\n            if (nextNode !== this.currentNode) {\n                this.addPosition(node, node_1.Position.After, top);\n            }\n        }\n    };\n    HitAreasGenerator.prototype.handleFirstNode = function (node) {\n        if (node !== this.currentNode) {\n            this.addPosition(node, node_1.Position.Before, this.getTop(jQuery(node.element)));\n        }\n    };\n    HitAreasGenerator.prototype.handleAfterOpenFolder = function (node, nextNode) {\n        if (node === this.currentNode || nextNode === this.currentNode) {\n            // Cannot move before or after current item\n            this.addPosition(node, node_1.Position.None, this.lastTop);\n        }\n        else {\n            this.addPosition(node, node_1.Position.After, this.lastTop);\n        }\n    };\n    HitAreasGenerator.prototype.handleNode = function (node, nextNode, $element) {\n        var top = this.getTop($element);\n        if (node === this.currentNode) {\n            // Cannot move inside current item\n            this.addPosition(node, node_1.Position.None, top);\n        }\n        else {\n            this.addPosition(node, node_1.Position.Inside, top);\n        }\n        if (nextNode === this.currentNode || node === this.currentNode) {\n            // Cannot move before or after current item\n            this.addPosition(node, node_1.Position.None, top);\n        }\n        else {\n            this.addPosition(node, node_1.Position.After, top);\n        }\n    };\n    HitAreasGenerator.prototype.getTop = function ($element) {\n        var offset = $element.offset();\n        return offset ? offset.top : 0;\n    };\n    HitAreasGenerator.prototype.addPosition = function (node, position, top) {\n        var area = {\n            top: top,\n            bottom: 0,\n            node: node,\n            position: position\n        };\n        this.positions.push(area);\n        this.lastTop = top;\n    };\n    HitAreasGenerator.prototype.generateHitAreasForGroup = function (hitAreas, positionsInGroup, top, bottom) {\n        // limit positions in group\n        var positionCount = Math.min(positionsInGroup.length, 4);\n        var areaHeight = Math.round((bottom - top) / positionCount);\n        var areaTop = top;\n        var i = 0;\n        while (i < positionCount) {\n            var position = positionsInGroup[i];\n            hitAreas.push({\n                top: areaTop,\n                bottom: areaTop + areaHeight,\n                node: position.node,\n                position: position.position\n            });\n            areaTop += areaHeight;\n            i += 1;\n        }\n    };\n    return HitAreasGenerator;\n}(VisibleNodeIterator));\nexports.HitAreasGenerator = HitAreasGenerator;\nvar DragElement = /** @class */ (function () {\n    function DragElement(nodeName, offsetX, offsetY, $tree, autoEscape) {\n        this.offsetX = offsetX;\n        this.offsetY = offsetY;\n        this.$element = jQuery(\"<span>\").addClass(\"jqtree-title jqtree-dragging\");\n        if (autoEscape) {\n            this.$element.text(nodeName);\n        }\n        else {\n            this.$element.html(nodeName);\n        }\n        this.$element.css(\"position\", \"absolute\");\n        $tree.append(this.$element);\n    }\n    DragElement.prototype.move = function (pageX, pageY) {\n        this.$element.offset({\n            left: pageX - this.offsetX,\n            top: pageY - this.offsetY\n        });\n    };\n    DragElement.prototype.remove = function () {\n        this.$element.remove();\n    };\n    return DragElement;\n}());\n","\"use strict\";\nexports.__esModule = true;\nvar util_1 = require(\"./util\");\nvar ElementsRenderer = /** @class */ (function () {\n    function ElementsRenderer(treeWidget) {\n        this.treeWidget = treeWidget;\n        this.openedIconElement = this.createButtonElement(treeWidget.options.openedIcon || \"+\");\n        this.closedIconElement = this.createButtonElement(treeWidget.options.closedIcon || \"-\");\n    }\n    ElementsRenderer.prototype.render = function (fromNode) {\n        if (fromNode && fromNode.parent) {\n            this.renderFromNode(fromNode);\n        }\n        else {\n            this.renderFromRoot();\n        }\n    };\n    ElementsRenderer.prototype.renderFromRoot = function () {\n        var $element = this.treeWidget.element;\n        $element.empty();\n        this.createDomElements($element[0], this.treeWidget.tree.children, true, 1);\n    };\n    ElementsRenderer.prototype.renderFromNode = function (node) {\n        // remember current li\n        var $previousLi = jQuery(node.element);\n        // create element\n        var li = this.createLi(node, node.getLevel());\n        this.attachNodeData(node, li);\n        // add element to dom\n        $previousLi.after(li);\n        // remove previous li\n        $previousLi.remove();\n        // create children\n        if (node.children) {\n            this.createDomElements(li, node.children, false, node.getLevel() + 1);\n        }\n    };\n    ElementsRenderer.prototype.createDomElements = function (element, children, isRootNode, level) {\n        var ul = this.createUl(isRootNode);\n        element.appendChild(ul);\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n            var child = children_1[_i];\n            var li = this.createLi(child, level);\n            ul.appendChild(li);\n            this.attachNodeData(child, li);\n            if (child.hasChildren()) {\n                this.createDomElements(li, child.children, false, level + 1);\n            }\n        }\n    };\n    ElementsRenderer.prototype.attachNodeData = function (node, li) {\n        node.element = li;\n        jQuery(li).data(\"node\", node);\n    };\n    ElementsRenderer.prototype.createUl = function (isRootNode) {\n        var classString;\n        var role;\n        if (!isRootNode) {\n            classString = \"\";\n            role = \"group\";\n        }\n        else {\n            classString = \"jqtree-tree\";\n            role = \"tree\";\n            if (this.treeWidget.options.rtl) {\n                classString += \" jqtree-rtl\";\n            }\n        }\n        if (this.treeWidget.options.dragAndDrop) {\n            classString += \" jqtree-dnd\";\n        }\n        var ul = document.createElement(\"ul\");\n        ul.className = \"jqtree_common \" + classString;\n        ul.setAttribute(\"role\", role);\n        return ul;\n    };\n    ElementsRenderer.prototype.createLi = function (node, level) {\n        var isSelected = Boolean(this.treeWidget.selectNodeHandler.isNodeSelected(node));\n        var mustShowFolder = node.isFolder() ||\n            (node.isEmptyFolder && this.treeWidget.options.showEmptyFolder);\n        var li = mustShowFolder\n            ? this.createFolderLi(node, level, isSelected)\n            : this.createNodeLi(node, level, isSelected);\n        if (this.treeWidget.options.onCreateLi) {\n            this.treeWidget.options.onCreateLi(node, jQuery(li), isSelected);\n        }\n        return li;\n    };\n    ElementsRenderer.prototype.createFolderLi = function (node, level, isSelected) {\n        var buttonClasses = this.getButtonClasses(node);\n        var folderClasses = this.getFolderClasses(node, isSelected);\n        var iconElement = node.is_open\n            ? this.openedIconElement\n            : this.closedIconElement;\n        // li\n        var li = document.createElement(\"li\");\n        li.className = \"jqtree_common \" + folderClasses;\n        li.setAttribute(\"role\", \"presentation\");\n        // div\n        var div = document.createElement(\"div\");\n        div.className = \"jqtree-element jqtree_common\";\n        div.setAttribute(\"role\", \"presentation\");\n        li.appendChild(div);\n        // button link\n        var buttonLink = document.createElement(\"a\");\n        buttonLink.className = buttonClasses;\n        buttonLink.appendChild(iconElement.cloneNode(true));\n        buttonLink.setAttribute(\"role\", \"presentation\");\n        buttonLink.setAttribute(\"aria-hidden\", \"true\");\n        if (this.treeWidget.options.buttonLeft) {\n            div.appendChild(buttonLink);\n        }\n        // title span\n        div.appendChild(this.createTitleSpan(node.name, level, isSelected, node.is_open, true));\n        if (!this.treeWidget.options.buttonLeft) {\n            div.appendChild(buttonLink);\n        }\n        return li;\n    };\n    ElementsRenderer.prototype.createNodeLi = function (node, level, isSelected) {\n        var liClasses = [\"jqtree_common\"];\n        if (isSelected) {\n            liClasses.push(\"jqtree-selected\");\n        }\n        var classString = liClasses.join(\" \");\n        // li\n        var li = document.createElement(\"li\");\n        li.className = classString;\n        li.setAttribute(\"role\", \"presentation\");\n        // div\n        var div = document.createElement(\"div\");\n        div.className = \"jqtree-element jqtree_common\";\n        div.setAttribute(\"role\", \"presentation\");\n        li.appendChild(div);\n        // title span\n        div.appendChild(this.createTitleSpan(node.name, level, isSelected, node.is_open, false));\n        return li;\n    };\n    ElementsRenderer.prototype.createTitleSpan = function (nodeName, level, isSelected, isOpen, isFolder) {\n        var titleSpan = document.createElement(\"span\");\n        var classes = \"jqtree-title jqtree_common\";\n        if (isFolder) {\n            classes += \" jqtree-title-folder\";\n        }\n        titleSpan.className = classes;\n        titleSpan.setAttribute(\"role\", \"treeitem\");\n        titleSpan.setAttribute(\"aria-level\", \"\" + level);\n        titleSpan.setAttribute(\"aria-selected\", util_1.getBoolString(isSelected));\n        titleSpan.setAttribute(\"aria-expanded\", util_1.getBoolString(isOpen));\n        if (isSelected) {\n            var tabIndex = this.treeWidget.options.tabIndex;\n            if (tabIndex !== undefined) {\n                titleSpan.setAttribute(\"tabindex\", \"\" + tabIndex);\n            }\n        }\n        if (this.treeWidget.options.autoEscape) {\n            titleSpan.textContent = nodeName;\n        }\n        else {\n            titleSpan.innerHTML = nodeName;\n        }\n        return titleSpan;\n    };\n    ElementsRenderer.prototype.getButtonClasses = function (node) {\n        var classes = [\"jqtree-toggler\", \"jqtree_common\"];\n        if (!node.is_open) {\n            classes.push(\"jqtree-closed\");\n        }\n        if (this.treeWidget.options.buttonLeft) {\n            classes.push(\"jqtree-toggler-left\");\n        }\n        else {\n            classes.push(\"jqtree-toggler-right\");\n        }\n        return classes.join(\" \");\n    };\n    ElementsRenderer.prototype.getFolderClasses = function (node, isSelected) {\n        var classes = [\"jqtree-folder\"];\n        if (!node.is_open) {\n            classes.push(\"jqtree-closed\");\n        }\n        if (isSelected) {\n            classes.push(\"jqtree-selected\");\n        }\n        if (node.is_loading) {\n            classes.push(\"jqtree-loading\");\n        }\n        return classes.join(\" \");\n    };\n    ElementsRenderer.prototype.createButtonElement = function (value) {\n        if (typeof value === \"string\") {\n            // convert value to html\n            var div = document.createElement(\"div\");\n            div.innerHTML = value;\n            return document.createTextNode(div.innerHTML);\n        }\n        else {\n            return jQuery(value)[0];\n        }\n    };\n    return ElementsRenderer;\n}());\nexports[\"default\"] = ElementsRenderer;\n","\"use strict\";\nexports.__esModule = true;\nvar KeyHandler = /** @class */ (function () {\n    function KeyHandler(treeWidget) {\n        var _this = this;\n        this.handleKeyDown = function (e) {\n            if (!_this.canHandleKeyboard()) {\n                return true;\n            }\n            var selectedNode = _this.treeWidget.getSelectedNode();\n            if (!selectedNode) {\n                return true;\n            }\n            var key = e.which;\n            switch (key) {\n                case KeyHandler.DOWN:\n                    return _this.moveDown(selectedNode);\n                case KeyHandler.UP:\n                    return _this.moveUp(selectedNode);\n                case KeyHandler.RIGHT:\n                    return _this.moveRight(selectedNode);\n                case KeyHandler.LEFT:\n                    return _this.moveLeft(selectedNode);\n                default:\n                    return true;\n            }\n        };\n        this.treeWidget = treeWidget;\n        if (treeWidget.options.keyboardSupport) {\n            jQuery(document).on(\"keydown.jqtree\", this.handleKeyDown);\n        }\n    }\n    KeyHandler.prototype.deinit = function () {\n        jQuery(document).off(\"keydown.jqtree\");\n    };\n    KeyHandler.prototype.moveDown = function (selectedNode) {\n        return this.selectNode(selectedNode.getNextNode());\n    };\n    KeyHandler.prototype.moveUp = function (selectedNode) {\n        return this.selectNode(selectedNode.getPreviousNode());\n    };\n    KeyHandler.prototype.moveRight = function (selectedNode) {\n        if (!selectedNode.isFolder()) {\n            return true;\n        }\n        else {\n            // folder node\n            if (selectedNode.is_open) {\n                // Right moves to the first child of an open node\n                return this.selectNode(selectedNode.getNextNode());\n            }\n            else {\n                // Right expands a closed node\n                this.treeWidget.openNode(selectedNode);\n                return false;\n            }\n        }\n    };\n    KeyHandler.prototype.moveLeft = function (selectedNode) {\n        if (selectedNode.isFolder() && selectedNode.is_open) {\n            // Left on an open node closes the node\n            this.treeWidget.closeNode(selectedNode);\n            return false;\n        }\n        else {\n            // Left on a closed or end node moves focus to the node's parent\n            return this.selectNode(selectedNode.getParent());\n        }\n    };\n    KeyHandler.prototype.selectNode = function (node) {\n        if (!node) {\n            return true;\n        }\n        else {\n            this.treeWidget.selectNode(node);\n            if (!this.treeWidget.scrollHandler.isScrolledIntoView(jQuery(node.element).find(\".jqtree-element\"))) {\n                this.treeWidget.scrollToNode(node);\n            }\n            return false;\n        }\n    };\n    KeyHandler.prototype.canHandleKeyboard = function () {\n        return ((this.treeWidget.options.keyboardSupport || false) &&\n            this.treeWidget.selectNodeHandler.isFocusOnTree());\n    };\n    KeyHandler.LEFT = 37;\n    KeyHandler.UP = 38;\n    KeyHandler.RIGHT = 39;\n    KeyHandler.DOWN = 40;\n    return KeyHandler;\n}());\nexports[\"default\"] = KeyHandler;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\n/*\nThis widget does the same a the mouse widget in jqueryui.\n*/\nvar simple_widget_1 = require(\"./simple.widget\");\nvar getPositionInfoFromMouseEvent = function (e) { return ({\n    pageX: e.pageX,\n    pageY: e.pageY,\n    target: e.target,\n    originalEvent: e\n}); };\nvar getPositionInfoFromTouch = function (touch, e) { return ({\n    pageX: touch.pageX,\n    pageY: touch.pageY,\n    target: touch.target,\n    originalEvent: e\n}); };\nvar MouseWidget = /** @class */ (function (_super) {\n    __extends(MouseWidget, _super);\n    function MouseWidget() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.mouseDown = function (e) {\n            // Left mouse button?\n            if (e.button !== 0) {\n                return;\n            }\n            var result = _this.handleMouseDown(getPositionInfoFromMouseEvent(e));\n            if (result && e.cancelable) {\n                e.preventDefault();\n            }\n        };\n        _this.mouseMove = function (e) {\n            _this.handleMouseMove(e, getPositionInfoFromMouseEvent(e));\n        };\n        _this.mouseUp = function (e) {\n            _this.handleMouseUp(getPositionInfoFromMouseEvent(e));\n        };\n        _this.touchStart = function (e) {\n            if (!e) {\n                return;\n            }\n            if (e.touches.length > 1) {\n                return;\n            }\n            var touch = e.changedTouches[0];\n            _this.handleMouseDown(getPositionInfoFromTouch(touch, e));\n        };\n        _this.touchMove = function (e) {\n            if (!e) {\n                return;\n            }\n            if (e.touches.length > 1) {\n                return;\n            }\n            var touch = e.changedTouches[0];\n            _this.handleMouseMove(e, getPositionInfoFromTouch(touch, e));\n        };\n        _this.touchEnd = function (e) {\n            if (!e) {\n                return;\n            }\n            if (e.touches.length > 1) {\n                return;\n            }\n            var touch = e.changedTouches[0];\n            _this.handleMouseUp(getPositionInfoFromTouch(touch, e));\n        };\n        return _this;\n    }\n    MouseWidget.prototype.init = function () {\n        var element = this.$el.get(0);\n        element.addEventListener(\"mousedown\", this.mouseDown, {\n            passive: false\n        });\n        element.addEventListener(\"touchstart\", this.touchStart, {\n            passive: false\n        });\n        this.isMouseStarted = false;\n        this.mouseDelayTimer = null;\n        this.isMouseDelayMet = false;\n        this.mouseDownInfo = null;\n    };\n    MouseWidget.prototype.deinit = function () {\n        var el = this.$el.get(0);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n        el.removeEventListener(\"mousedown\", this.mouseDown, {\n            passive: false\n        });\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n        el.removeEventListener(\"touchstart\", this.touchStart, {\n            passive: false\n        });\n        this.removeMouseMoveEventListeners();\n    };\n    MouseWidget.prototype.handleMouseDown = function (positionInfo) {\n        // We may have missed mouseup (out of window)\n        if (this.isMouseStarted) {\n            this.handleMouseUp(positionInfo);\n        }\n        this.mouseDownInfo = positionInfo;\n        if (!this.mouseCapture(positionInfo)) {\n            return false;\n        }\n        this.handleStartMouse();\n        return true;\n    };\n    MouseWidget.prototype.handleStartMouse = function () {\n        document.addEventListener(\"mousemove\", this.mouseMove, {\n            passive: false\n        });\n        document.addEventListener(\"touchmove\", this.touchMove, {\n            passive: false\n        });\n        document.addEventListener(\"mouseup\", this.mouseUp, { passive: false });\n        document.addEventListener(\"touchend\", this.touchEnd, {\n            passive: false\n        });\n        var mouseDelay = this.getMouseDelay();\n        if (mouseDelay) {\n            this.startMouseDelayTimer(mouseDelay);\n        }\n        else {\n            this.isMouseDelayMet = true;\n        }\n    };\n    MouseWidget.prototype.startMouseDelayTimer = function (mouseDelay) {\n        var _this = this;\n        if (this.mouseDelayTimer) {\n            clearTimeout(this.mouseDelayTimer);\n        }\n        this.mouseDelayTimer = window.setTimeout(function () {\n            if (_this.mouseDownInfo) {\n                _this.isMouseDelayMet = true;\n            }\n        }, mouseDelay);\n        this.isMouseDelayMet = false;\n    };\n    MouseWidget.prototype.handleMouseMove = function (e, positionInfo) {\n        if (this.isMouseStarted) {\n            this.mouseDrag(positionInfo);\n            if (e.cancelable) {\n                e.preventDefault();\n            }\n            return;\n        }\n        if (!this.isMouseDelayMet) {\n            return;\n        }\n        if (this.mouseDownInfo) {\n            this.isMouseStarted = this.mouseStart(this.mouseDownInfo) !== false;\n        }\n        if (this.isMouseStarted) {\n            this.mouseDrag(positionInfo);\n            if (e.cancelable) {\n                e.preventDefault();\n            }\n        }\n        else {\n            this.handleMouseUp(positionInfo);\n        }\n    };\n    MouseWidget.prototype.handleMouseUp = function (positionInfo) {\n        this.removeMouseMoveEventListeners();\n        this.isMouseDelayMet = false;\n        this.mouseDownInfo = null;\n        if (this.isMouseStarted) {\n            this.isMouseStarted = false;\n            this.mouseStop(positionInfo);\n        }\n    };\n    MouseWidget.prototype.removeMouseMoveEventListeners = function () {\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n        document.removeEventListener(\"mousemove\", this.mouseMove, {\n            passive: false\n        });\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n        document.removeEventListener(\"touchmove\", this.touchMove, {\n            passive: false\n        });\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n        document.removeEventListener(\"mouseup\", this.mouseUp, {\n            passive: false\n        });\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-call, @typescript-eslint/no-unsafe-member-access\n        document.removeEventListener(\"touchend\", this.touchEnd, {\n            passive: false\n        });\n    };\n    return MouseWidget;\n}(simple_widget_1[\"default\"]));\nexports[\"default\"] = MouseWidget;\n","\"use strict\";\nexports.__esModule = true;\nexports.Node = exports.getPosition = exports.getPositionName = exports.Position = void 0;\nvar Position;\n(function (Position) {\n    Position[Position[\"Before\"] = 1] = \"Before\";\n    Position[Position[\"After\"] = 2] = \"After\";\n    Position[Position[\"Inside\"] = 3] = \"Inside\";\n    Position[Position[\"None\"] = 4] = \"None\";\n})(Position = exports.Position || (exports.Position = {}));\nvar positionNames = {\n    before: Position.Before,\n    after: Position.After,\n    inside: Position.Inside,\n    none: Position.None\n};\nvar getPositionName = function (position) {\n    for (var name_1 in positionNames) {\n        if (Object.prototype.hasOwnProperty.call(positionNames, name_1)) {\n            if (positionNames[name_1] === position) {\n                return name_1;\n            }\n        }\n    }\n    return \"\";\n};\nexports.getPositionName = getPositionName;\nvar getPosition = function (name) {\n    return positionNames[name];\n};\nexports.getPosition = getPosition;\nvar Node = /** @class */ (function () {\n    function Node(o, isRoot, nodeClass) {\n        if (o === void 0) { o = null; }\n        if (isRoot === void 0) { isRoot = false; }\n        if (nodeClass === void 0) { nodeClass = Node; }\n        this.name = \"\";\n        this.isEmptyFolder = false;\n        this.load_on_demand = false;\n        this.setData(o);\n        this.children = [];\n        this.parent = null;\n        if (isRoot) {\n            this.idMapping = new Map();\n            this.tree = this;\n            this.nodeClass = nodeClass;\n        }\n    }\n    /*\n    Set the data of this node.\n\n    setData(string): set the name of the node\n    setdata(object): set attributes of the node\n\n    Examples:\n        setdata('node1')\n\n        setData({ name: 'node1', id: 1});\n\n        setData({ name: 'node2', id: 2, color: 'green'});\n\n    * This is an internal function; it is not in the docs\n    * Does not remove existing node values\n    */\n    Node.prototype.setData = function (o) {\n        if (!o) {\n            return;\n        }\n        else if (typeof o === \"string\") {\n            this.name = o;\n        }\n        else if (typeof o === \"object\") {\n            for (var key in o) {\n                if (Object.prototype.hasOwnProperty.call(o, key)) {\n                    var value = o[key];\n                    if (key === \"label\" || key === \"name\") {\n                        // You can use the 'label' key instead of 'name'; this is a legacy feature\n                        if (typeof value === \"string\") {\n                            this.name = value;\n                        }\n                    }\n                    else if (key !== \"children\" && key !== \"parent\") {\n                        // You can't update the children or the parent using this function\n                        this[key] = value;\n                    }\n                }\n            }\n        }\n    };\n    /*\n    Create tree from data.\n\n    Structure of data is:\n    [\n        {\n            name: 'node1',\n            children: [\n                { name: 'child1' },\n                { name: 'child2' }\n            ]\n        },\n        {\n            name: 'node2'\n        }\n    ]\n    */\n    Node.prototype.loadFromData = function (data) {\n        this.removeChildren();\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n            var o = data_1[_i];\n            var node = this.createNode(o);\n            this.addChild(node);\n            if (typeof o === \"object\" &&\n                o[\"children\"] &&\n                o[\"children\"] instanceof Array) {\n                if (o[\"children\"].length === 0) {\n                    node.isEmptyFolder = true;\n                }\n                else {\n                    node.loadFromData(o[\"children\"]);\n                }\n            }\n        }\n        return this;\n    };\n    /*\n    Add child.\n\n    tree.addChild(\n        new Node('child1')\n    );\n    */\n    Node.prototype.addChild = function (node) {\n        this.children.push(node);\n        node.setParent(this);\n    };\n    /*\n    Add child at position. Index starts at 0.\n\n    tree.addChildAtPosition(\n        new Node('abc'),\n        1\n    );\n    */\n    Node.prototype.addChildAtPosition = function (node, index) {\n        this.children.splice(index, 0, node);\n        node.setParent(this);\n    };\n    /*\n    Remove child. This also removes the children of the node.\n\n    tree.removeChild(tree.children[0]);\n    */\n    Node.prototype.removeChild = function (node) {\n        // remove children from the index\n        node.removeChildren();\n        this.doRemoveChild(node);\n    };\n    /*\n    Get child index.\n\n    var index = getChildIndex(node);\n    */\n    Node.prototype.getChildIndex = function (node) {\n        return this.children.indexOf(node);\n    };\n    /*\n    Does the tree have children?\n\n    if (tree.hasChildren()) {\n        //\n    }\n    */\n    Node.prototype.hasChildren = function () {\n        return this.children.length !== 0;\n    };\n    Node.prototype.isFolder = function () {\n        return this.hasChildren() || this.load_on_demand;\n    };\n    /*\n    Iterate over all the nodes in the tree.\n\n    Calls callback with (node, level).\n\n    The callback must return true to continue the iteration on current node.\n\n    tree.iterate(\n        function(node, level) {\n           console.log(node.name);\n\n           // stop iteration after level 2\n           return (level <= 2);\n        }\n    );\n\n    */\n    Node.prototype.iterate = function (callback) {\n        var _iterate = function (node, level) {\n            if (node.children) {\n                for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n                    var child = _a[_i];\n                    var result = callback(child, level);\n                    if (result && child.hasChildren()) {\n                        _iterate(child, level + 1);\n                    }\n                }\n            }\n        };\n        _iterate(this, 0);\n    };\n    /*\n    Move node relative to another node.\n\n    Argument position: Position.BEFORE, Position.AFTER or Position.Inside\n\n    // move node1 after node2\n    tree.moveNode(node1, node2, Position.AFTER);\n    */\n    Node.prototype.moveNode = function (movedNode, targetNode, position) {\n        if (!movedNode.parent || movedNode.isParentOf(targetNode)) {\n            // - Node is parent of target node\n            // - Or, parent is empty\n            return false;\n        }\n        else {\n            movedNode.parent.doRemoveChild(movedNode);\n            switch (position) {\n                case Position.After: {\n                    if (targetNode.parent) {\n                        targetNode.parent.addChildAtPosition(movedNode, targetNode.parent.getChildIndex(targetNode) + 1);\n                        return true;\n                    }\n                    return false;\n                }\n                case Position.Before: {\n                    if (targetNode.parent) {\n                        targetNode.parent.addChildAtPosition(movedNode, targetNode.parent.getChildIndex(targetNode));\n                        return true;\n                    }\n                    return false;\n                }\n                case Position.Inside: {\n                    // move inside as first child\n                    targetNode.addChildAtPosition(movedNode, 0);\n                    return true;\n                }\n                default:\n                    return false;\n            }\n        }\n    };\n    /*\n    Get the tree as data.\n    */\n    Node.prototype.getData = function (includeParent) {\n        if (includeParent === void 0) { includeParent = false; }\n        var getDataFromNodes = function (nodes) {\n            return nodes.map(function (node) {\n                var tmpNode = {};\n                for (var k in node) {\n                    if ([\n                        \"parent\",\n                        \"children\",\n                        \"element\",\n                        \"idMapping\",\n                        \"load_on_demand\",\n                        \"nodeClass\",\n                        \"tree\",\n                        \"isEmptyFolder\",\n                    ].indexOf(k) === -1 &&\n                        Object.prototype.hasOwnProperty.call(node, k)) {\n                        var v = node[k];\n                        tmpNode[k] = v;\n                    }\n                }\n                if (node.hasChildren()) {\n                    tmpNode[\"children\"] = getDataFromNodes(node.children);\n                }\n                return tmpNode;\n            });\n        };\n        if (includeParent) {\n            return getDataFromNodes([this]);\n        }\n        else {\n            return getDataFromNodes(this.children);\n        }\n    };\n    Node.prototype.getNodeByName = function (name) {\n        return this.getNodeByCallback(function (node) { return node.name === name; });\n    };\n    Node.prototype.getNodeByNameMustExist = function (name) {\n        var node = this.getNodeByCallback(function (n) { return n.name === name; });\n        if (!node) {\n            throw \"Node with name \" + name + \" not found\";\n        }\n        return node;\n    };\n    Node.prototype.getNodeByCallback = function (callback) {\n        var result = null;\n        this.iterate(function (node) {\n            if (result) {\n                return false;\n            }\n            else if (callback(node)) {\n                result = node;\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n        return result;\n    };\n    Node.prototype.addAfter = function (nodeInfo) {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var node = this.createNode(nodeInfo);\n            var childIndex = this.parent.getChildIndex(this);\n            this.parent.addChildAtPosition(node, childIndex + 1);\n            if (typeof nodeInfo === \"object\" &&\n                nodeInfo[\"children\"] &&\n                nodeInfo[\"children\"] instanceof Array &&\n                nodeInfo[\"children\"].length) {\n                node.loadFromData(nodeInfo[\"children\"]);\n            }\n            return node;\n        }\n    };\n    Node.prototype.addBefore = function (nodeInfo) {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var node = this.createNode(nodeInfo);\n            var childIndex = this.parent.getChildIndex(this);\n            this.parent.addChildAtPosition(node, childIndex);\n            if (typeof nodeInfo === \"object\" &&\n                nodeInfo[\"children\"] &&\n                nodeInfo[\"children\"] instanceof Array &&\n                nodeInfo[\"children\"].length) {\n                node.loadFromData(nodeInfo[\"children\"]);\n            }\n            return node;\n        }\n    };\n    Node.prototype.addParent = function (nodeInfo) {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var newParent = this.createNode(nodeInfo);\n            if (this.tree) {\n                newParent.setParent(this.tree);\n            }\n            var originalParent = this.parent;\n            for (var _i = 0, _a = originalParent.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                newParent.addChild(child);\n            }\n            originalParent.children = [];\n            originalParent.addChild(newParent);\n            return newParent;\n        }\n    };\n    Node.prototype.remove = function () {\n        if (this.parent) {\n            this.parent.removeChild(this);\n            this.parent = null;\n        }\n    };\n    Node.prototype.append = function (nodeInfo) {\n        var node = this.createNode(nodeInfo);\n        this.addChild(node);\n        if (typeof nodeInfo === \"object\" &&\n            nodeInfo[\"children\"] &&\n            nodeInfo[\"children\"] instanceof Array &&\n            nodeInfo[\"children\"].length) {\n            node.loadFromData(nodeInfo[\"children\"]);\n        }\n        return node;\n    };\n    Node.prototype.prepend = function (nodeInfo) {\n        var node = this.createNode(nodeInfo);\n        this.addChildAtPosition(node, 0);\n        if (typeof nodeInfo === \"object\" &&\n            nodeInfo[\"children\"] &&\n            nodeInfo[\"children\"] instanceof Array &&\n            nodeInfo[\"children\"].length) {\n            node.loadFromData(nodeInfo[\"children\"]);\n        }\n        return node;\n    };\n    Node.prototype.isParentOf = function (node) {\n        var parent = node.parent;\n        while (parent) {\n            if (parent === this) {\n                return true;\n            }\n            parent = parent.parent;\n        }\n        return false;\n    };\n    Node.prototype.getLevel = function () {\n        var level = 0;\n        var node = this; // eslint-disable-line @typescript-eslint/no-this-alias\n        while (node.parent) {\n            level += 1;\n            node = node.parent;\n        }\n        return level;\n    };\n    Node.prototype.getNodeById = function (nodeId) {\n        return this.idMapping.get(nodeId) || null;\n    };\n    Node.prototype.addNodeToIndex = function (node) {\n        if (node.id != null) {\n            this.idMapping.set(node.id, node);\n        }\n    };\n    Node.prototype.removeNodeFromIndex = function (node) {\n        if (node.id != null) {\n            this.idMapping[\"delete\"](node.id);\n        }\n    };\n    Node.prototype.removeChildren = function () {\n        var _this = this;\n        this.iterate(function (child) {\n            var _a;\n            (_a = _this.tree) === null || _a === void 0 ? void 0 : _a.removeNodeFromIndex(child);\n            return true;\n        });\n        this.children = [];\n    };\n    Node.prototype.getPreviousSibling = function () {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var previousIndex = this.parent.getChildIndex(this) - 1;\n            if (previousIndex >= 0) {\n                return this.parent.children[previousIndex];\n            }\n            else {\n                return null;\n            }\n        }\n    };\n    Node.prototype.getNextSibling = function () {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var nextIndex = this.parent.getChildIndex(this) + 1;\n            if (nextIndex < this.parent.children.length) {\n                return this.parent.children[nextIndex];\n            }\n            else {\n                return null;\n            }\n        }\n    };\n    Node.prototype.getNodesByProperty = function (key, value) {\n        return this.filter(function (node) { return node[key] === value; });\n    };\n    Node.prototype.filter = function (f) {\n        var result = [];\n        this.iterate(function (node) {\n            if (f(node)) {\n                result.push(node);\n            }\n            return true;\n        });\n        return result;\n    };\n    Node.prototype.getNextNode = function (includeChildren) {\n        if (includeChildren === void 0) { includeChildren = true; }\n        if (includeChildren && this.hasChildren() && this.is_open) {\n            // First child\n            return this.children[0];\n        }\n        else {\n            if (!this.parent) {\n                return null;\n            }\n            else {\n                var nextSibling = this.getNextSibling();\n                if (nextSibling) {\n                    // Next sibling\n                    return nextSibling;\n                }\n                else {\n                    // Next node of parent\n                    return this.parent.getNextNode(false);\n                }\n            }\n        }\n    };\n    Node.prototype.getPreviousNode = function () {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var previousSibling = this.getPreviousSibling();\n            if (previousSibling) {\n                if (!previousSibling.hasChildren() ||\n                    !previousSibling.is_open) {\n                    // Previous sibling\n                    return previousSibling;\n                }\n                else {\n                    // Last child of previous sibling\n                    return previousSibling.getLastChild();\n                }\n            }\n            else {\n                return this.getParent();\n            }\n        }\n    };\n    Node.prototype.getParent = function () {\n        // Return parent except if it is the root node\n        if (!this.parent) {\n            return null;\n        }\n        else if (!this.parent.parent) {\n            // Root node -> null\n            return null;\n        }\n        else {\n            return this.parent;\n        }\n    };\n    Node.prototype.getLastChild = function () {\n        if (!this.hasChildren()) {\n            return null;\n        }\n        else {\n            var lastChild = this.children[this.children.length - 1];\n            if (!(lastChild.hasChildren() && lastChild.is_open)) {\n                return lastChild;\n            }\n            else {\n                return lastChild.getLastChild();\n            }\n        }\n    };\n    // Init Node from data without making it the root of the tree\n    Node.prototype.initFromData = function (data) {\n        var _this = this;\n        var addNode = function (nodeData) {\n            _this.setData(nodeData);\n            if (typeof nodeData === \"object\" &&\n                nodeData[\"children\"] &&\n                nodeData[\"children\"] instanceof Array &&\n                nodeData[\"children\"].length) {\n                addChildren(nodeData[\"children\"]);\n            }\n        };\n        var addChildren = function (childrenData) {\n            for (var _i = 0, childrenData_1 = childrenData; _i < childrenData_1.length; _i++) {\n                var child = childrenData_1[_i];\n                var node = _this.createNode();\n                node.initFromData(child);\n                _this.addChild(node);\n            }\n        };\n        addNode(data);\n    };\n    Node.prototype.setParent = function (parent) {\n        var _a;\n        this.parent = parent;\n        this.tree = parent.tree;\n        (_a = this.tree) === null || _a === void 0 ? void 0 : _a.addNodeToIndex(this);\n    };\n    Node.prototype.doRemoveChild = function (node) {\n        var _a;\n        this.children.splice(this.getChildIndex(node), 1);\n        (_a = this.tree) === null || _a === void 0 ? void 0 : _a.removeNodeFromIndex(node);\n    };\n    Node.prototype.getNodeClass = function () {\n        var _a;\n        return this.nodeClass || ((_a = this === null || this === void 0 ? void 0 : this.tree) === null || _a === void 0 ? void 0 : _a.nodeClass) || Node;\n    };\n    Node.prototype.createNode = function (nodeData) {\n        var nodeClass = this.getNodeClass();\n        return new nodeClass(nodeData);\n    };\n    return Node;\n}());\nexports.Node = Node;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nexports.BorderDropHint = exports.FolderElement = exports.NodeElement = void 0;\nvar node_1 = require(\"./node\");\nvar NodeElement = /** @class */ (function () {\n    function NodeElement(node, treeWidget) {\n        this.init(node, treeWidget);\n    }\n    NodeElement.prototype.init = function (node, treeWidget) {\n        this.node = node;\n        this.treeWidget = treeWidget;\n        if (!node.element) {\n            node.element = this.treeWidget.element.get(0);\n        }\n        this.$element = jQuery(node.element);\n    };\n    NodeElement.prototype.addDropHint = function (position) {\n        if (this.mustShowBorderDropHint(position)) {\n            return new BorderDropHint(this.$element, this.treeWidget._getScrollLeft());\n        }\n        else {\n            return new GhostDropHint(this.node, this.$element, position);\n        }\n    };\n    NodeElement.prototype.select = function (mustSetFocus) {\n        var _a;\n        var $li = this.getLi();\n        $li.addClass(\"jqtree-selected\");\n        $li.attr(\"aria-selected\", \"true\");\n        var $span = this.getSpan();\n        $span.attr(\"tabindex\", (_a = this.treeWidget.options.tabIndex) !== null && _a !== void 0 ? _a : null);\n        if (mustSetFocus) {\n            $span.trigger(\"focus\");\n        }\n    };\n    NodeElement.prototype.deselect = function () {\n        var $li = this.getLi();\n        $li.removeClass(\"jqtree-selected\");\n        $li.attr(\"aria-selected\", \"false\");\n        var $span = this.getSpan();\n        $span.removeAttr(\"tabindex\");\n        $span.blur();\n    };\n    NodeElement.prototype.getUl = function () {\n        return this.$element.children(\"ul:first\");\n    };\n    NodeElement.prototype.getSpan = function () {\n        return this.$element\n            .children(\".jqtree-element\")\n            .find(\"span.jqtree-title\");\n    };\n    NodeElement.prototype.getLi = function () {\n        return this.$element;\n    };\n    NodeElement.prototype.mustShowBorderDropHint = function (position) {\n        return position === node_1.Position.Inside;\n    };\n    return NodeElement;\n}());\nexports.NodeElement = NodeElement;\nvar FolderElement = /** @class */ (function (_super) {\n    __extends(FolderElement, _super);\n    function FolderElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FolderElement.prototype.open = function (onFinished, slide, animationSpeed) {\n        var _this = this;\n        if (slide === void 0) { slide = true; }\n        if (animationSpeed === void 0) { animationSpeed = \"fast\"; }\n        if (this.node.is_open) {\n            return;\n        }\n        this.node.is_open = true;\n        var $button = this.getButton();\n        $button.removeClass(\"jqtree-closed\");\n        $button.html(\"\");\n        var buttonEl = $button.get(0);\n        if (buttonEl) {\n            var icon = this.treeWidget.renderer.openedIconElement.cloneNode(true);\n            buttonEl.appendChild(icon);\n        }\n        var doOpen = function () {\n            var $li = _this.getLi();\n            $li.removeClass(\"jqtree-closed\");\n            var $span = _this.getSpan();\n            $span.attr(\"aria-expanded\", \"true\");\n            if (onFinished) {\n                onFinished(_this.node);\n            }\n            _this.treeWidget._triggerEvent(\"tree.open\", {\n                node: _this.node\n            });\n        };\n        if (slide) {\n            this.getUl().slideDown(animationSpeed, doOpen);\n        }\n        else {\n            this.getUl().show();\n            doOpen();\n        }\n    };\n    FolderElement.prototype.close = function (slide, animationSpeed) {\n        var _this = this;\n        if (slide === void 0) { slide = true; }\n        if (animationSpeed === void 0) { animationSpeed = \"fast\"; }\n        if (!this.node.is_open) {\n            return;\n        }\n        this.node.is_open = false;\n        var $button = this.getButton();\n        $button.addClass(\"jqtree-closed\");\n        $button.html(\"\");\n        var buttonEl = $button.get(0);\n        if (buttonEl) {\n            var icon = this.treeWidget.renderer.closedIconElement.cloneNode(true);\n            buttonEl.appendChild(icon);\n        }\n        var doClose = function () {\n            var $li = _this.getLi();\n            $li.addClass(\"jqtree-closed\");\n            var $span = _this.getSpan();\n            $span.attr(\"aria-expanded\", \"false\");\n            _this.treeWidget._triggerEvent(\"tree.close\", {\n                node: _this.node\n            });\n        };\n        if (slide) {\n            this.getUl().slideUp(animationSpeed, doClose);\n        }\n        else {\n            this.getUl().hide();\n            doClose();\n        }\n    };\n    FolderElement.prototype.mustShowBorderDropHint = function (position) {\n        return !this.node.is_open && position === node_1.Position.Inside;\n    };\n    FolderElement.prototype.getButton = function () {\n        return this.$element\n            .children(\".jqtree-element\")\n            .find(\"a.jqtree-toggler\");\n    };\n    return FolderElement;\n}(NodeElement));\nexports.FolderElement = FolderElement;\nvar BorderDropHint = /** @class */ (function () {\n    function BorderDropHint($element, scrollLeft) {\n        var $div = $element.children(\".jqtree-element\");\n        var elWidth = $element.width() || 0;\n        var width = Math.max(elWidth + scrollLeft - 4, 0);\n        var elHeight = $div.outerHeight() || 0;\n        var height = Math.max(elHeight - 4, 0);\n        this.$hint = jQuery('<span class=\"jqtree-border\"></span>');\n        $div.append(this.$hint);\n        this.$hint.css({ width: width, height: height });\n    }\n    BorderDropHint.prototype.remove = function () {\n        this.$hint.remove();\n    };\n    return BorderDropHint;\n}());\nexports.BorderDropHint = BorderDropHint;\nvar GhostDropHint = /** @class */ (function () {\n    function GhostDropHint(node, $element, position) {\n        this.$element = $element;\n        this.node = node;\n        this.$ghost = jQuery(\"<li class=\\\"jqtree_common jqtree-ghost\\\"><span class=\\\"jqtree_common jqtree-circle\\\"></span>\\n            <span class=\\\"jqtree_common jqtree-line\\\"></span></li>\");\n        if (position === node_1.Position.After) {\n            this.moveAfter();\n        }\n        else if (position === node_1.Position.Before) {\n            this.moveBefore();\n        }\n        else if (position === node_1.Position.Inside) {\n            if (node.isFolder() && node.is_open) {\n                this.moveInsideOpenFolder();\n            }\n            else {\n                this.moveInside();\n            }\n        }\n    }\n    GhostDropHint.prototype.remove = function () {\n        this.$ghost.remove();\n    };\n    GhostDropHint.prototype.moveAfter = function () {\n        this.$element.after(this.$ghost);\n    };\n    GhostDropHint.prototype.moveBefore = function () {\n        this.$element.before(this.$ghost);\n    };\n    GhostDropHint.prototype.moveInsideOpenFolder = function () {\n        jQuery(this.node.children[0].element).before(this.$ghost);\n    };\n    GhostDropHint.prototype.moveInside = function () {\n        this.$element.after(this.$ghost);\n        this.$ghost.addClass(\"jqtree-inside\");\n    };\n    return GhostDropHint;\n}());\n","\"use strict\";\nexports.__esModule = true;\nvar util_1 = require(\"./util\");\nvar SaveStateHandler = /** @class */ (function () {\n    function SaveStateHandler(treeWidget) {\n        this.treeWidget = treeWidget;\n    }\n    SaveStateHandler.prototype.saveState = function () {\n        var state = JSON.stringify(this.getState());\n        if (this.treeWidget.options.onSetStateFromStorage) {\n            this.treeWidget.options.onSetStateFromStorage(state);\n        }\n        else if (this.supportsLocalStorage()) {\n            localStorage.setItem(this.getKeyName(), state);\n        }\n    };\n    SaveStateHandler.prototype.getStateFromStorage = function () {\n        var jsonData = this.loadFromStorage();\n        if (jsonData) {\n            return this.parseState(jsonData);\n        }\n        else {\n            return null;\n        }\n    };\n    SaveStateHandler.prototype.getState = function () {\n        var _this = this;\n        var getOpenNodeIds = function () {\n            var openNodes = [];\n            _this.treeWidget.tree.iterate(function (node) {\n                if (node.is_open && node.id && node.hasChildren()) {\n                    openNodes.push(node.id);\n                }\n                return true;\n            });\n            return openNodes;\n        };\n        var getSelectedNodeIds = function () {\n            var selectedNodeIds = [];\n            _this.treeWidget.getSelectedNodes().forEach(function (node) {\n                if (node.id != null) {\n                    selectedNodeIds.push(node.id);\n                }\n            });\n            return selectedNodeIds;\n        };\n        return {\n            open_nodes: getOpenNodeIds(),\n            selected_node: getSelectedNodeIds()\n        };\n    };\n    /*\n    Set initial state\n    Don't handle nodes that are loaded on demand\n\n    result: must load on demand\n    */\n    SaveStateHandler.prototype.setInitialState = function (state) {\n        if (!state) {\n            return false;\n        }\n        else {\n            var mustLoadOnDemand = false;\n            if (state.open_nodes) {\n                mustLoadOnDemand = this.openInitialNodes(state.open_nodes);\n            }\n            if (state.selected_node) {\n                this.resetSelection();\n                this.selectInitialNodes(state.selected_node);\n            }\n            return mustLoadOnDemand;\n        }\n    };\n    SaveStateHandler.prototype.setInitialStateOnDemand = function (state, cbFinished) {\n        if (state) {\n            this.doSetInitialStateOnDemand(state.open_nodes, state.selected_node, cbFinished);\n        }\n        else {\n            cbFinished();\n        }\n    };\n    SaveStateHandler.prototype.getNodeIdToBeSelected = function () {\n        var state = this.getStateFromStorage();\n        if (state && state.selected_node) {\n            return state.selected_node[0];\n        }\n        else {\n            return null;\n        }\n    };\n    SaveStateHandler.prototype.parseState = function (jsonData) {\n        var state = JSON.parse(jsonData);\n        // Check if selected_node is an int (instead of an array)\n        if (state && state.selected_node && util_1.isInt(state.selected_node)) {\n            // Convert to array\n            state.selected_node = [state.selected_node];\n        }\n        return state;\n    };\n    SaveStateHandler.prototype.loadFromStorage = function () {\n        if (this.treeWidget.options.onGetStateFromStorage) {\n            return this.treeWidget.options.onGetStateFromStorage();\n        }\n        else if (this.supportsLocalStorage()) {\n            return localStorage.getItem(this.getKeyName());\n        }\n        else {\n            return null;\n        }\n    };\n    SaveStateHandler.prototype.openInitialNodes = function (nodeIds) {\n        var mustLoadOnDemand = false;\n        for (var _i = 0, nodeIds_1 = nodeIds; _i < nodeIds_1.length; _i++) {\n            var nodeDd = nodeIds_1[_i];\n            var node = this.treeWidget.getNodeById(nodeDd);\n            if (node) {\n                if (!node.load_on_demand) {\n                    node.is_open = true;\n                }\n                else {\n                    mustLoadOnDemand = true;\n                }\n            }\n        }\n        return mustLoadOnDemand;\n    };\n    SaveStateHandler.prototype.selectInitialNodes = function (nodeIds) {\n        var selectCount = 0;\n        for (var _i = 0, nodeIds_2 = nodeIds; _i < nodeIds_2.length; _i++) {\n            var nodeId = nodeIds_2[_i];\n            var node = this.treeWidget.getNodeById(nodeId);\n            if (node) {\n                selectCount += 1;\n                this.treeWidget.selectNodeHandler.addToSelection(node);\n            }\n        }\n        return selectCount !== 0;\n    };\n    SaveStateHandler.prototype.resetSelection = function () {\n        var selectNodeHandler = this.treeWidget.selectNodeHandler;\n        var selectedNodes = selectNodeHandler.getSelectedNodes();\n        selectedNodes.forEach(function (node) {\n            selectNodeHandler.removeFromSelection(node);\n        });\n    };\n    SaveStateHandler.prototype.doSetInitialStateOnDemand = function (nodeIdsParam, selectedNodes, cbFinished) {\n        var _this = this;\n        var loadingCount = 0;\n        var nodeIds = nodeIdsParam;\n        var openNodes = function () {\n            var newNodesIds = [];\n            for (var _i = 0, nodeIds_3 = nodeIds; _i < nodeIds_3.length; _i++) {\n                var nodeId = nodeIds_3[_i];\n                var node = _this.treeWidget.getNodeById(nodeId);\n                if (!node) {\n                    newNodesIds.push(nodeId);\n                }\n                else {\n                    if (!node.is_loading) {\n                        if (node.load_on_demand) {\n                            loadAndOpenNode(node);\n                        }\n                        else {\n                            _this.treeWidget._openNode(node, false, null);\n                        }\n                    }\n                }\n            }\n            nodeIds = newNodesIds;\n            if (_this.selectInitialNodes(selectedNodes)) {\n                _this.treeWidget._refreshElements(null);\n            }\n            if (loadingCount === 0) {\n                cbFinished();\n            }\n        };\n        var loadAndOpenNode = function (node) {\n            loadingCount += 1;\n            _this.treeWidget._openNode(node, false, function () {\n                loadingCount -= 1;\n                openNodes();\n            });\n        };\n        openNodes();\n    };\n    SaveStateHandler.prototype.getKeyName = function () {\n        if (typeof this.treeWidget.options.saveState === \"string\") {\n            return this.treeWidget.options.saveState;\n        }\n        else {\n            return \"tree\";\n        }\n    };\n    SaveStateHandler.prototype.supportsLocalStorage = function () {\n        var testSupport = function () {\n            // Is local storage supported?\n            if (localStorage == null) {\n                return false;\n            }\n            else {\n                // Check if it's possible to store an item. Safari does not allow this in private browsing mode.\n                try {\n                    var key = \"_storage_test\";\n                    sessionStorage.setItem(key, \"value\");\n                    sessionStorage.removeItem(key);\n                }\n                catch (error) {\n                    return false;\n                }\n                return true;\n            }\n        };\n        if (this._supportsLocalStorage == null) {\n            this._supportsLocalStorage = testSupport();\n        }\n        return this._supportsLocalStorage;\n    };\n    return SaveStateHandler;\n}());\nexports[\"default\"] = SaveStateHandler;\n","\"use strict\";\nexports.__esModule = true;\nvar ScrollHandler = /** @class */ (function () {\n    function ScrollHandler(treeWidget) {\n        this.treeWidget = treeWidget;\n        this.previousTop = -1;\n        this.isInitialized = false;\n    }\n    ScrollHandler.prototype.checkScrolling = function () {\n        this.ensureInit();\n        this.checkVerticalScrolling();\n        this.checkHorizontalScrolling();\n    };\n    ScrollHandler.prototype.scrollToY = function (top) {\n        this.ensureInit();\n        if (this.$scrollParent) {\n            this.$scrollParent[0].scrollTop = top;\n        }\n        else {\n            var offset = this.treeWidget.$el.offset();\n            var treeTop = offset ? offset.top : 0;\n            jQuery(document).scrollTop(top + treeTop);\n        }\n    };\n    ScrollHandler.prototype.isScrolledIntoView = function ($element) {\n        this.ensureInit();\n        var elementBottom;\n        var viewBottom;\n        var elementTop;\n        var viewTop;\n        var elHeight = $element.height() || 0;\n        if (this.$scrollParent) {\n            viewTop = 0;\n            viewBottom = this.$scrollParent.height() || 0;\n            var offset = $element.offset();\n            var originalTop = offset ? offset.top : 0;\n            elementTop = originalTop - this.scrollParentTop;\n            elementBottom = elementTop + elHeight;\n        }\n        else {\n            viewTop = jQuery(window).scrollTop() || 0;\n            var windowHeight = jQuery(window).height() || 0;\n            viewBottom = viewTop + windowHeight;\n            var offset = $element.offset();\n            elementTop = offset ? offset.top : 0;\n            elementBottom = elementTop + elHeight;\n        }\n        return elementBottom <= viewBottom && elementTop >= viewTop;\n    };\n    ScrollHandler.prototype.getScrollLeft = function () {\n        if (!this.$scrollParent) {\n            return 0;\n        }\n        else {\n            return this.$scrollParent.scrollLeft() || 0;\n        }\n    };\n    ScrollHandler.prototype.initScrollParent = function () {\n        var _this = this;\n        var getParentWithOverflow = function () {\n            var cssAttributes = [\"overflow\", \"overflow-y\"];\n            var hasOverFlow = function ($el) {\n                for (var _i = 0, cssAttributes_1 = cssAttributes; _i < cssAttributes_1.length; _i++) {\n                    var attr = cssAttributes_1[_i];\n                    var overflowValue = $el.css(attr);\n                    if (overflowValue === \"auto\" ||\n                        overflowValue === \"scroll\") {\n                        return true;\n                    }\n                }\n                return false;\n            };\n            if (hasOverFlow(_this.treeWidget.$el)) {\n                return _this.treeWidget.$el;\n            }\n            for (var _i = 0, _a = _this.treeWidget.$el.parents().get(); _i < _a.length; _i++) {\n                var el = _a[_i];\n                var $el = jQuery(el);\n                if (hasOverFlow($el)) {\n                    return $el;\n                }\n            }\n            return null;\n        };\n        var setDocumentAsScrollParent = function () {\n            _this.scrollParentTop = 0;\n            _this.$scrollParent = null;\n        };\n        if (this.treeWidget.$el.css(\"position\") === \"fixed\") {\n            setDocumentAsScrollParent();\n        }\n        var $scrollParent = getParentWithOverflow();\n        if ($scrollParent &&\n            $scrollParent.length &&\n            $scrollParent[0].tagName !== \"HTML\") {\n            this.$scrollParent = $scrollParent;\n            var offset = this.$scrollParent.offset();\n            this.scrollParentTop = offset ? offset.top : 0;\n        }\n        else {\n            setDocumentAsScrollParent();\n        }\n        this.isInitialized = true;\n    };\n    ScrollHandler.prototype.ensureInit = function () {\n        if (!this.isInitialized) {\n            this.initScrollParent();\n        }\n    };\n    ScrollHandler.prototype.handleVerticalScrollingWithScrollParent = function (area) {\n        var scrollParent = this.$scrollParent && this.$scrollParent[0];\n        if (!scrollParent) {\n            return;\n        }\n        var distanceBottom = this.scrollParentTop + scrollParent.offsetHeight - area.bottom;\n        if (distanceBottom < 20) {\n            scrollParent.scrollTop += 20;\n            this.treeWidget.refreshHitAreas();\n            this.previousTop = -1;\n        }\n        else if (area.top - this.scrollParentTop < 20) {\n            scrollParent.scrollTop -= 20;\n            this.treeWidget.refreshHitAreas();\n            this.previousTop = -1;\n        }\n    };\n    ScrollHandler.prototype.handleVerticalScrollingWithDocument = function (area) {\n        var scrollTop = jQuery(document).scrollTop() || 0;\n        var distanceTop = area.top - scrollTop;\n        if (distanceTop < 20) {\n            jQuery(document).scrollTop(scrollTop - 20);\n        }\n        else {\n            var windowHeight = jQuery(window).height() || 0;\n            if (windowHeight - (area.bottom - scrollTop) < 20) {\n                jQuery(document).scrollTop(scrollTop + 20);\n            }\n        }\n    };\n    ScrollHandler.prototype.checkVerticalScrolling = function () {\n        var hoveredArea = this.treeWidget.dndHandler.hoveredArea;\n        if (hoveredArea && hoveredArea.top !== this.previousTop) {\n            this.previousTop = hoveredArea.top;\n            if (this.$scrollParent) {\n                this.handleVerticalScrollingWithScrollParent(hoveredArea);\n            }\n            else {\n                this.handleVerticalScrollingWithDocument(hoveredArea);\n            }\n        }\n    };\n    ScrollHandler.prototype.checkHorizontalScrolling = function () {\n        var positionInfo = this.treeWidget.dndHandler.positionInfo;\n        if (!positionInfo) {\n            return;\n        }\n        if (this.$scrollParent) {\n            this.handleHorizontalScrollingWithParent(positionInfo);\n        }\n        else {\n            this.handleHorizontalScrollingWithDocument(positionInfo);\n        }\n    };\n    ScrollHandler.prototype.handleHorizontalScrollingWithParent = function (positionInfo) {\n        if (positionInfo.pageX === undefined ||\n            positionInfo.pageY === undefined) {\n            return;\n        }\n        var $scrollParent = this.$scrollParent;\n        var scrollParentOffset = $scrollParent && $scrollParent.offset();\n        if (!($scrollParent && scrollParentOffset)) {\n            return;\n        }\n        var scrollParent = $scrollParent[0];\n        var canScrollRight = scrollParent.scrollLeft + scrollParent.clientWidth <\n            scrollParent.scrollWidth;\n        var canScrollLeft = scrollParent.scrollLeft > 0;\n        var rightEdge = scrollParentOffset.left + scrollParent.clientWidth;\n        var leftEdge = scrollParentOffset.left;\n        var isNearRightEdge = positionInfo.pageX > rightEdge - 20;\n        var isNearLeftEdge = positionInfo.pageX < leftEdge + 20;\n        if (isNearRightEdge && canScrollRight) {\n            scrollParent.scrollLeft = Math.min(scrollParent.scrollLeft + 20, scrollParent.scrollWidth);\n        }\n        else if (isNearLeftEdge && canScrollLeft) {\n            scrollParent.scrollLeft = Math.max(scrollParent.scrollLeft - 20, 0);\n        }\n    };\n    ScrollHandler.prototype.handleHorizontalScrollingWithDocument = function (positionInfo) {\n        if (positionInfo.pageX === undefined ||\n            positionInfo.pageY === undefined) {\n            return;\n        }\n        var $document = jQuery(document);\n        var scrollLeft = $document.scrollLeft() || 0;\n        var windowWidth = jQuery(window).width() || 0;\n        var canScrollLeft = scrollLeft > 0;\n        var isNearRightEdge = positionInfo.pageX > windowWidth - 20;\n        var isNearLeftEdge = positionInfo.pageX - scrollLeft < 20;\n        if (isNearRightEdge) {\n            $document.scrollLeft(scrollLeft + 20);\n        }\n        else if (isNearLeftEdge && canScrollLeft) {\n            $document.scrollLeft(Math.max(scrollLeft - 20, 0));\n        }\n    };\n    return ScrollHandler;\n}());\nexports[\"default\"] = ScrollHandler;\n","\"use strict\";\nexports.__esModule = true;\nvar SelectNodeHandler = /** @class */ (function () {\n    function SelectNodeHandler(treeWidget) {\n        this.treeWidget = treeWidget;\n        this.selectedNodes = new Set();\n        this.clear();\n    }\n    SelectNodeHandler.prototype.getSelectedNode = function () {\n        var selectedNodes = this.getSelectedNodes();\n        if (selectedNodes.length) {\n            return selectedNodes[0];\n        }\n        else {\n            return false;\n        }\n    };\n    SelectNodeHandler.prototype.getSelectedNodes = function () {\n        var _this = this;\n        if (this.selectedSingleNode) {\n            return [this.selectedSingleNode];\n        }\n        else {\n            var selectedNodes_1 = [];\n            this.selectedNodes.forEach(function (id) {\n                var node = _this.treeWidget.getNodeById(id);\n                if (node) {\n                    selectedNodes_1.push(node);\n                }\n            });\n            return selectedNodes_1;\n        }\n    };\n    SelectNodeHandler.prototype.getSelectedNodesUnder = function (parent) {\n        if (this.selectedSingleNode) {\n            if (parent.isParentOf(this.selectedSingleNode)) {\n                return [this.selectedSingleNode];\n            }\n            else {\n                return [];\n            }\n        }\n        else {\n            var selectedNodes = [];\n            for (var id in this.selectedNodes) {\n                if (Object.prototype.hasOwnProperty.call(this.selectedNodes, id)) {\n                    var node = this.treeWidget.getNodeById(id);\n                    if (node && parent.isParentOf(node)) {\n                        selectedNodes.push(node);\n                    }\n                }\n            }\n            return selectedNodes;\n        }\n    };\n    SelectNodeHandler.prototype.isNodeSelected = function (node) {\n        if (node.id != null) {\n            return this.selectedNodes.has(node.id);\n        }\n        else if (this.selectedSingleNode) {\n            return this.selectedSingleNode.element === node.element;\n        }\n        else {\n            return false;\n        }\n    };\n    SelectNodeHandler.prototype.clear = function () {\n        this.selectedNodes.clear();\n        this.selectedSingleNode = null;\n    };\n    SelectNodeHandler.prototype.removeFromSelection = function (node, includeChildren) {\n        var _this = this;\n        if (includeChildren === void 0) { includeChildren = false; }\n        if (node.id == null) {\n            if (this.selectedSingleNode &&\n                node.element === this.selectedSingleNode.element) {\n                this.selectedSingleNode = null;\n            }\n        }\n        else {\n            this.selectedNodes[\"delete\"](node.id);\n            if (includeChildren) {\n                node.iterate(function () {\n                    if (node.id != null) {\n                        _this.selectedNodes[\"delete\"](node.id);\n                    }\n                    return true;\n                });\n            }\n        }\n    };\n    SelectNodeHandler.prototype.addToSelection = function (node) {\n        if (node.id != null) {\n            this.selectedNodes.add(node.id);\n        }\n        else {\n            this.selectedSingleNode = node;\n        }\n    };\n    SelectNodeHandler.prototype.isFocusOnTree = function () {\n        var activeElement = document.activeElement;\n        return Boolean(activeElement &&\n            activeElement.tagName === \"SPAN\" &&\n            this.treeWidget._containsElement(activeElement));\n    };\n    return SelectNodeHandler;\n}());\nexports[\"default\"] = SelectNodeHandler;\n","\"use strict\";\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nvar register = function (widgetClass, widgetName) {\n    var getDataKey = function () { return \"simple_widget_\" + widgetName; };\n    var getWidgetData = function (el, dataKey) {\n        var widget = jQuery.data(el, dataKey);\n        if (widget && widget instanceof SimpleWidget) {\n            return widget;\n        }\n        else {\n            return null;\n        }\n    };\n    var createWidget = function ($el, options) {\n        var dataKey = getDataKey();\n        for (var _i = 0, _a = $el.get(); _i < _a.length; _i++) {\n            var el = _a[_i];\n            var existingWidget = getWidgetData(el, dataKey);\n            if (!existingWidget) {\n                var simpleWidgetClass = widgetClass;\n                var widget = new simpleWidgetClass(el, options);\n                if (!jQuery.data(el, dataKey)) {\n                    jQuery.data(el, dataKey, widget);\n                }\n                // Call init after setting data, so we can call methods\n                widget.init();\n            }\n        }\n        return $el;\n    };\n    var destroyWidget = function ($el) {\n        var dataKey = getDataKey();\n        for (var _i = 0, _a = $el.get(); _i < _a.length; _i++) {\n            var el = _a[_i];\n            var widget = getWidgetData(el, dataKey);\n            if (widget) {\n                widget.destroy();\n            }\n            jQuery.removeData(el, dataKey);\n        }\n    };\n    var callFunction = function ($el, functionName, args) {\n        var result = null;\n        for (var _i = 0, _a = $el.get(); _i < _a.length; _i++) {\n            var el = _a[_i];\n            var widget = jQuery.data(el, getDataKey());\n            if (widget && widget instanceof SimpleWidget) {\n                var simpleWidget = widget;\n                var widgetFunction = simpleWidget[functionName];\n                if (widgetFunction && typeof widgetFunction === \"function\") {\n                    result = widgetFunction.apply(widget, args);\n                }\n            }\n        }\n        return result;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    jQuery.fn[widgetName] = function (argument1) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!argument1) {\n            return createWidget(this, null);\n        }\n        else if (typeof argument1 === \"object\") {\n            var options = argument1;\n            return createWidget(this, options);\n        }\n        else if (typeof argument1 === \"string\" && argument1[0] !== \"_\") {\n            var functionName = argument1;\n            if (functionName === \"destroy\") {\n                return destroyWidget(this);\n            }\n            else if (functionName === \"get_widget_class\") {\n                return widgetClass;\n            }\n            else {\n                return callFunction(this, functionName, args);\n            }\n        }\n    };\n};\nvar SimpleWidget = /** @class */ (function () {\n    function SimpleWidget(el, options) {\n        this.$el = jQuery(el);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        var defaults = this.constructor[\"defaults\"];\n        this.options = __assign(__assign({}, defaults), options);\n    }\n    SimpleWidget.register = function (widgetClass, widgetName) {\n        register(widgetClass, widgetName);\n    };\n    SimpleWidget.prototype.destroy = function () {\n        this.deinit();\n    };\n    SimpleWidget.prototype.init = function () {\n        //\n    };\n    SimpleWidget.prototype.deinit = function () {\n        //\n    };\n    SimpleWidget.defaults = {};\n    return SimpleWidget;\n}());\nexports[\"default\"] = SimpleWidget;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        if (typeof b !== \"function\" && b !== null)\n            throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.JqTreeWidget = void 0;\nvar version_1 = require(\"./version\");\nvar jQueryProxy = require(\"jquery\");\nvar dragAndDropHandler_1 = require(\"./dragAndDropHandler\");\nvar elementsRenderer_1 = require(\"./elementsRenderer\");\nvar dataLoader_1 = require(\"./dataLoader\");\nvar keyHandler_1 = require(\"./keyHandler\");\nvar mouse_widget_1 = require(\"./mouse.widget\");\nvar saveStateHandler_1 = require(\"./saveStateHandler\");\nvar scrollHandler_1 = require(\"./scrollHandler\");\nvar selectNodeHandler_1 = require(\"./selectNodeHandler\");\nvar simple_widget_1 = require(\"./simple.widget\");\nvar node_1 = require(\"./node\");\nvar util_1 = require(\"./util\");\nvar nodeElement_1 = require(\"./nodeElement\");\n// eslint-disable-next-line @typescript-eslint/no-unsafe-assignment, @typescript-eslint/no-unsafe-member-access\nvar jQuery = jQueryProxy[\"default\"] || jQueryProxy;\nvar NODE_PARAM_IS_EMPTY = \"Node parameter is empty\";\nvar PARAM_IS_EMPTY = \"Parameter is empty: \";\nvar JqTreeWidget = /** @class */ (function (_super) {\n    __extends(JqTreeWidget, _super);\n    function JqTreeWidget() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleClick = function (e) {\n            var clickTarget = _this.getClickTarget(e.target);\n            if (clickTarget) {\n                if (clickTarget.type === \"button\") {\n                    _this.toggle(clickTarget.node, _this.options.slide);\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                else if (clickTarget.type === \"label\") {\n                    var node = clickTarget.node;\n                    var event_1 = _this._triggerEvent(\"tree.click\", {\n                        node: node,\n                        click_event: e\n                    });\n                    if (!event_1.isDefaultPrevented()) {\n                        _this.doSelectNode(node);\n                    }\n                }\n            }\n        };\n        _this.handleDblclick = function (e) {\n            var clickTarget = _this.getClickTarget(e.target);\n            if ((clickTarget === null || clickTarget === void 0 ? void 0 : clickTarget.type) === \"label\") {\n                _this._triggerEvent(\"tree.dblclick\", {\n                    node: clickTarget.node,\n                    click_event: e\n                });\n            }\n        };\n        _this.handleContextmenu = function (e) {\n            var $div = jQuery(e.target).closest(\"ul.jqtree-tree .jqtree-element\");\n            if ($div.length) {\n                var node = _this.getNode($div);\n                if (node) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    _this._triggerEvent(\"tree.contextmenu\", {\n                        node: node,\n                        click_event: e\n                    });\n                    return false;\n                }\n            }\n            return null;\n        };\n        return _this;\n    }\n    JqTreeWidget.prototype.toggle = function (node, slideParam) {\n        if (slideParam === void 0) { slideParam = null; }\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        var slide = slideParam !== null && slideParam !== void 0 ? slideParam : this.options.slide;\n        if (node.is_open) {\n            this.closeNode(node, slide);\n        }\n        else {\n            this.openNode(node, slide);\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.getTree = function () {\n        return this.tree;\n    };\n    JqTreeWidget.prototype.selectNode = function (node, optionsParam) {\n        this.doSelectNode(node, optionsParam);\n        return this.element;\n    };\n    JqTreeWidget.prototype.getSelectedNode = function () {\n        return this.selectNodeHandler.getSelectedNode();\n    };\n    JqTreeWidget.prototype.toJson = function () {\n        return JSON.stringify(this.tree.getData());\n    };\n    JqTreeWidget.prototype.loadData = function (data, parentNode) {\n        this.doLoadData(data, parentNode);\n        return this.element;\n    };\n    /*\n    signatures:\n    - loadDataFromUrl(url, parent_node=null, on_finished=null)\n        loadDataFromUrl('/my_data');\n        loadDataFromUrl('/my_data', node1);\n        loadDataFromUrl('/my_data', node1, function() { console.log('finished'); });\n        loadDataFromUrl('/my_data', null, function() { console.log('finished'); });\n\n    - loadDataFromUrl(parent_node=null, on_finished=null)\n        loadDataFromUrl();\n        loadDataFromUrl(node1);\n        loadDataFromUrl(null, function() { console.log('finished'); });\n        loadDataFromUrl(node1, function() { console.log('finished'); });\n    */\n    JqTreeWidget.prototype.loadDataFromUrl = function (param1, param2, param3) {\n        if (typeof param1 === \"string\") {\n            // first parameter is url\n            this.doLoadDataFromUrl(param1, param2, param3 !== null && param3 !== void 0 ? param3 : null);\n        }\n        else {\n            // first parameter is not url\n            this.doLoadDataFromUrl(null, param1, param2);\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.reload = function (onFinished) {\n        this.doLoadDataFromUrl(null, null, onFinished);\n        return this.element;\n    };\n    JqTreeWidget.prototype.refresh = function () {\n        this._refreshElements(null);\n        return this.element;\n    };\n    JqTreeWidget.prototype.getNodeById = function (nodeId) {\n        return this.tree.getNodeById(nodeId);\n    };\n    JqTreeWidget.prototype.getNodeByName = function (name) {\n        return this.tree.getNodeByName(name);\n    };\n    JqTreeWidget.prototype.getNodeByNameMustExist = function (name) {\n        return this.tree.getNodeByNameMustExist(name);\n    };\n    JqTreeWidget.prototype.getNodesByProperty = function (key, value) {\n        return this.tree.getNodesByProperty(key, value);\n    };\n    JqTreeWidget.prototype.getNodeByHtmlElement = function (element) {\n        return this.getNode(jQuery(element));\n    };\n    JqTreeWidget.prototype.getNodeByCallback = function (callback) {\n        return this.tree.getNodeByCallback(callback);\n    };\n    JqTreeWidget.prototype.openNode = function (node, param1, param2) {\n        var _this = this;\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        var parseParams = function () {\n            var _a;\n            var onFinished;\n            var slide;\n            if (util_1.isFunction(param1)) {\n                onFinished = param1;\n                slide = null;\n            }\n            else {\n                slide = param1;\n                onFinished = param2;\n            }\n            if (slide == null) {\n                slide = (_a = _this.options.slide) !== null && _a !== void 0 ? _a : false;\n            }\n            return [slide, onFinished];\n        };\n        var _a = parseParams(), slide = _a[0], onFinished = _a[1];\n        this._openNode(node, slide, onFinished);\n        return this.element;\n    };\n    JqTreeWidget.prototype.closeNode = function (node, slideParam) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        var slide = slideParam !== null && slideParam !== void 0 ? slideParam : this.options.slide;\n        if (node.isFolder() || node.isEmptyFolder) {\n            new nodeElement_1.FolderElement(node, this).close(slide, this.options.animationSpeed);\n            this.saveState();\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.isDragging = function () {\n        return this.dndHandler.isDragging;\n    };\n    JqTreeWidget.prototype.refreshHitAreas = function () {\n        this.dndHandler.refresh();\n        return this.element;\n    };\n    JqTreeWidget.prototype.addNodeAfter = function (newNodeInfo, existingNode) {\n        var newNode = existingNode.addAfter(newNodeInfo);\n        if (newNode) {\n            this._refreshElements(existingNode.parent);\n        }\n        return newNode;\n    };\n    JqTreeWidget.prototype.addNodeBefore = function (newNodeInfo, existingNode) {\n        if (!existingNode) {\n            throw Error(PARAM_IS_EMPTY + \"existingNode\");\n        }\n        var newNode = existingNode.addBefore(newNodeInfo);\n        if (newNode) {\n            this._refreshElements(existingNode.parent);\n        }\n        return newNode;\n    };\n    JqTreeWidget.prototype.addParentNode = function (newNodeInfo, existingNode) {\n        if (!existingNode) {\n            throw Error(PARAM_IS_EMPTY + \"existingNode\");\n        }\n        var newNode = existingNode.addParent(newNodeInfo);\n        if (newNode) {\n            this._refreshElements(newNode.parent);\n        }\n        return newNode;\n    };\n    JqTreeWidget.prototype.removeNode = function (node) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        if (!node.parent) {\n            throw Error(\"Node has no parent\");\n        }\n        this.selectNodeHandler.removeFromSelection(node, true); // including children\n        var parent = node.parent;\n        node.remove();\n        this._refreshElements(parent);\n        return this.element;\n    };\n    JqTreeWidget.prototype.appendNode = function (newNodeInfo, parentNodeParam) {\n        var parentNode = parentNodeParam || this.tree;\n        var node = parentNode.append(newNodeInfo);\n        this._refreshElements(parentNode);\n        return node;\n    };\n    JqTreeWidget.prototype.prependNode = function (newNodeInfo, parentNodeParam) {\n        var parentNode = parentNodeParam !== null && parentNodeParam !== void 0 ? parentNodeParam : this.tree;\n        var node = parentNode.prepend(newNodeInfo);\n        this._refreshElements(parentNode);\n        return node;\n    };\n    JqTreeWidget.prototype.updateNode = function (node, data) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        var idIsChanged = typeof data === \"object\" && data.id && data.id !== node.id;\n        if (idIsChanged) {\n            this.tree.removeNodeFromIndex(node);\n        }\n        node.setData(data);\n        if (idIsChanged) {\n            this.tree.addNodeToIndex(node);\n        }\n        if (typeof data === \"object\" &&\n            data[\"children\"] &&\n            data[\"children\"] instanceof Array) {\n            node.removeChildren();\n            if (data.children.length) {\n                node.loadFromData(data.children);\n            }\n        }\n        var mustSetFocus = this.selectNodeHandler.isFocusOnTree();\n        var mustSelect = this.isSelectedNodeInSubtree(node);\n        this._refreshElements(node);\n        if (mustSelect) {\n            this.selectCurrentNode(mustSetFocus);\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.isSelectedNodeInSubtree = function (subtree) {\n        var selectedNode = this.getSelectedNode();\n        if (!selectedNode) {\n            return false;\n        }\n        else {\n            return subtree === selectedNode || subtree.isParentOf(selectedNode);\n        }\n    };\n    JqTreeWidget.prototype.moveNode = function (node, targetNode, position) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        if (!targetNode) {\n            throw Error(PARAM_IS_EMPTY + \"targetNode\");\n        }\n        var positionIndex = node_1.getPosition(position);\n        if (positionIndex !== undefined) {\n            this.tree.moveNode(node, targetNode, positionIndex);\n            this._refreshElements(null);\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.getStateFromStorage = function () {\n        return this.saveStateHandler.getStateFromStorage();\n    };\n    JqTreeWidget.prototype.addToSelection = function (node, mustSetFocus) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        this.selectNodeHandler.addToSelection(node);\n        this._getNodeElementForNode(node).select(mustSetFocus === undefined ? true : mustSetFocus);\n        this.saveState();\n        return this.element;\n    };\n    JqTreeWidget.prototype.getSelectedNodes = function () {\n        return this.selectNodeHandler.getSelectedNodes();\n    };\n    JqTreeWidget.prototype.isNodeSelected = function (node) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        return this.selectNodeHandler.isNodeSelected(node);\n    };\n    JqTreeWidget.prototype.removeFromSelection = function (node) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        this.selectNodeHandler.removeFromSelection(node);\n        this._getNodeElementForNode(node).deselect();\n        this.saveState();\n        return this.element;\n    };\n    JqTreeWidget.prototype.scrollToNode = function (node) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        var nodeOffset = jQuery(node.element).offset();\n        var nodeTop = nodeOffset ? nodeOffset.top : 0;\n        var treeOffset = this.$el.offset();\n        var treeTop = treeOffset ? treeOffset.top : 0;\n        var top = nodeTop - treeTop;\n        this.scrollHandler.scrollToY(top);\n        return this.element;\n    };\n    JqTreeWidget.prototype.getState = function () {\n        return this.saveStateHandler.getState();\n    };\n    JqTreeWidget.prototype.setState = function (state) {\n        this.saveStateHandler.setInitialState(state);\n        this._refreshElements(null);\n        return this.element;\n    };\n    JqTreeWidget.prototype.setOption = function (option, value) {\n        this.options[option] = value;\n        return this.element;\n    };\n    JqTreeWidget.prototype.moveDown = function () {\n        var selectedNode = this.getSelectedNode();\n        if (selectedNode) {\n            this.keyHandler.moveDown(selectedNode);\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.moveUp = function () {\n        var selectedNode = this.getSelectedNode();\n        if (selectedNode) {\n            this.keyHandler.moveUp(selectedNode);\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.getVersion = function () {\n        return version_1[\"default\"];\n    };\n    JqTreeWidget.prototype._triggerEvent = function (eventName, values) {\n        var event = jQuery.Event(eventName, values);\n        this.element.trigger(event);\n        return event;\n    };\n    JqTreeWidget.prototype._openNode = function (node, slide, onFinished) {\n        var _this = this;\n        if (slide === void 0) { slide = true; }\n        var doOpenNode = function (_node, _slide, _onFinished) {\n            var folderElement = new nodeElement_1.FolderElement(_node, _this);\n            folderElement.open(_onFinished, _slide, _this.options.animationSpeed);\n        };\n        if (node.isFolder() || node.isEmptyFolder) {\n            if (node.load_on_demand) {\n                this.loadFolderOnDemand(node, slide, onFinished);\n            }\n            else {\n                var parent_1 = node.parent;\n                while (parent_1) {\n                    // nb: do not open root element\n                    if (parent_1.parent) {\n                        doOpenNode(parent_1, false, null);\n                    }\n                    parent_1 = parent_1.parent;\n                }\n                doOpenNode(node, slide, onFinished);\n                this.saveState();\n            }\n        }\n    };\n    /*\n    Redraw the tree or part of the tree.\n     from_node: redraw this subtree\n    */\n    JqTreeWidget.prototype._refreshElements = function (fromNode) {\n        this.renderer.render(fromNode);\n        this._triggerEvent(\"tree.refresh\");\n    };\n    JqTreeWidget.prototype._getNodeElementForNode = function (node) {\n        if (node.isFolder()) {\n            return new nodeElement_1.FolderElement(node, this);\n        }\n        else {\n            return new nodeElement_1.NodeElement(node, this);\n        }\n    };\n    JqTreeWidget.prototype._getNodeElement = function ($element) {\n        var node = this.getNode($element);\n        if (node) {\n            return this._getNodeElementForNode(node);\n        }\n        else {\n            return null;\n        }\n    };\n    JqTreeWidget.prototype._containsElement = function (element) {\n        var node = this.getNode(jQuery(element));\n        return node != null && node.tree === this.tree;\n    };\n    JqTreeWidget.prototype._getScrollLeft = function () {\n        return this.scrollHandler.getScrollLeft();\n    };\n    JqTreeWidget.prototype.init = function () {\n        _super.prototype.init.call(this);\n        this.element = this.$el;\n        this.isInitialized = false;\n        this.options.rtl = this.getRtlOption();\n        if (this.options.closedIcon == null) {\n            this.options.closedIcon = this.getDefaultClosedIcon();\n        }\n        this.renderer = new elementsRenderer_1[\"default\"](this);\n        this.dataLoader = new dataLoader_1[\"default\"](this);\n        this.saveStateHandler = new saveStateHandler_1[\"default\"](this);\n        this.selectNodeHandler = new selectNodeHandler_1[\"default\"](this);\n        this.dndHandler = new dragAndDropHandler_1.DragAndDropHandler(this);\n        this.scrollHandler = new scrollHandler_1[\"default\"](this);\n        this.keyHandler = new keyHandler_1[\"default\"](this);\n        this.initData();\n        this.element.on(\"click\", this.handleClick);\n        this.element.on(\"dblclick\", this.handleDblclick);\n        if (this.options.useContextMenu) {\n            this.element.on(\"contextmenu\", this.handleContextmenu);\n        }\n    };\n    JqTreeWidget.prototype.deinit = function () {\n        this.element.empty();\n        this.element.off();\n        this.keyHandler.deinit();\n        this.tree = new node_1.Node({}, true);\n        _super.prototype.deinit.call(this);\n    };\n    JqTreeWidget.prototype.mouseCapture = function (positionInfo) {\n        if (this.options.dragAndDrop) {\n            return this.dndHandler.mouseCapture(positionInfo);\n        }\n        else {\n            return false;\n        }\n    };\n    JqTreeWidget.prototype.mouseStart = function (positionInfo) {\n        if (this.options.dragAndDrop) {\n            return this.dndHandler.mouseStart(positionInfo);\n        }\n        else {\n            return false;\n        }\n    };\n    JqTreeWidget.prototype.mouseDrag = function (positionInfo) {\n        if (this.options.dragAndDrop) {\n            var result = this.dndHandler.mouseDrag(positionInfo);\n            this.scrollHandler.checkScrolling();\n            return result;\n        }\n        else {\n            return false;\n        }\n    };\n    JqTreeWidget.prototype.mouseStop = function (positionInfo) {\n        if (this.options.dragAndDrop) {\n            return this.dndHandler.mouseStop(positionInfo);\n        }\n        else {\n            return false;\n        }\n    };\n    JqTreeWidget.prototype.getMouseDelay = function () {\n        var _a;\n        return (_a = this.options.startDndDelay) !== null && _a !== void 0 ? _a : 0;\n    };\n    JqTreeWidget.prototype.initData = function () {\n        if (this.options.data) {\n            this.doLoadData(this.options.data, null);\n        }\n        else {\n            var dataUrl = this.getDataUrlInfo(null);\n            if (dataUrl) {\n                this.doLoadDataFromUrl(null, null, null);\n            }\n            else {\n                this.doLoadData([], null);\n            }\n        }\n    };\n    JqTreeWidget.prototype.getDataUrlInfo = function (node) {\n        var _this = this;\n        var dataUrl = this.options.dataUrl || this.element.data(\"url\");\n        var getUrlFromString = function (url) {\n            var urlInfo = { url: url };\n            setUrlInfoData(urlInfo);\n            return urlInfo;\n        };\n        var setUrlInfoData = function (urlInfo) {\n            if (node === null || node === void 0 ? void 0 : node.id) {\n                // Load on demand of a subtree; add node parameter\n                var data = { node: node.id };\n                urlInfo[\"data\"] = data;\n            }\n            else {\n                // Add selected_node parameter\n                var selectedNodeId = _this.getNodeIdToBeSelected();\n                if (selectedNodeId) {\n                    var data = { selected_node: selectedNodeId };\n                    urlInfo[\"data\"] = data;\n                }\n            }\n        };\n        if (typeof dataUrl === \"function\") {\n            return dataUrl(node);\n        }\n        else if (typeof dataUrl === \"string\") {\n            return getUrlFromString(dataUrl);\n        }\n        else if (dataUrl && typeof dataUrl === \"object\") {\n            setUrlInfoData(dataUrl);\n            return dataUrl;\n        }\n        else {\n            return null;\n        }\n    };\n    JqTreeWidget.prototype.getNodeIdToBeSelected = function () {\n        if (this.options.saveState) {\n            return this.saveStateHandler.getNodeIdToBeSelected();\n        }\n        else {\n            return null;\n        }\n    };\n    JqTreeWidget.prototype.initTree = function (data) {\n        var _this = this;\n        var doInit = function () {\n            if (!_this.isInitialized) {\n                _this.isInitialized = true;\n                _this._triggerEvent(\"tree.init\");\n            }\n        };\n        if (!this.options.nodeClass) {\n            return;\n        }\n        this.tree = new this.options.nodeClass(null, true, this.options.nodeClass);\n        this.selectNodeHandler.clear();\n        this.tree.loadFromData(data);\n        var mustLoadOnDemand = this.setInitialState();\n        this._refreshElements(null);\n        if (!mustLoadOnDemand) {\n            doInit();\n        }\n        else {\n            // Load data on demand and then init the tree\n            this.setInitialStateOnDemand(doInit);\n        }\n    };\n    // Set initial state, either by restoring the state or auto-opening nodes\n    // result: must load nodes on demand?\n    JqTreeWidget.prototype.setInitialState = function () {\n        var _this = this;\n        var restoreState = function () {\n            // result: is state restored, must load on demand?\n            if (!_this.options.saveState) {\n                return [false, false];\n            }\n            else {\n                var state = _this.saveStateHandler.getStateFromStorage();\n                if (!state) {\n                    return [false, false];\n                }\n                else {\n                    var mustLoadOnDemand_1 = _this.saveStateHandler.setInitialState(state);\n                    // return true: the state is restored\n                    return [true, mustLoadOnDemand_1];\n                }\n            }\n        };\n        var autoOpenNodes = function () {\n            // result: must load on demand?\n            if (_this.options.autoOpen === false) {\n                return false;\n            }\n            var maxLevel = _this.getAutoOpenMaxLevel();\n            var mustLoadOnDemand = false;\n            _this.tree.iterate(function (node, level) {\n                if (node.load_on_demand) {\n                    mustLoadOnDemand = true;\n                    return false;\n                }\n                else if (!node.hasChildren()) {\n                    return false;\n                }\n                else {\n                    node.is_open = true;\n                    return level !== maxLevel;\n                }\n            });\n            return mustLoadOnDemand;\n        };\n        var _a = restoreState(), isRestored = _a[0], mustLoadOnDemand = _a[1]; // eslint-disable-line prefer-const\n        if (!isRestored) {\n            mustLoadOnDemand = autoOpenNodes();\n        }\n        return mustLoadOnDemand;\n    };\n    // Set the initial state for nodes that are loaded on demand\n    // Call cb_finished when done\n    JqTreeWidget.prototype.setInitialStateOnDemand = function (cbFinished) {\n        var _this = this;\n        var restoreState = function () {\n            if (!_this.options.saveState) {\n                return false;\n            }\n            else {\n                var state = _this.saveStateHandler.getStateFromStorage();\n                if (!state) {\n                    return false;\n                }\n                else {\n                    _this.saveStateHandler.setInitialStateOnDemand(state, cbFinished);\n                    return true;\n                }\n            }\n        };\n        var autoOpenNodes = function () {\n            var maxLevel = _this.getAutoOpenMaxLevel();\n            var loadingCount = 0;\n            var loadAndOpenNode = function (node) {\n                loadingCount += 1;\n                _this._openNode(node, false, function () {\n                    loadingCount -= 1;\n                    openNodes();\n                });\n            };\n            var openNodes = function () {\n                _this.tree.iterate(function (node, level) {\n                    if (node.load_on_demand) {\n                        if (!node.is_loading) {\n                            loadAndOpenNode(node);\n                        }\n                        return false;\n                    }\n                    else {\n                        _this._openNode(node, false, null);\n                        return level !== maxLevel;\n                    }\n                });\n                if (loadingCount === 0) {\n                    cbFinished();\n                }\n            };\n            openNodes();\n        };\n        if (!restoreState()) {\n            autoOpenNodes();\n        }\n    };\n    JqTreeWidget.prototype.getAutoOpenMaxLevel = function () {\n        if (this.options.autoOpen === true) {\n            return -1;\n        }\n        else if (typeof this.options.autoOpen === \"number\") {\n            return this.options.autoOpen;\n        }\n        else if (typeof this.options.autoOpen === \"string\") {\n            return parseInt(this.options.autoOpen, 10);\n        }\n        else {\n            return 0;\n        }\n    };\n    JqTreeWidget.prototype.getClickTarget = function (element) {\n        var $target = jQuery(element);\n        var $button = $target.closest(\".jqtree-toggler\");\n        if ($button.length) {\n            var node = this.getNode($button);\n            if (node) {\n                return {\n                    type: \"button\",\n                    node: node\n                };\n            }\n        }\n        else {\n            var $el = $target.closest(\".jqtree-element\");\n            if ($el.length) {\n                var node = this.getNode($el);\n                if (node) {\n                    return {\n                        type: \"label\",\n                        node: node\n                    };\n                }\n            }\n        }\n        return null;\n    };\n    JqTreeWidget.prototype.getNode = function ($element) {\n        var $li = $element.closest(\"li.jqtree_common\");\n        if ($li.length === 0) {\n            return null;\n        }\n        else {\n            return $li.data(\"node\");\n        }\n    };\n    JqTreeWidget.prototype.saveState = function () {\n        if (this.options.saveState) {\n            this.saveStateHandler.saveState();\n        }\n    };\n    JqTreeWidget.prototype.selectCurrentNode = function (mustSetFocus) {\n        var node = this.getSelectedNode();\n        if (node) {\n            var nodeElement = this._getNodeElementForNode(node);\n            if (nodeElement) {\n                nodeElement.select(mustSetFocus);\n            }\n        }\n    };\n    JqTreeWidget.prototype.deselectCurrentNode = function () {\n        var node = this.getSelectedNode();\n        if (node) {\n            this.removeFromSelection(node);\n        }\n    };\n    JqTreeWidget.prototype.getDefaultClosedIcon = function () {\n        if (this.options.rtl) {\n            // triangle to the left\n            return \"&#x25c0;\";\n        }\n        else {\n            // triangle to the right\n            return \"&#x25ba;\";\n        }\n    };\n    JqTreeWidget.prototype.getRtlOption = function () {\n        if (this.options.rtl != null) {\n            return this.options.rtl;\n        }\n        else {\n            var dataRtl = this.element.data(\"rtl\");\n            if (dataRtl !== null &&\n                dataRtl !== false &&\n                dataRtl !== undefined) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n    };\n    JqTreeWidget.prototype.doSelectNode = function (node, optionsParam) {\n        var _this = this;\n        var saveState = function () {\n            if (_this.options.saveState) {\n                _this.saveStateHandler.saveState();\n            }\n        };\n        if (!node) {\n            // Called with empty node -> deselect current node\n            this.deselectCurrentNode();\n            saveState();\n            return;\n        }\n        var defaultOptions = { mustSetFocus: true, mustToggle: true };\n        var selectOptions = __assign(__assign({}, defaultOptions), (optionsParam || {}));\n        var canSelect = function () {\n            if (_this.options.onCanSelectNode) {\n                return (_this.options.selectable === true &&\n                    _this.options.onCanSelectNode(node));\n            }\n            else {\n                return _this.options.selectable === true;\n            }\n        };\n        var openParents = function () {\n            var parent = node.parent;\n            if (parent && parent.parent && !parent.is_open) {\n                _this.openNode(parent, false);\n            }\n        };\n        if (!canSelect()) {\n            return;\n        }\n        if (this.selectNodeHandler.isNodeSelected(node)) {\n            if (selectOptions.mustToggle) {\n                this.deselectCurrentNode();\n                this._triggerEvent(\"tree.select\", {\n                    node: null,\n                    previous_node: node\n                });\n            }\n        }\n        else {\n            var deselectedNode = this.getSelectedNode() || null;\n            this.deselectCurrentNode();\n            this.addToSelection(node, selectOptions.mustSetFocus);\n            this._triggerEvent(\"tree.select\", {\n                node: node,\n                deselected_node: deselectedNode\n            });\n            openParents();\n        }\n        saveState();\n    };\n    JqTreeWidget.prototype.doLoadData = function (data, parentNode) {\n        if (!data) {\n            return;\n        }\n        else {\n            this._triggerEvent(\"tree.load_data\", { tree_data: data });\n            if (parentNode) {\n                this.deselectNodes(parentNode);\n                this.loadSubtree(data, parentNode);\n            }\n            else {\n                this.initTree(data);\n            }\n            if (this.isDragging()) {\n                this.dndHandler.refresh();\n            }\n        }\n    };\n    JqTreeWidget.prototype.deselectNodes = function (parentNode) {\n        var selectedNodesUnderParent = this.selectNodeHandler.getSelectedNodesUnder(parentNode);\n        for (var _i = 0, selectedNodesUnderParent_1 = selectedNodesUnderParent; _i < selectedNodesUnderParent_1.length; _i++) {\n            var n = selectedNodesUnderParent_1[_i];\n            this.selectNodeHandler.removeFromSelection(n);\n        }\n    };\n    JqTreeWidget.prototype.loadSubtree = function (data, parentNode) {\n        parentNode.loadFromData(data);\n        parentNode.load_on_demand = false;\n        parentNode.is_loading = false;\n        this._refreshElements(parentNode);\n    };\n    JqTreeWidget.prototype.doLoadDataFromUrl = function (urlInfoParam, parentNode, onFinished) {\n        var urlInfo = urlInfoParam || this.getDataUrlInfo(parentNode);\n        this.dataLoader.loadFromUrl(urlInfo, parentNode, onFinished);\n    };\n    JqTreeWidget.prototype.loadFolderOnDemand = function (node, slide, onFinished) {\n        var _this = this;\n        if (slide === void 0) { slide = true; }\n        node.is_loading = true;\n        this.doLoadDataFromUrl(null, node, function () {\n            _this._openNode(node, slide, onFinished);\n        });\n    };\n    JqTreeWidget.defaults = {\n        animationSpeed: \"fast\",\n        autoEscape: true,\n        autoOpen: false,\n        buttonLeft: true,\n        // The symbol to use for a closed node -  BLACK RIGHT-POINTING POINTER\n        // http://www.fileformat.info/info/unicode/char/25ba/index.htm\n        closedIcon: undefined,\n        data: undefined,\n        dataFilter: undefined,\n        dataUrl: undefined,\n        dragAndDrop: false,\n        keyboardSupport: true,\n        nodeClass: node_1.Node,\n        onCanMove: undefined,\n        onCanMoveTo: undefined,\n        onCanSelectNode: undefined,\n        onCreateLi: undefined,\n        onDragMove: undefined,\n        onDragStop: undefined,\n        onGetStateFromStorage: undefined,\n        onIsMoveHandle: undefined,\n        onLoadFailed: undefined,\n        onLoading: undefined,\n        onSetStateFromStorage: undefined,\n        openedIcon: \"&#x25bc;\",\n        openFolderDelay: 500,\n        // The symbol to use for an open node -  BLACK DOWN-POINTING TRIANGLE\n        // http://www.fileformat.info/info/unicode/char/25bc/index.htm\n        rtl: undefined,\n        saveState: false,\n        selectable: true,\n        showEmptyFolder: false,\n        slide: true,\n        startDndDelay: 300,\n        tabIndex: 0,\n        useContextMenu: true\n    };\n    return JqTreeWidget;\n}(mouse_widget_1[\"default\"]));\nexports.JqTreeWidget = JqTreeWidget;\nsimple_widget_1[\"default\"].register(JqTreeWidget, \"tree\");\n","\"use strict\";\nexports.__esModule = true;\nexports.getBoolString = exports.isFunction = exports.isInt = void 0;\nvar isInt = function (n) {\n    return typeof n === \"number\" && n % 1 === 0;\n};\nexports.isInt = isInt;\nvar isFunction = function (v) { return typeof v === \"function\"; };\nexports.isFunction = isFunction;\nvar getBoolString = function (value) {\n    return value ? \"true\" : \"false\";\n};\nexports.getBoolString = getBoolString;\n","\"use strict\";\nexports.__esModule = true;\nvar version = \"1.6.1\";\nexports[\"default\"] = version;\n","module.exports = jQuery;","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar defaults = {\r\n    lines: 12,\r\n    length: 7,\r\n    width: 5,\r\n    radius: 10,\r\n    scale: 1.0,\r\n    corners: 1,\r\n    color: '#000',\r\n    fadeColor: 'transparent',\r\n    animation: 'spinner-line-fade-default',\r\n    rotate: 0,\r\n    direction: 1,\r\n    speed: 1,\r\n    zIndex: 2e9,\r\n    className: 'spinner',\r\n    top: '50%',\r\n    left: '50%',\r\n    shadow: '0 0 1px transparent',\r\n    position: 'absolute',\r\n};\r\nvar Spinner = /** @class */ (function () {\r\n    function Spinner(opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        this.opts = __assign(__assign({}, defaults), opts);\r\n    }\r\n    /**\r\n     * Adds the spinner to the given target element. If this instance is already\r\n     * spinning, it is automatically removed from its previous target by calling\r\n     * stop() internally.\r\n     */\r\n    Spinner.prototype.spin = function (target) {\r\n        this.stop();\r\n        this.el = document.createElement('div');\r\n        this.el.className = this.opts.className;\r\n        this.el.setAttribute('role', 'progressbar');\r\n        css(this.el, {\r\n            position: this.opts.position,\r\n            width: 0,\r\n            zIndex: this.opts.zIndex,\r\n            left: this.opts.left,\r\n            top: this.opts.top,\r\n            transform: \"scale(\" + this.opts.scale + \")\",\r\n        });\r\n        if (target) {\r\n            target.insertBefore(this.el, target.firstChild || null);\r\n        }\r\n        drawLines(this.el, this.opts);\r\n        return this;\r\n    };\r\n    /**\r\n     * Stops and removes the Spinner.\r\n     * Stopped spinners may be reused by calling spin() again.\r\n     */\r\n    Spinner.prototype.stop = function () {\r\n        if (this.el) {\r\n            if (typeof requestAnimationFrame !== 'undefined') {\r\n                cancelAnimationFrame(this.animateId);\r\n            }\r\n            else {\r\n                clearTimeout(this.animateId);\r\n            }\r\n            if (this.el.parentNode) {\r\n                this.el.parentNode.removeChild(this.el);\r\n            }\r\n            this.el = undefined;\r\n        }\r\n        return this;\r\n    };\r\n    return Spinner;\r\n}());\r\nexport { Spinner };\r\n/**\r\n * Sets multiple style properties at once.\r\n */\r\nfunction css(el, props) {\r\n    for (var prop in props) {\r\n        el.style[prop] = props[prop];\r\n    }\r\n    return el;\r\n}\r\n/**\r\n * Returns the line color from the given string or array.\r\n */\r\nfunction getColor(color, idx) {\r\n    return typeof color == 'string' ? color : color[idx % color.length];\r\n}\r\n/**\r\n * Internal method that draws the individual lines.\r\n */\r\nfunction drawLines(el, opts) {\r\n    var borderRadius = (Math.round(opts.corners * opts.width * 500) / 1000) + 'px';\r\n    var shadow = 'none';\r\n    if (opts.shadow === true) {\r\n        shadow = '0 2px 4px #000'; // default shadow\r\n    }\r\n    else if (typeof opts.shadow === 'string') {\r\n        shadow = opts.shadow;\r\n    }\r\n    var shadows = parseBoxShadow(shadow);\r\n    for (var i = 0; i < opts.lines; i++) {\r\n        var degrees = ~~(360 / opts.lines * i + opts.rotate);\r\n        var backgroundLine = css(document.createElement('div'), {\r\n            position: 'absolute',\r\n            top: -opts.width / 2 + \"px\",\r\n            width: (opts.length + opts.width) + 'px',\r\n            height: opts.width + 'px',\r\n            background: getColor(opts.fadeColor, i),\r\n            borderRadius: borderRadius,\r\n            transformOrigin: 'left',\r\n            transform: \"rotate(\" + degrees + \"deg) translateX(\" + opts.radius + \"px)\",\r\n        });\r\n        var delay = i * opts.direction / opts.lines / opts.speed;\r\n        delay -= 1 / opts.speed; // so initial animation state will include trail\r\n        var line = css(document.createElement('div'), {\r\n            width: '100%',\r\n            height: '100%',\r\n            background: getColor(opts.color, i),\r\n            borderRadius: borderRadius,\r\n            boxShadow: normalizeShadow(shadows, degrees),\r\n            animation: 1 / opts.speed + \"s linear \" + delay + \"s infinite \" + opts.animation,\r\n        });\r\n        backgroundLine.appendChild(line);\r\n        el.appendChild(backgroundLine);\r\n    }\r\n}\r\nfunction parseBoxShadow(boxShadow) {\r\n    var regex = /^\\s*([a-zA-Z]+\\s+)?(-?\\d+(\\.\\d+)?)([a-zA-Z]*)\\s+(-?\\d+(\\.\\d+)?)([a-zA-Z]*)(.*)$/;\r\n    var shadows = [];\r\n    for (var _i = 0, _a = boxShadow.split(','); _i < _a.length; _i++) {\r\n        var shadow = _a[_i];\r\n        var matches = shadow.match(regex);\r\n        if (matches === null) {\r\n            continue; // invalid syntax\r\n        }\r\n        var x = +matches[2];\r\n        var y = +matches[5];\r\n        var xUnits = matches[4];\r\n        var yUnits = matches[7];\r\n        if (x === 0 && !xUnits) {\r\n            xUnits = yUnits;\r\n        }\r\n        if (y === 0 && !yUnits) {\r\n            yUnits = xUnits;\r\n        }\r\n        if (xUnits !== yUnits) {\r\n            continue; // units must match to use as coordinates\r\n        }\r\n        shadows.push({\r\n            prefix: matches[1] || '',\r\n            x: x,\r\n            y: y,\r\n            xUnits: xUnits,\r\n            yUnits: yUnits,\r\n            end: matches[8],\r\n        });\r\n    }\r\n    return shadows;\r\n}\r\n/**\r\n * Modify box-shadow x/y offsets to counteract rotation\r\n */\r\nfunction normalizeShadow(shadows, degrees) {\r\n    var normalized = [];\r\n    for (var _i = 0, shadows_1 = shadows; _i < shadows_1.length; _i++) {\r\n        var shadow = shadows_1[_i];\r\n        var xy = convertOffset(shadow.x, shadow.y, degrees);\r\n        normalized.push(shadow.prefix + xy[0] + shadow.xUnits + ' ' + xy[1] + shadow.yUnits + shadow.end);\r\n    }\r\n    return normalized.join(', ');\r\n}\r\nfunction convertOffset(x, y, degrees) {\r\n    var radians = degrees * Math.PI / 180;\r\n    var sin = Math.sin(radians);\r\n    var cos = Math.cos(radians);\r\n    return [\r\n        Math.round((x * cos + y * sin) * 1000) / 1000,\r\n        Math.round((-x * sin + y * cos) * 1000) / 1000,\r\n    ];\r\n}\r\n","import \"jqtree\";\nimport { Spinner } from \"spin.js\";\nimport * as cookie from \"cookie\";\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\ninterface JQTreeMoveEvent extends JQuery.Event {\n    move_info: {\n        moved_node: INode;\n        position: string;\n        target_node: INode;\n        do_move: () => void;\n    };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\ninterface JQTreeSelectEvent extends JQuery.Event {\n    deselected_node: INode | null;\n    node: INode;\n}\n\ninterface Parameters {\n    animationSpeed: number | string | null;\n    autoOpen: boolean | number;\n    autoEscape: boolean;\n    csrfCookieName: string;\n    dragAndDrop: boolean;\n    mouseDelay: number | null;\n    rtl: boolean;\n}\n\nfunction initTree(\n    $tree: JQuery,\n    {\n        animationSpeed,\n        autoOpen,\n        autoEscape,\n        csrfCookieName,\n        dragAndDrop,\n        mouseDelay,\n        rtl,\n    }: Parameters\n) {\n    let errorNode: INode | null = null;\n    const baseUrl = \"http://example.com\";\n    const insertAtUrl = new URL($tree.data(\"insert_at_url\") as string, baseUrl);\n\n    function createLi(node: INode, $li: JQuery, isSelected: boolean) {\n        // Create edit link\n        const $title = $li.find(\".jqtree-title\");\n\n        insertAtUrl.searchParams.set(\n            \"insert_at\",\n            `${node.id as string | number}`\n        );\n\n        const insertUrlString = insertAtUrl\n            .toString()\n            .substring(baseUrl.length);\n\n        const tabindex = isSelected ? \"0\" : \"-1\";\n\n        $title.after(\n            `<a href=\"${\n                node.url as string\n            }\" class=\"edit\" tabindex=\"${tabindex}\">(${gettext(\"edit\")})</a>`,\n            `<a href=\"${insertUrlString}\" class=\"edit\" tabindex=\"${tabindex}\">(${gettext(\n                \"add\"\n            )})</a>`\n        );\n    }\n\n    function getCsrfToken() {\n        function getFromMiddleware() {\n            return (\n                document.querySelector(\n                    '[name=\"csrfmiddlewaretoken\"]'\n                ) as HTMLInputElement\n            ).value;\n        }\n\n        function getFromCookie() {\n            if (!csrfCookieName) {\n                return null;\n            } else {\n                return cookie.parse(document.cookie)[csrfCookieName];\n            }\n        }\n\n        return getFromCookie() || getFromMiddleware();\n    }\n\n    function handleMove(eventParam: JQuery.Event) {\n        const e = eventParam as JQTreeMoveEvent;\n        const info = e.move_info;\n        const data = {\n            target_id: info.target_node.id,\n            position: info.position,\n        };\n        const $el = jQuery(info.moved_node.element);\n\n        handleLoading(true, null, $el);\n\n        removeErrorMessage();\n\n        e.preventDefault();\n\n        void jQuery.ajax({\n            type: \"POST\",\n            url: info.moved_node.move_url as string,\n            data,\n            beforeSend: (xhr) => {\n                // Set Django csrf token\n                xhr.setRequestHeader(\"X-CSRFToken\", getCsrfToken());\n            },\n            success: () => {\n                info.do_move();\n                handleLoading(false, null, $el);\n            },\n            error: () => {\n                handleLoading(false, null, $el);\n                const $node = $el.find(\".jqtree-element\");\n                $node.append(\n                    `<span class=\"mptt-admin-error\">${gettext(\n                        \"move failed\"\n                    )}</span>`\n                );\n\n                errorNode = info.moved_node;\n            },\n        });\n\n        function removeErrorMessage() {\n            if (errorNode) {\n                jQuery(errorNode.element).find(\".mptt-admin-error\").remove();\n                errorNode = null;\n            }\n        }\n    }\n\n    function handleLoadFailed() {\n        $tree.html(gettext(\"Error while loading the data from the server\"));\n    }\n\n    const spinners: Record<number | string, Spinner | null> = {};\n\n    function handleLoading(\n        isLoading: boolean,\n        node: INode | null,\n        $el: JQuery\n    ) {\n        function getNodeId(): string | number {\n            if (!node) {\n                return \"__root__\";\n            } else {\n                return node.id as string | number;\n            }\n        }\n\n        function getContainer() {\n            if (node) {\n                return $el.find(\".jqtree-element\")[0];\n            } else {\n                return $el[0];\n            }\n        }\n\n        const nodeId = getNodeId();\n\n        if (isLoading) {\n            spinners[nodeId] = new Spinner().spin(getContainer());\n        } else {\n            const spinner = spinners[nodeId];\n\n            if (spinner) {\n                spinner.stop();\n                spinners[nodeId] = null;\n            }\n        }\n    }\n\n    function handleSelect(eventParam: JQuery.Event) {\n        const e = eventParam as JQTreeSelectEvent;\n        const { node, deselected_node } = e;\n\n        if (deselected_node) {\n            // deselected node: remove tabindex\n            jQuery(deselected_node.element).find(\".edit\").attr(\"tabindex\", -1);\n        }\n\n        if (node) {\n            // selected: add tabindex\n            jQuery(node.element).find(\".edit\").attr(\"tabindex\", 0);\n        }\n    }\n\n    const treeOptions: Record<string, unknown> = {\n        autoOpen,\n        autoEscape,\n        buttonLeft: rtl,\n        closedIcon: rtl ? \"&#x25c0;\" : \"&#x25ba;\",\n        dragAndDrop,\n        onCreateLi: createLi,\n        onLoadFailed: handleLoadFailed,\n        onLoading: handleLoading,\n        saveState: $tree.data(\"save_state\") as boolean,\n        useContextMenu: Boolean($tree.data(\"use_context_menu\")),\n    };\n\n    if (animationSpeed !== null) {\n        treeOptions[\"animationSpeed\"] = animationSpeed;\n    }\n\n    if (mouseDelay != null) {\n        treeOptions[\"startDndDelay\"] = mouseDelay;\n    }\n\n    $tree.tree(treeOptions);\n\n    $tree.on(\"tree.move\", handleMove);\n    $tree.on(\"tree.select\", handleSelect);\n}\n\njQuery(() => {\n    const $tree = jQuery(\"#tree\");\n\n    if ($tree.length) {\n        const animationSpeed = $tree.data(\"tree-animation-speed\") as\n            | number\n            | string\n            | null;\n        const autoOpen = $tree.data(\"auto_open\") as boolean | number;\n        const autoEscape = Boolean($tree.data(\"autoescape\"));\n        const mouseDelay = $tree.data(\"tree-mouse-delay\") as number | null;\n        const dragAndDrop = $tree.data(\"drag-and-drop\") as boolean;\n        const rtl = $tree.data(\"rtl\") === \"1\";\n        const csrfCookieName = $tree.data(\"csrf-cookie-name\") as string;\n\n        initTree($tree, {\n            animationSpeed,\n            autoOpen,\n            autoEscape,\n            csrfCookieName,\n            dragAndDrop,\n            mouseDelay,\n            rtl,\n        });\n    }\n});\n"],"names":["exports","str","options","TypeError","obj","opt","pairs","split","pairSplitRegExp","dec","decode","i","length","pair","eq_idx","indexOf","key","substr","trim","val","slice","undefined","tryDecode","decodeURIComponent","encodeURIComponent","e","__assign","this","Object","assign","t","s","n","arguments","p","prototype","hasOwnProperty","call","apply","__esModule","DataLoader","treeWidget","loadFromUrl","urlInfo","parentNode","onFinished","_this","$el","getDomElement","addLoadingClass","notifyLoading","stopLoading","removeLoadingClass","submitRequest","data","loadData","parseData","jqXHR","onLoadFailed","addClass","removeClass","jQuery","element","isLoading","node","onLoading","_triggerEvent","urlInfoInput","handleSuccess","handleError","_a","ajaxSettings","method","cache","dataType","success","error","url","toUpperCase","ajax","dataFilter","parsedData","JSON","parse","extendStatics","__extends","d","b","setPrototypeOf","__proto__","Array","String","__","constructor","create","HitAreasGenerator","DragAndDropHandler","jQueryProxy","node_1","hoveredArea","hitAreas","isDragging","currentItem","positionInfo","mouseCapture","$element","target","mustCaptureElement","onIsMoveHandle","nodeElement","_getNodeElement","onCanMove","mouseStart","pageX","pageY","refresh","offset","left","top","dragElement","DragElement","name","autoEscape","mouseDrag","move","area","findHoveredArea","canMoveToArea","isFolder","stopOpenFolderTimer","mustOpenFolderTimer","startOpenFolderTimer","updateDropHint","removeDropHint","onDragMove","originalEvent","mouseStop","moveItem","clear","removeHover","removeHitAreas","onDragStop","generateHitAreas","_getNodeElementForNode","hitAreasGenerator","tree","getTreeDimensions","bottom","generate","is","onCanMoveTo","positionName","getPositionName","position","remove","previousGhost","x","y","dimensions","right","low","high","mid","is_open","Position","Inside","addDropHint","folder","openFolderTimer","window","setTimeout","_openNode","slide","openFolderDelay","clearTimeout","None","movedNode_1","targetNode_1","position_1","previousParent","parent","doMove","moveNode","empty","_refreshElements","move_info","moved_node","target_node","previous_parent","do_move","original_event","isDefaultPrevented","el","width","height","_getScrollLeft","_super","currentNode","treeBottom","positions","lastTop","iterate","previousTop","group","_i","positions_1","generateHitAreasForGroup","push","handleOpenFolder","children","addPosition","getTop","handleClosedFolder","nextNode","After","handleFirstNode","Before","handleAfterOpenFolder","handleNode","positionsInGroup","positionCount","Math","min","areaHeight","round","areaTop","VisibleNodeIterator","isFirstNode","_iterateNode","mustIterateInside","hasChildren","childrenLength_1","forEach","_","nodeName","offsetX","offsetY","$tree","text","html","css","append","util_1","ElementsRenderer","openedIconElement","createButtonElement","openedIcon","closedIconElement","closedIcon","render","fromNode","renderFromNode","renderFromRoot","createDomElements","$previousLi","li","createLi","getLevel","attachNodeData","after","isRootNode","level","ul","createUl","appendChild","children_1","child","classString","role","rtl","dragAndDrop","document","createElement","className","setAttribute","isSelected","Boolean","selectNodeHandler","isNodeSelected","isEmptyFolder","showEmptyFolder","createFolderLi","createNodeLi","onCreateLi","buttonClasses","getButtonClasses","folderClasses","getFolderClasses","iconElement","div","buttonLink","cloneNode","buttonLeft","createTitleSpan","liClasses","join","isOpen","titleSpan","classes","getBoolString","tabIndex","textContent","innerHTML","is_loading","value","createTextNode","KeyHandler","handleKeyDown","canHandleKeyboard","selectedNode","getSelectedNode","which","DOWN","moveDown","UP","moveUp","RIGHT","moveRight","LEFT","moveLeft","keyboardSupport","on","deinit","off","selectNode","getNextNode","getPreviousNode","openNode","closeNode","getParent","scrollHandler","isScrolledIntoView","find","scrollToNode","isFocusOnTree","simple_widget_1","getPositionInfoFromMouseEvent","getPositionInfoFromTouch","touch","MouseWidget","mouseDown","button","handleMouseDown","cancelable","preventDefault","mouseMove","handleMouseMove","mouseUp","handleMouseUp","touchStart","touches","changedTouches","touchMove","touchEnd","init","get","addEventListener","passive","isMouseStarted","mouseDelayTimer","isMouseDelayMet","mouseDownInfo","removeEventListener","removeMouseMoveEventListeners","handleStartMouse","mouseDelay","getMouseDelay","startMouseDelayTimer","Node","getPosition","positionNames","before","inside","none","name_1","o","isRoot","nodeClass","load_on_demand","setData","idMapping","Map","loadFromData","removeChildren","data_1","createNode","addChild","setParent","addChildAtPosition","index","splice","removeChild","doRemoveChild","getChildIndex","callback","_iterate","movedNode","targetNode","isParentOf","getData","includeParent","getDataFromNodes","nodes","map","tmpNode","k","v","getNodeByName","getNodeByCallback","getNodeByNameMustExist","result","addAfter","nodeInfo","childIndex","addBefore","addParent","newParent","originalParent","prepend","getNodeById","nodeId","addNodeToIndex","id","set","removeNodeFromIndex","getPreviousSibling","previousIndex","getNextSibling","nextIndex","getNodesByProperty","filter","f","includeChildren","previousSibling","getLastChild","lastChild","initFromData","nodeData","childrenData","childrenData_1","addChildren","getNodeClass","BorderDropHint","FolderElement","NodeElement","mustShowBorderDropHint","GhostDropHint","select","mustSetFocus","$li","getLi","attr","$span","getSpan","trigger","deselect","removeAttr","blur","getUl","open","animationSpeed","$button","getButton","buttonEl","icon","renderer","doOpen","slideDown","show","close","doClose","slideUp","hide","scrollLeft","$div","elWidth","max","elHeight","outerHeight","$hint","$ghost","moveAfter","moveBefore","moveInsideOpenFolder","moveInside","SaveStateHandler","saveState","state","stringify","getState","onSetStateFromStorage","supportsLocalStorage","localStorage","setItem","getKeyName","getStateFromStorage","jsonData","loadFromStorage","parseState","selectedNodeIds","openNodes","open_nodes","selected_node","getSelectedNodes","setInitialState","mustLoadOnDemand","openInitialNodes","resetSelection","selectInitialNodes","setInitialStateOnDemand","cbFinished","doSetInitialStateOnDemand","getNodeIdToBeSelected","isInt","onGetStateFromStorage","getItem","nodeIds","nodeIds_1","nodeDd","selectCount","nodeIds_2","addToSelection","removeFromSelection","nodeIdsParam","selectedNodes","loadingCount","newNodesIds","nodeIds_3","loadAndOpenNode","_supportsLocalStorage","sessionStorage","removeItem","testSupport","ScrollHandler","isInitialized","checkScrolling","ensureInit","checkVerticalScrolling","checkHorizontalScrolling","scrollToY","$scrollParent","scrollTop","treeTop","elementBottom","viewBottom","elementTop","viewTop","scrollParentTop","getScrollLeft","initScrollParent","setDocumentAsScrollParent","cssAttributes","hasOverFlow","cssAttributes_1","overflowValue","parents","getParentWithOverflow","tagName","handleVerticalScrollingWithScrollParent","scrollParent","offsetHeight","refreshHitAreas","handleVerticalScrollingWithDocument","dndHandler","handleHorizontalScrollingWithParent","handleHorizontalScrollingWithDocument","scrollParentOffset","canScrollRight","clientWidth","scrollWidth","canScrollLeft","rightEdge","leftEdge","isNearRightEdge","isNearLeftEdge","$document","windowWidth","SelectNodeHandler","Set","selectedSingleNode","selectedNodes_1","getSelectedNodesUnder","has","add","activeElement","_containsElement","register","widgetClass","widgetName","getDataKey","getWidgetData","dataKey","widget","SimpleWidget","createWidget","destroyWidget","destroy","removeData","callFunction","functionName","args","widgetFunction","fn","argument1","defaults","JqTreeWidget","version_1","dragAndDropHandler_1","elementsRenderer_1","dataLoader_1","keyHandler_1","mouse_widget_1","saveStateHandler_1","scrollHandler_1","selectNodeHandler_1","nodeElement_1","NODE_PARAM_IS_EMPTY","PARAM_IS_EMPTY","handleClick","clickTarget","getClickTarget","type","toggle","stopPropagation","click_event","doSelectNode","handleDblclick","handleContextmenu","closest","getNode","slideParam","Error","getTree","optionsParam","toJson","doLoadData","loadDataFromUrl","param1","param2","param3","doLoadDataFromUrl","reload","getNodeByHtmlElement","isFunction","parseParams","addNodeAfter","newNodeInfo","existingNode","newNode","addNodeBefore","addParentNode","removeNode","appendNode","parentNodeParam","prependNode","updateNode","idIsChanged","mustSelect","isSelectedNodeInSubtree","selectCurrentNode","subtree","positionIndex","saveStateHandler","nodeOffset","nodeTop","treeOffset","setState","setOption","option","keyHandler","getVersion","eventName","values","event","Event","doOpenNode","_node","_slide","_onFinished","loadFolderOnDemand","parent_1","getRtlOption","getDefaultClosedIcon","dataLoader","initData","useContextMenu","startDndDelay","getDataUrlInfo","dataUrl","setUrlInfoData","selectedNodeId","initTree","doInit","restoreState","isRestored","autoOpen","maxLevel","getAutoOpenMaxLevel","autoOpenNodes","parseInt","$target","deselectCurrentNode","dataRtl","selectOptions","mustToggle","onCanSelectNode","selectable","previous_node","deselectedNode","deselected_node","tree_data","deselectNodes","loadSubtree","selectedNodesUnderParent_1","urlInfoParam","module","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","lines","radius","scale","corners","color","fadeColor","animation","rotate","direction","speed","zIndex","shadow","Spinner","opts","spin","stop","transform","insertBefore","firstChild","borderRadius","shadows","boxShadow","regex","matches","match","xUnits","yUnits","prefix","end","parseBoxShadow","degrees","backgroundLine","background","getColor","transformOrigin","delay","line","normalizeShadow","drawLines","requestAnimationFrame","cancelAnimationFrame","animateId","props","prop","style","idx","normalized","shadows_1","xy","convertOffset","radians","PI","sin","cos","csrfCookieName","errorNode","baseUrl","insertAtUrl","URL","spinners","handleLoading","spinner","treeOptions","$title","searchParams","insertUrlString","toString","substring","tabindex","gettext","eventParam","info","target_id","move_url","beforeSend","xhr","setRequestHeader","cookie","querySelector"],"sourceRoot":""}