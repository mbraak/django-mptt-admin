{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./node_modules/jqtree/lib/node.js","webpack:///./node_modules/jqtree/lib/util.js","webpack:///./node_modules/querystringify/index.js","webpack:///external \"jQuery\"","webpack:///./node_modules/jqtree/lib/simple.widget.js","webpack:///./node_modules/cookie/index.js","webpack:///./node_modules/url-parse/index.js","webpack:///./node_modules/jqtree/lib/tree.jquery.js","webpack:///./node_modules/jqtree/lib/version.js","webpack:///./node_modules/jqtree/lib/dragAndDropHandler.js","webpack:///./node_modules/jqtree/lib/elementsRenderer.js","webpack:///./node_modules/jqtree/lib/dataLoader.js","webpack:///./node_modules/jqtree/lib/keyHandler.js","webpack:///./node_modules/jqtree/lib/mouse.widget.js","webpack:///./node_modules/jqtree/lib/saveStateHandler.js","webpack:///./node_modules/jqtree/lib/scrollHandler.js","webpack:///./node_modules/jqtree/lib/selectNodeHandler.js","webpack:///./node_modules/jqtree/lib/nodeElement.js","webpack:///(webpack)/buildin/global.js","webpack:///./node_modules/requires-port/index.js","webpack:///./node_modules/spin.js/spin.js","webpack:///./django_mptt_admin.ts"],"names":["installedModules","__webpack_require__","moduleId","exports","module","i","l","modules","call","m","c","d","name","getter","o","Object","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","prototype","hasOwnProperty","p","s","Position","Node","getPosition","getPositionName","positionNames","before","Before","after","After","inside","Inside","none","None","position","name_1","isRoot","nodeClass","this","isEmptyFolder","load_on_demand","setData","children","parent","idMapping","tree","loadFromData","data","removeChildren","_i","data_1","length","node","createNode","addChild","Array","push","setParent","addChildAtPosition","index","splice","removeChild","doRemoveChild","getChildIndex","jQuery","inArray","hasChildren","isFolder","iterate","callback","_iterate","level","_a","child","moveNode","movedNode","targetNode","isParentOf","getData","includeParent","getDataFromNodes","nodes","map","tmpNode","k","indexOf","v","getNodeByName","getNodeByCallback","getNodeByNameMustExist","result","addAfter","nodeInfo","childIndex","addBefore","addParent","newParent","originalParent","remove","append","prepend","getLevel","getNodeById","nodeId","addNodeToIndex","id","removeNodeFromIndex","_this","getPreviousSibling","previousIndex","getNextSibling","nextIndex","getNodesByProperty","filter","f","getNextNode","includeChildren","is_open","nextSibling","getPreviousNode","previousSibling","getLastChild","getParent","lastChild","initFromData","nodeData","addChildren","childrenData","childrenData_1","getNodeClass","getBoolString","isFunction","isInt","has","decode","input","decodeURIComponent","replace","e","encode","encodeURIComponent","stringify","obj","prefix","pairs","isNaN","join","parse","query","part","parser","exec","register","widgetClass","widgetName","getDataKey","getWidgetData","el","dataKey","widget","SimpleWidget","createWidget","$el","options","init","destroyWidget","destroy","removeData","callFunction","functionName","args","widgetFunction","apply","fn","argument1","arguments","defaults","constructor","extend","deinit","str","TypeError","opt","split","pairSplitRegExp","dec","pair","eq_idx","substr","trim","val","slice","undefined","tryDecode","serialize","enc","fieldContentRegExp","test","maxAge","isFinite","Math","floor","domain","path","expires","toUTCString","httpOnly","secure","sameSite","toLowerCase","required","qs","slashes","protocolre","left","RegExp","trimLeft","toString","rules","address","NaN","ignore","hash","lolcation","loc","location","window","global","self","finaldestination","type","protocol","Url","unescape","pathname","href","extractProtocol","match","rest","relative","extracted","instruction","instructions","url","charAt","base","concat","last","unshift","up","resolve","port","host","hostname","username","password","auth","origin","set","pop","char","ins","extendStatics","__extends","b","setPrototypeOf","__proto__","__","__assign","assign","JqTreeWidget","version_1","dragAndDropHandler_1","elementsRenderer_1","dataLoader_1","keyHandler_1","mouse_widget_1","saveStateHandler_1","scrollHandler_1","selectNodeHandler_1","simple_widget_1","node_1","util_1","nodeElement_1","NODE_PARAM_IS_EMPTY","_super","handleClick","clickTarget","getClickTarget","target","toggle","slide","preventDefault","stopPropagation","_triggerEvent","click_event","isDefaultPrevented","doSelectNode","handleDblclick","handleContextmenu","$div","closest","getNode","slideParam","Error","closeNode","openNode","element","getTree","selectNode","optionsParam","getSelectedNode","selectNodeHandler","toJson","JSON","loadData","parentNode","doLoadData","loadDataFromUrl","param1","param2","param3","doLoadDataFromUrl","reload","onFinished","getNodeByHtmlElement","parseParams","_openNode","FolderElement","close","animationSpeed","saveState","isDragging","dndHandler","refreshHitAreas","refresh","addNodeAfter","newNodeInfo","existingNode","newNode","_refreshElements","addNodeBefore","PARAM_IS_EMPTY","addParentNode","removeNode","removeFromSelection","appendNode","parentNodeParam","prependNode","updateNode","idIsChanged","selectCurrentNode","positionIndex","getStateFromStorage","saveStateHandler","addToSelection","mustSetFocus","_getNodeElementForNode","select","getSelectedNodes","isNodeSelected","deselect","scrollToNode","nodeOffset","offset","nodeTop","top","treeOffset","scrollHandler","scrollToY","getState","setState","state","setInitialState","setOption","option","moveDown","selectedNode","keyHandler","moveUp","getVersion","eventName","values","event","Event","trigger","doOpenNode","_node","_slide","_onFinished","open","loadFolderOnDemand","parent_1","fromNode","renderer","render","NodeElement","_getNodeElement","$element","_containsElement","_getScrollLeft","getScrollLeft","mouseDelay","isInitialized","rtl","getRtlOption","closedIcon","getDefaultClosedIcon","dataLoader","DragAndDropHandler","initData","click","dblclick","useContextMenu","on","empty","off","mouseCapture","positionInfo","dragAndDrop","mouseStart","mouseDrag","checkScrolling","mouseStop","getDataUrlInfo","urlInfo","dataUrl","setUrlInfoData","selectedNodeId","getNodeIdToBeSelected","selected_node","initTree","doInit","clear","mustLoadOnDemand","setInitialStateOnDemand","restoreState","isRestored","autoOpen","maxLevel","getAutoOpenMaxLevel","autoOpenNodes","cbFinished","loadingCount","openNodes","is_loading","loadAndOpenNode","parseInt","$target","$button","$li","nodeElement","deselectCurrentNode","dataRtl","selectOptions","mustToggle","onCanSelectNode","selectable","previous_node","deselectedNode","deselected_node","tree_data","deselectNodes","loadSubtree","selectedNodesUnderParent_1","getSelectedNodesUnder","urlInfoParam","loadFromUrl","onSetStateFromStorage","onGetStateFromStorage","onCreateLi","onIsMoveHandle","onCanMove","onCanMoveTo","onLoadFailed","autoEscape","openedIcon","dataFilter","keyboardSupport","openFolderDelay","onDragMove","onDragStop","buttonLeft","onLoading","showEmptyFolder","tabIndex","HitAreasGenerator","treeWidget","hoveredArea","hitAreas","currentItem","mustCaptureElement","generateHitAreas","hitAreasGenerator","getTreeDimensions","bottom","generate","pageX","pageY","top_1","dragElement","DragElement","addClass","move","area","findHoveredArea","canMoveToArea","stopOpenFolderTimer","mustOpenFolderTimer","startOpenFolderTimer","updateDropHint","removeHover","removeDropHint","originalEvent","moveItem","removeHitAreas","removeClass","is","positionName","previousGhost","x","y","dimensions","right","low","high","mid","addDropHint","folder","openFolderTimer","setTimeout","clearTimeout","movedNode_1","targetNode_1","position_1","previousParent","doMove","move_info","moved_node","target_node","previous_parent","do_move","original_event","width","height","currentNode","treeBottom","positions","lastTop","previousTop","group","positions_1","generateHitAreasForGroup","handleOpenFolder","addPosition","getTop","handleClosedFolder","nextNode","handleFirstNode","handleAfterOpenFolder","handleNode","positionsInGroup","positionCount","min","areaHeight","round","areaTop","VisibleNodeIterator","isFirstNode","_iterateNode","mustIterateInside","childrenLength_1","forEach","_","nodeName","offsetX","offsetY","$tree","text","html","css","ElementsRenderer","openedIconElement","createButtonElement","closedIconElement","renderFromNode","renderFromRoot","createDomElements","$previousLi","li","createLi","attachNodeData","isRootNode","ul","createUl","appendChild","children_1","classString","role","document","createElement","className","setAttribute","isSelected","Boolean","createFolderLi","createNodeLi","buttonClasses","getButtonClasses","folderClasses","getFolderClasses","iconElement","div","buttonLink","cloneNode","createTitleSpan","liClasses","isOpen","titleSpan","classes","textContent","innerHTML","createTextNode","DataLoader","getDomElement","addLoadingClass","notifyLoading","stopLoading","removeLoadingClass","submitRequest","parseData","jqXHR","isLoading","handleSuccess","handleError","ajaxSettings","method","cache","dataType","success","error","toUpperCase","ajax","parsedData","parseJSON","KeyHandler","handleKeyDown","canHandleKeyboard","which","DOWN","UP","RIGHT","moveRight","LEFT","moveLeft","isScrolledIntoView","find","isFocusOnTree","activeElement","tagName","getPositionInfoFromMouseEvent","getPositionInfoFromTouch","touch","MouseWidget","mouseDown","button","handleMouseDown","cancelable","mouseMove","handleMouseMove","mouseUp","handleMouseUp","touchStart","touches","changedTouches","touchMove","touchEnd","setMouseDelay","addEventListener","passive","isMouseStarted","mouseDelayTimer","isMouseDelayMet","mouseDownInfo","removeEventListener","handleStartMouse","startMouseDelayTimer","SaveStateHandler","supportsLocalStorage","localStorage","setItem","getKeyName","jsonData","loadFromStorage","parseState","selectedNodeIds","open_nodes","openInitialNodes","resetSelection","selectInitialNodes","doSetInitialStateOnDemand","getItem","nodeIds","nodeIds_1","nodeDd","selectCount","nodeIds_2","nodeIdsParam","selectedNodes","newNodesIds","nodeIds_3","_supportsLocalStorage","sessionStorage","removeItem","testSupport","ScrollHandler","ensureInit","checkVerticalScrolling","checkHorizontalScrolling","$scrollParent","scrollTop","treeTop","elementBottom","viewBottom","elementTop","viewTop","elHeight","scrollParentTop","scrollLeft","initScrollParent","setDocumentAsScrollParent","cssAttributes","hasOverFlow","cssAttributes_1","attr","overflowValue","parents","getParentWithOverflow","handleVerticalScrollingWithScrollParent","scrollParent","offsetHeight","handleVerticalScrollingWithDocument","handleHorizontalScrollingWithParent","handleHorizontalScrollingWithDocument","scrollParentOffset","canScrollRight","clientWidth","scrollWidth","canScrollLeft","rightEdge","leftEdge","isNearRightEdge","isNearLeftEdge","max","$document","windowWidth","SelectNodeHandler","selectedSingleNode","BorderDropHint","mustShowBorderDropHint","GhostDropHint","getLi","$span","getSpan","focus","removeAttr","blur","getUl","getButton","buttonEl","icon","doOpen","slideDown","show","doClose","slideUp","hide","elWidth","outerHeight","$hint","$ghost","moveAfter","moveBefore","moveInsideOpenFolder","moveInside","g","Function","lines","radius","scale","corners","color","fadeColor","animation","rotate","direction","speed","zIndex","shadow","Spinner","opts","spin","stop","transform","insertBefore","firstChild","borderRadius","shadows","boxShadow","regex","matches","xUnits","yUnits","end","parseBoxShadow","degrees","backgroundLine","background","getColor","transformOrigin","delay","line","normalizeShadow","drawLines","requestAnimationFrame","cancelAnimationFrame","animateId","props","prop","style","idx","normalized","shadows_1","xy","convertOffset","radians","PI","sin","cos","csrfCookieName","errorNode","insertAtUrl","URL","spinners","handleLoading","spinner","treeOptions","$title","insert_at","querystring","insertUrlString","tabindex","gettext","eventParam","info","target_id","move_url","beforeSend","xhr","setRequestHeader","cookie","querySelector"],"mappings":"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","file":"django_mptt_admin.js","sourcesContent":[" \t// The module cache\n \tvar installedModules = {};\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"\";\n\n\n \t// Load entry module and return exports\n \treturn __webpack_require__(__webpack_require__.s = 7);\n","\"use strict\";\nexports.__esModule = true;\nexports.Node = exports.getPosition = exports.getPositionName = exports.Position = void 0;\nvar Position;\n(function (Position) {\n    Position[Position[\"Before\"] = 1] = \"Before\";\n    Position[Position[\"After\"] = 2] = \"After\";\n    Position[Position[\"Inside\"] = 3] = \"Inside\";\n    Position[Position[\"None\"] = 4] = \"None\";\n})(Position = exports.Position || (exports.Position = {}));\nvar positionNames = {\n    before: Position.Before,\n    after: Position.After,\n    inside: Position.Inside,\n    none: Position.None\n};\nexports.getPositionName = function (position) {\n    for (var name_1 in positionNames) {\n        if (Object.prototype.hasOwnProperty.call(positionNames, name_1)) {\n            if (positionNames[name_1] === position) {\n                return name_1;\n            }\n        }\n    }\n    return \"\";\n};\nexports.getPosition = function (name) {\n    return positionNames[name];\n};\nvar Node = /** @class */ (function () {\n    function Node(o, isRoot, nodeClass) {\n        if (o === void 0) { o = null; }\n        if (isRoot === void 0) { isRoot = false; }\n        if (nodeClass === void 0) { nodeClass = Node; }\n        this.name = \"\";\n        this.isEmptyFolder = false;\n        this.load_on_demand = false;\n        this.setData(o);\n        this.children = [];\n        this.parent = null;\n        if (isRoot) {\n            this.idMapping = {};\n            this.tree = this;\n            this.nodeClass = nodeClass;\n        }\n    }\n    /*\n    Set the data of this node.\n\n    setData(string): set the name of the node\n    setdata(object): set attributes of the node\n\n    Examples:\n        setdata('node1')\n\n        setData({ name: 'node1', id: 1});\n\n        setData({ name: 'node2', id: 2, color: 'green'});\n\n    * This is an internal function; it is not in the docs\n    * Does not remove existing node values\n    */\n    Node.prototype.setData = function (o) {\n        if (!o) {\n            return;\n        }\n        else if (typeof o === \"string\") {\n            this.name = o;\n        }\n        else if (typeof o === \"object\") {\n            for (var key in o) {\n                if (Object.prototype.hasOwnProperty.call(o, key)) {\n                    var value = o[key];\n                    if (key === \"label\" || key === \"name\") {\n                        // You can use the 'label' key instead of 'name'; this is a legacy feature\n                        if (typeof value === \"string\") {\n                            this.name = value;\n                        }\n                    }\n                    else if (key !== \"children\" && key !== \"parent\") {\n                        // You can't update the children or the parent using this function\n                        this[key] = value;\n                    }\n                }\n            }\n        }\n    };\n    /*\n    Create tree from data.\n\n    Structure of data is:\n    [\n        {\n            name: 'node1',\n            children: [\n                { name: 'child1' },\n                { name: 'child2' }\n            ]\n        },\n        {\n            name: 'node2'\n        }\n    ]\n    */\n    Node.prototype.loadFromData = function (data) {\n        this.removeChildren();\n        for (var _i = 0, data_1 = data; _i < data_1.length; _i++) {\n            var o = data_1[_i];\n            var node = this.createNode(o);\n            this.addChild(node);\n            if (typeof o === \"object\" &&\n                o[\"children\"] &&\n                o[\"children\"] instanceof Array) {\n                if (o[\"children\"].length === 0) {\n                    node.isEmptyFolder = true;\n                }\n                else {\n                    node.loadFromData(o[\"children\"]);\n                }\n            }\n        }\n        return this;\n    };\n    /*\n    Add child.\n\n    tree.addChild(\n        new Node('child1')\n    );\n    */\n    Node.prototype.addChild = function (node) {\n        this.children.push(node);\n        node.setParent(this);\n    };\n    /*\n    Add child at position. Index starts at 0.\n\n    tree.addChildAtPosition(\n        new Node('abc'),\n        1\n    );\n    */\n    Node.prototype.addChildAtPosition = function (node, index) {\n        this.children.splice(index, 0, node);\n        node.setParent(this);\n    };\n    /*\n    Remove child. This also removes the children of the node.\n\n    tree.removeChild(tree.children[0]);\n    */\n    Node.prototype.removeChild = function (node) {\n        // remove children from the index\n        node.removeChildren();\n        this.doRemoveChild(node);\n    };\n    /*\n    Get child index.\n\n    var index = getChildIndex(node);\n    */\n    Node.prototype.getChildIndex = function (node) {\n        return jQuery.inArray(node, this.children);\n    };\n    /*\n    Does the tree have children?\n\n    if (tree.hasChildren()) {\n        //\n    }\n    */\n    Node.prototype.hasChildren = function () {\n        return this.children.length !== 0;\n    };\n    Node.prototype.isFolder = function () {\n        return this.hasChildren() || this.load_on_demand;\n    };\n    /*\n    Iterate over all the nodes in the tree.\n\n    Calls callback with (node, level).\n\n    The callback must return true to continue the iteration on current node.\n\n    tree.iterate(\n        function(node, level) {\n           console.log(node.name);\n\n           // stop iteration after level 2\n           return (level <= 2);\n        }\n    );\n\n    */\n    Node.prototype.iterate = function (callback) {\n        var _iterate = function (node, level) {\n            if (node.children) {\n                for (var _i = 0, _a = node.children; _i < _a.length; _i++) {\n                    var child = _a[_i];\n                    var result = callback(child, level);\n                    if (result && child.hasChildren()) {\n                        _iterate(child, level + 1);\n                    }\n                }\n            }\n        };\n        _iterate(this, 0);\n    };\n    /*\n    Move node relative to another node.\n\n    Argument position: Position.BEFORE, Position.AFTER or Position.Inside\n\n    // move node1 after node2\n    tree.moveNode(node1, node2, Position.AFTER);\n    */\n    Node.prototype.moveNode = function (movedNode, targetNode, position) {\n        if (!movedNode.parent || movedNode.isParentOf(targetNode)) {\n            // - Node is parent of target node\n            // - Or, parent is empty\n            return false;\n        }\n        else {\n            movedNode.parent.doRemoveChild(movedNode);\n            switch (position) {\n                case Position.After: {\n                    if (targetNode.parent) {\n                        targetNode.parent.addChildAtPosition(movedNode, targetNode.parent.getChildIndex(targetNode) + 1);\n                        return true;\n                    }\n                    return false;\n                }\n                case Position.Before: {\n                    if (targetNode.parent) {\n                        targetNode.parent.addChildAtPosition(movedNode, targetNode.parent.getChildIndex(targetNode));\n                        return true;\n                    }\n                    return false;\n                }\n                case Position.Inside: {\n                    // move inside as first child\n                    targetNode.addChildAtPosition(movedNode, 0);\n                    return true;\n                }\n                default:\n                    return false;\n            }\n        }\n    };\n    /*\n    Get the tree as data.\n    */\n    Node.prototype.getData = function (includeParent) {\n        if (includeParent === void 0) { includeParent = false; }\n        var getDataFromNodes = function (nodes) {\n            return nodes.map(function (node) {\n                var tmpNode = {};\n                for (var k in node) {\n                    if ([\n                        \"parent\",\n                        \"children\",\n                        \"element\",\n                        \"idMapping\",\n                        \"load_on_demand\",\n                        \"nodeClass\",\n                        \"tree\",\n                        \"isEmptyFolder\",\n                    ].indexOf(k) === -1 &&\n                        Object.prototype.hasOwnProperty.call(node, k)) {\n                        var v = node[k];\n                        tmpNode[k] = v;\n                    }\n                }\n                if (node.hasChildren()) {\n                    tmpNode[\"children\"] = getDataFromNodes(node.children);\n                }\n                return tmpNode;\n            });\n        };\n        if (includeParent) {\n            return getDataFromNodes([this]);\n        }\n        else {\n            return getDataFromNodes(this.children);\n        }\n    };\n    Node.prototype.getNodeByName = function (name) {\n        return this.getNodeByCallback(function (node) { return node.name === name; });\n    };\n    Node.prototype.getNodeByNameMustExist = function (name) {\n        var node = this.getNodeByCallback(function (n) { return n.name === name; });\n        if (!node) {\n            throw \"Node with name \" + name + \" not found\";\n        }\n        return node;\n    };\n    Node.prototype.getNodeByCallback = function (callback) {\n        var result = null;\n        this.iterate(function (node) {\n            if (result) {\n                return false;\n            }\n            else if (callback(node)) {\n                result = node;\n                return false;\n            }\n            else {\n                return true;\n            }\n        });\n        return result;\n    };\n    Node.prototype.addAfter = function (nodeInfo) {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var node = this.createNode(nodeInfo);\n            var childIndex = this.parent.getChildIndex(this);\n            this.parent.addChildAtPosition(node, childIndex + 1);\n            if (typeof nodeInfo === \"object\" &&\n                nodeInfo[\"children\"] &&\n                nodeInfo[\"children\"] instanceof Array &&\n                nodeInfo[\"children\"].length) {\n                node.loadFromData(nodeInfo[\"children\"]);\n            }\n            return node;\n        }\n    };\n    Node.prototype.addBefore = function (nodeInfo) {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var node = this.createNode(nodeInfo);\n            var childIndex = this.parent.getChildIndex(this);\n            this.parent.addChildAtPosition(node, childIndex);\n            if (typeof nodeInfo === \"object\" &&\n                nodeInfo[\"children\"] &&\n                nodeInfo[\"children\"] instanceof Array &&\n                nodeInfo[\"children\"].length) {\n                node.loadFromData(nodeInfo[\"children\"]);\n            }\n            return node;\n        }\n    };\n    Node.prototype.addParent = function (nodeInfo) {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var newParent = this.createNode(nodeInfo);\n            if (this.tree) {\n                newParent.setParent(this.tree);\n            }\n            var originalParent = this.parent;\n            for (var _i = 0, _a = originalParent.children; _i < _a.length; _i++) {\n                var child = _a[_i];\n                newParent.addChild(child);\n            }\n            originalParent.children = [];\n            originalParent.addChild(newParent);\n            return newParent;\n        }\n    };\n    Node.prototype.remove = function () {\n        if (this.parent) {\n            this.parent.removeChild(this);\n            this.parent = null;\n        }\n    };\n    Node.prototype.append = function (nodeInfo) {\n        var node = this.createNode(nodeInfo);\n        this.addChild(node);\n        if (typeof nodeInfo === \"object\" &&\n            nodeInfo[\"children\"] &&\n            nodeInfo[\"children\"] instanceof Array &&\n            nodeInfo[\"children\"].length) {\n            node.loadFromData(nodeInfo[\"children\"]);\n        }\n        return node;\n    };\n    Node.prototype.prepend = function (nodeInfo) {\n        var node = this.createNode(nodeInfo);\n        this.addChildAtPosition(node, 0);\n        if (typeof nodeInfo === \"object\" &&\n            nodeInfo[\"children\"] &&\n            nodeInfo[\"children\"] instanceof Array &&\n            nodeInfo[\"children\"].length) {\n            node.loadFromData(nodeInfo[\"children\"]);\n        }\n        return node;\n    };\n    Node.prototype.isParentOf = function (node) {\n        var parent = node.parent;\n        while (parent) {\n            if (parent === this) {\n                return true;\n            }\n            parent = parent.parent;\n        }\n        return false;\n    };\n    Node.prototype.getLevel = function () {\n        var level = 0;\n        var node = this; // eslint-disable-line @typescript-eslint/no-this-alias\n        while (node.parent) {\n            level += 1;\n            node = node.parent;\n        }\n        return level;\n    };\n    Node.prototype.getNodeById = function (nodeId) {\n        return this.idMapping[nodeId] || null;\n    };\n    Node.prototype.addNodeToIndex = function (node) {\n        if (node.id != null) {\n            this.idMapping[node.id] = node;\n        }\n    };\n    Node.prototype.removeNodeFromIndex = function (node) {\n        if (node.id != null) {\n            delete this.idMapping[node.id];\n        }\n    };\n    Node.prototype.removeChildren = function () {\n        var _this = this;\n        this.iterate(function (child) {\n            var _a;\n            (_a = _this.tree) === null || _a === void 0 ? void 0 : _a.removeNodeFromIndex(child);\n            return true;\n        });\n        this.children = [];\n    };\n    Node.prototype.getPreviousSibling = function () {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var previousIndex = this.parent.getChildIndex(this) - 1;\n            if (previousIndex >= 0) {\n                return this.parent.children[previousIndex];\n            }\n            else {\n                return null;\n            }\n        }\n    };\n    Node.prototype.getNextSibling = function () {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var nextIndex = this.parent.getChildIndex(this) + 1;\n            if (nextIndex < this.parent.children.length) {\n                return this.parent.children[nextIndex];\n            }\n            else {\n                return null;\n            }\n        }\n    };\n    Node.prototype.getNodesByProperty = function (key, value) {\n        return this.filter(function (node) { return node[key] === value; });\n    };\n    Node.prototype.filter = function (f) {\n        var result = [];\n        this.iterate(function (node) {\n            if (f(node)) {\n                result.push(node);\n            }\n            return true;\n        });\n        return result;\n    };\n    Node.prototype.getNextNode = function (includeChildren) {\n        if (includeChildren === void 0) { includeChildren = true; }\n        if (includeChildren && this.hasChildren() && this.is_open) {\n            // First child\n            return this.children[0];\n        }\n        else {\n            if (!this.parent) {\n                return null;\n            }\n            else {\n                var nextSibling = this.getNextSibling();\n                if (nextSibling) {\n                    // Next sibling\n                    return nextSibling;\n                }\n                else {\n                    // Next node of parent\n                    return this.parent.getNextNode(false);\n                }\n            }\n        }\n    };\n    Node.prototype.getPreviousNode = function () {\n        if (!this.parent) {\n            return null;\n        }\n        else {\n            var previousSibling = this.getPreviousSibling();\n            if (previousSibling) {\n                if (!previousSibling.hasChildren() ||\n                    !previousSibling.is_open) {\n                    // Previous sibling\n                    return previousSibling;\n                }\n                else {\n                    // Last child of previous sibling\n                    return previousSibling.getLastChild();\n                }\n            }\n            else {\n                return this.getParent();\n            }\n        }\n    };\n    Node.prototype.getParent = function () {\n        // Return parent except if it is the root node\n        if (!this.parent) {\n            return null;\n        }\n        else if (!this.parent.parent) {\n            // Root node -> null\n            return null;\n        }\n        else {\n            return this.parent;\n        }\n    };\n    Node.prototype.getLastChild = function () {\n        if (!this.hasChildren()) {\n            return null;\n        }\n        else {\n            var lastChild = this.children[this.children.length - 1];\n            if (!(lastChild.hasChildren() && lastChild.is_open)) {\n                return lastChild;\n            }\n            else {\n                return lastChild.getLastChild();\n            }\n        }\n    };\n    // Init Node from data without making it the root of the tree\n    Node.prototype.initFromData = function (data) {\n        var _this = this;\n        var addNode = function (nodeData) {\n            _this.setData(nodeData);\n            if (typeof nodeData === \"object\" &&\n                nodeData[\"children\"] &&\n                nodeData[\"children\"] instanceof Array &&\n                nodeData[\"children\"].length) {\n                addChildren(nodeData[\"children\"]);\n            }\n        };\n        var addChildren = function (childrenData) {\n            for (var _i = 0, childrenData_1 = childrenData; _i < childrenData_1.length; _i++) {\n                var child = childrenData_1[_i];\n                var node = _this.createNode();\n                node.initFromData(child);\n                _this.addChild(node);\n            }\n        };\n        addNode(data);\n    };\n    Node.prototype.setParent = function (parent) {\n        var _a;\n        this.parent = parent;\n        this.tree = parent.tree;\n        (_a = this.tree) === null || _a === void 0 ? void 0 : _a.addNodeToIndex(this);\n    };\n    Node.prototype.doRemoveChild = function (node) {\n        var _a;\n        this.children.splice(this.getChildIndex(node), 1);\n        (_a = this.tree) === null || _a === void 0 ? void 0 : _a.removeNodeFromIndex(node);\n    };\n    Node.prototype.getNodeClass = function () {\n        var _a;\n        return this.nodeClass || ((_a = this === null || this === void 0 ? void 0 : this.tree) === null || _a === void 0 ? void 0 : _a.nodeClass) || Node;\n    };\n    Node.prototype.createNode = function (nodeData) {\n        var nodeClass = this.getNodeClass();\n        return new nodeClass(nodeData);\n    };\n    return Node;\n}());\nexports.Node = Node;\n","\"use strict\";\nexports.__esModule = true;\nexports.getBoolString = exports.isFunction = exports.isInt = void 0;\nexports.isInt = function (n) {\n    return typeof n === \"number\" && n % 1 === 0;\n};\nexports.isFunction = function (v) { return typeof v === \"function\"; };\nexports.getBoolString = function (value) {\n    return value ? \"true\" : \"false\";\n};\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , undef;\n\n/**\n * Decode a URI encoded string.\n *\n * @param {String} input The URI encoded string.\n * @returns {String|Null} The decoded string.\n * @api private\n */\nfunction decode(input) {\n  try {\n    return decodeURIComponent(input.replace(/\\+/g, ' '));\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Attempts to encode a given input.\n *\n * @param {String} input The string that needs to be encoded.\n * @returns {String|Null} The encoded string.\n * @api private\n */\nfunction encode(input) {\n  try {\n    return encodeURIComponent(input);\n  } catch (e) {\n    return null;\n  }\n}\n\n/**\n * Simple query string parser.\n *\n * @param {String} query The query string that needs to be parsed.\n * @returns {Object}\n * @api public\n */\nfunction querystring(query) {\n  var parser = /([^=?#&]+)=?([^&]*)/g\n    , result = {}\n    , part;\n\n  while (part = parser.exec(query)) {\n    var key = decode(part[1])\n      , value = decode(part[2]);\n\n    //\n    // Prevent overriding of existing properties. This ensures that build-in\n    // methods like `toString` or __proto__ are not overriden by malicious\n    // querystrings.\n    //\n    // In the case if failed decoding, we want to omit the key/value pairs\n    // from the result.\n    //\n    if (key === null || value === null || key in result) continue;\n    result[key] = value;\n  }\n\n  return result;\n}\n\n/**\n * Transform a query string to an object.\n *\n * @param {Object} obj Object that should be transformed.\n * @param {String} prefix Optional prefix.\n * @returns {String}\n * @api public\n */\nfunction querystringify(obj, prefix) {\n  prefix = prefix || '';\n\n  var pairs = []\n    , value\n    , key;\n\n  //\n  // Optionally prefix with a '?' if needed\n  //\n  if ('string' !== typeof prefix) prefix = '?';\n\n  for (key in obj) {\n    if (has.call(obj, key)) {\n      value = obj[key];\n\n      //\n      // Edge cases where we actually want to encode the value to an empty\n      // string instead of the stringified value.\n      //\n      if (!value && (value === null || value === undef || isNaN(value))) {\n        value = '';\n      }\n\n      key = encode(key);\n      value = encode(value);\n\n      //\n      // If we failed to encode the strings, we should bail out as we don't\n      // want to add invalid strings to the query.\n      //\n      if (key === null || value === null) continue;\n      pairs.push(key +'='+ value);\n    }\n  }\n\n  return pairs.length ? prefix + pairs.join('&') : '';\n}\n\n//\n// Expose the module.\n//\nexports.stringify = querystringify;\nexports.parse = querystring;\n","module.exports = jQuery;","\"use strict\";\nexports.__esModule = true;\nvar register = function (widgetClass, widgetName) {\n    var getDataKey = function () { return \"simple_widget_\" + widgetName; };\n    var getWidgetData = function (el, dataKey) {\n        var widget = jQuery.data(el, dataKey);\n        if (widget && widget instanceof SimpleWidget) {\n            return widget;\n        }\n        else {\n            return null;\n        }\n    };\n    var createWidget = function ($el, options) {\n        var dataKey = getDataKey();\n        for (var _i = 0, _a = $el.get(); _i < _a.length; _i++) {\n            var el = _a[_i];\n            var existingWidget = getWidgetData(el, dataKey);\n            if (!existingWidget) {\n                var simpleWidgetClass = widgetClass;\n                var widget = new simpleWidgetClass(el, options);\n                if (!jQuery.data(el, dataKey)) {\n                    jQuery.data(el, dataKey, widget);\n                }\n                // Call init after setting data, so we can call methods\n                widget.init();\n            }\n        }\n        return $el;\n    };\n    var destroyWidget = function ($el) {\n        var dataKey = getDataKey();\n        for (var _i = 0, _a = $el.get(); _i < _a.length; _i++) {\n            var el = _a[_i];\n            var widget = getWidgetData(el, dataKey);\n            if (widget) {\n                widget.destroy();\n            }\n            jQuery.removeData(el, dataKey);\n        }\n    };\n    var callFunction = function ($el, functionName, args) {\n        var result = null;\n        for (var _i = 0, _a = $el.get(); _i < _a.length; _i++) {\n            var el = _a[_i];\n            var widget = jQuery.data(el, getDataKey());\n            if (widget && widget instanceof SimpleWidget) {\n                var simpleWidget = widget;\n                var widgetFunction = simpleWidget[functionName];\n                if (widgetFunction && typeof widgetFunction === \"function\") {\n                    result = widgetFunction.apply(widget, args);\n                }\n            }\n        }\n        return result;\n    };\n    // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n    jQuery.fn[widgetName] = function (argument1) {\n        var args = [];\n        for (var _i = 1; _i < arguments.length; _i++) {\n            args[_i - 1] = arguments[_i];\n        }\n        if (!argument1) {\n            return createWidget(this, null);\n        }\n        else if (typeof argument1 === \"object\") {\n            var options = argument1;\n            return createWidget(this, options);\n        }\n        else if (typeof argument1 === \"string\" && argument1[0] !== \"_\") {\n            var functionName = argument1;\n            if (functionName === \"destroy\") {\n                return destroyWidget(this);\n            }\n            else if (functionName === \"get_widget_class\") {\n                return widgetClass;\n            }\n            else {\n                return callFunction(this, functionName, args);\n            }\n        }\n    };\n};\nvar SimpleWidget = /** @class */ (function () {\n    function SimpleWidget(el, options) {\n        this.$el = jQuery(el);\n        // eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\n        var defaults = this.constructor[\"defaults\"];\n        this.options = jQuery.extend({}, defaults, options);\n    }\n    SimpleWidget.register = function (widgetClass, widgetName) {\n        register(widgetClass, widgetName);\n    };\n    SimpleWidget.prototype.destroy = function () {\n        this.deinit();\n    };\n    SimpleWidget.prototype.init = function () {\n        //\n    };\n    SimpleWidget.prototype.deinit = function () {\n        //\n    };\n    SimpleWidget.defaults = {};\n    return SimpleWidget;\n}());\nexports[\"default\"] = SimpleWidget;\n","/*!\n * cookie\n * Copyright(c) 2012-2014 Roman Shtylman\n * Copyright(c) 2015 Douglas Christopher Wilson\n * MIT Licensed\n */\n\n'use strict';\n\n/**\n * Module exports.\n * @public\n */\n\nexports.parse = parse;\nexports.serialize = serialize;\n\n/**\n * Module variables.\n * @private\n */\n\nvar decode = decodeURIComponent;\nvar encode = encodeURIComponent;\nvar pairSplitRegExp = /; */;\n\n/**\n * RegExp to match field-content in RFC 7230 sec 3.2\n *\n * field-content = field-vchar [ 1*( SP / HTAB ) field-vchar ]\n * field-vchar   = VCHAR / obs-text\n * obs-text      = %x80-FF\n */\n\nvar fieldContentRegExp = /^[\\u0009\\u0020-\\u007e\\u0080-\\u00ff]+$/;\n\n/**\n * Parse a cookie header.\n *\n * Parse the given cookie header string into an object\n * The object has the various cookies as keys(names) => values\n *\n * @param {string} str\n * @param {object} [options]\n * @return {object}\n * @public\n */\n\nfunction parse(str, options) {\n  if (typeof str !== 'string') {\n    throw new TypeError('argument str must be a string');\n  }\n\n  var obj = {}\n  var opt = options || {};\n  var pairs = str.split(pairSplitRegExp);\n  var dec = opt.decode || decode;\n\n  for (var i = 0; i < pairs.length; i++) {\n    var pair = pairs[i];\n    var eq_idx = pair.indexOf('=');\n\n    // skip things that don't look like key=value\n    if (eq_idx < 0) {\n      continue;\n    }\n\n    var key = pair.substr(0, eq_idx).trim()\n    var val = pair.substr(++eq_idx, pair.length).trim();\n\n    // quoted values\n    if ('\"' == val[0]) {\n      val = val.slice(1, -1);\n    }\n\n    // only assign once\n    if (undefined == obj[key]) {\n      obj[key] = tryDecode(val, dec);\n    }\n  }\n\n  return obj;\n}\n\n/**\n * Serialize data into a cookie header.\n *\n * Serialize the a name value pair into a cookie string suitable for\n * http headers. An optional options object specified cookie parameters.\n *\n * serialize('foo', 'bar', { httpOnly: true })\n *   => \"foo=bar; httpOnly\"\n *\n * @param {string} name\n * @param {string} val\n * @param {object} [options]\n * @return {string}\n * @public\n */\n\nfunction serialize(name, val, options) {\n  var opt = options || {};\n  var enc = opt.encode || encode;\n\n  if (typeof enc !== 'function') {\n    throw new TypeError('option encode is invalid');\n  }\n\n  if (!fieldContentRegExp.test(name)) {\n    throw new TypeError('argument name is invalid');\n  }\n\n  var value = enc(val);\n\n  if (value && !fieldContentRegExp.test(value)) {\n    throw new TypeError('argument val is invalid');\n  }\n\n  var str = name + '=' + value;\n\n  if (null != opt.maxAge) {\n    var maxAge = opt.maxAge - 0;\n\n    if (isNaN(maxAge) || !isFinite(maxAge)) {\n      throw new TypeError('option maxAge is invalid')\n    }\n\n    str += '; Max-Age=' + Math.floor(maxAge);\n  }\n\n  if (opt.domain) {\n    if (!fieldContentRegExp.test(opt.domain)) {\n      throw new TypeError('option domain is invalid');\n    }\n\n    str += '; Domain=' + opt.domain;\n  }\n\n  if (opt.path) {\n    if (!fieldContentRegExp.test(opt.path)) {\n      throw new TypeError('option path is invalid');\n    }\n\n    str += '; Path=' + opt.path;\n  }\n\n  if (opt.expires) {\n    if (typeof opt.expires.toUTCString !== 'function') {\n      throw new TypeError('option expires is invalid');\n    }\n\n    str += '; Expires=' + opt.expires.toUTCString();\n  }\n\n  if (opt.httpOnly) {\n    str += '; HttpOnly';\n  }\n\n  if (opt.secure) {\n    str += '; Secure';\n  }\n\n  if (opt.sameSite) {\n    var sameSite = typeof opt.sameSite === 'string'\n      ? opt.sameSite.toLowerCase() : opt.sameSite;\n\n    switch (sameSite) {\n      case true:\n        str += '; SameSite=Strict';\n        break;\n      case 'lax':\n        str += '; SameSite=Lax';\n        break;\n      case 'strict':\n        str += '; SameSite=Strict';\n        break;\n      case 'none':\n        str += '; SameSite=None';\n        break;\n      default:\n        throw new TypeError('option sameSite is invalid');\n    }\n  }\n\n  return str;\n}\n\n/**\n * Try decoding a string using a decoding function.\n *\n * @param {string} str\n * @param {function} decode\n * @private\n */\n\nfunction tryDecode(str, decode) {\n  try {\n    return decode(str);\n  } catch (e) {\n    return str;\n  }\n}\n","'use strict';\n\nvar required = require('requires-port')\n  , qs = require('querystringify')\n  , slashes = /^[A-Za-z][A-Za-z0-9+-.]*:\\/\\//\n  , protocolre = /^([a-z][a-z0-9.+-]*:)?(\\/\\/)?([\\S\\s]*)/i\n  , whitespace = '[\\\\x09\\\\x0A\\\\x0B\\\\x0C\\\\x0D\\\\x20\\\\xA0\\\\u1680\\\\u180E\\\\u2000\\\\u2001\\\\u2002\\\\u2003\\\\u2004\\\\u2005\\\\u2006\\\\u2007\\\\u2008\\\\u2009\\\\u200A\\\\u202F\\\\u205F\\\\u3000\\\\u2028\\\\u2029\\\\uFEFF]'\n  , left = new RegExp('^'+ whitespace +'+');\n\n/**\n * Trim a given string.\n *\n * @param {String} str String to trim.\n * @public\n */\nfunction trimLeft(str) {\n  return (str ? str : '').toString().replace(left, '');\n}\n\n/**\n * These are the parse rules for the URL parser, it informs the parser\n * about:\n *\n * 0. The char it Needs to parse, if it's a string it should be done using\n *    indexOf, RegExp using exec and NaN means set as current value.\n * 1. The property we should set when parsing this value.\n * 2. Indication if it's backwards or forward parsing, when set as number it's\n *    the value of extra chars that should be split off.\n * 3. Inherit from location if non existing in the parser.\n * 4. `toLowerCase` the resulting value.\n */\nvar rules = [\n  ['#', 'hash'],                        // Extract from the back.\n  ['?', 'query'],                       // Extract from the back.\n  function sanitize(address) {          // Sanitize what is left of the address\n    return address.replace('\\\\', '/');\n  },\n  ['/', 'pathname'],                    // Extract from the back.\n  ['@', 'auth', 1],                     // Extract from the front.\n  [NaN, 'host', undefined, 1, 1],       // Set left over value.\n  [/:(\\d+)$/, 'port', undefined, 1],    // RegExp the back.\n  [NaN, 'hostname', undefined, 1, 1]    // Set left over.\n];\n\n/**\n * These properties should not be copied or inherited from. This is only needed\n * for all non blob URL's as a blob URL does not include a hash, only the\n * origin.\n *\n * @type {Object}\n * @private\n */\nvar ignore = { hash: 1, query: 1 };\n\n/**\n * The location object differs when your code is loaded through a normal page,\n * Worker or through a worker using a blob. And with the blobble begins the\n * trouble as the location object will contain the URL of the blob, not the\n * location of the page where our code is loaded in. The actual origin is\n * encoded in the `pathname` so we can thankfully generate a good \"default\"\n * location from it so we can generate proper relative URL's again.\n *\n * @param {Object|String} loc Optional default location object.\n * @returns {Object} lolcation object.\n * @public\n */\nfunction lolcation(loc) {\n  var globalVar;\n\n  if (typeof window !== 'undefined') globalVar = window;\n  else if (typeof global !== 'undefined') globalVar = global;\n  else if (typeof self !== 'undefined') globalVar = self;\n  else globalVar = {};\n\n  var location = globalVar.location || {};\n  loc = loc || location;\n\n  var finaldestination = {}\n    , type = typeof loc\n    , key;\n\n  if ('blob:' === loc.protocol) {\n    finaldestination = new Url(unescape(loc.pathname), {});\n  } else if ('string' === type) {\n    finaldestination = new Url(loc, {});\n    for (key in ignore) delete finaldestination[key];\n  } else if ('object' === type) {\n    for (key in loc) {\n      if (key in ignore) continue;\n      finaldestination[key] = loc[key];\n    }\n\n    if (finaldestination.slashes === undefined) {\n      finaldestination.slashes = slashes.test(loc.href);\n    }\n  }\n\n  return finaldestination;\n}\n\n/**\n * @typedef ProtocolExtract\n * @type Object\n * @property {String} protocol Protocol matched in the URL, in lowercase.\n * @property {Boolean} slashes `true` if protocol is followed by \"//\", else `false`.\n * @property {String} rest Rest of the URL that is not part of the protocol.\n */\n\n/**\n * Extract protocol information from a URL with/without double slash (\"//\").\n *\n * @param {String} address URL we want to extract from.\n * @return {ProtocolExtract} Extracted information.\n * @private\n */\nfunction extractProtocol(address) {\n  address = trimLeft(address);\n  var match = protocolre.exec(address);\n\n  return {\n    protocol: match[1] ? match[1].toLowerCase() : '',\n    slashes: !!match[2],\n    rest: match[3]\n  };\n}\n\n/**\n * Resolve a relative URL pathname against a base URL pathname.\n *\n * @param {String} relative Pathname of the relative URL.\n * @param {String} base Pathname of the base URL.\n * @return {String} Resolved pathname.\n * @private\n */\nfunction resolve(relative, base) {\n  if (relative === '') return base;\n\n  var path = (base || '/').split('/').slice(0, -1).concat(relative.split('/'))\n    , i = path.length\n    , last = path[i - 1]\n    , unshift = false\n    , up = 0;\n\n  while (i--) {\n    if (path[i] === '.') {\n      path.splice(i, 1);\n    } else if (path[i] === '..') {\n      path.splice(i, 1);\n      up++;\n    } else if (up) {\n      if (i === 0) unshift = true;\n      path.splice(i, 1);\n      up--;\n    }\n  }\n\n  if (unshift) path.unshift('');\n  if (last === '.' || last === '..') path.push('');\n\n  return path.join('/');\n}\n\n/**\n * The actual URL instance. Instead of returning an object we've opted-in to\n * create an actual constructor as it's much more memory efficient and\n * faster and it pleases my OCD.\n *\n * It is worth noting that we should not use `URL` as class name to prevent\n * clashes with the global URL instance that got introduced in browsers.\n *\n * @constructor\n * @param {String} address URL we want to parse.\n * @param {Object|String} [location] Location defaults for relative paths.\n * @param {Boolean|Function} [parser] Parser for the query string.\n * @private\n */\nfunction Url(address, location, parser) {\n  address = trimLeft(address);\n\n  if (!(this instanceof Url)) {\n    return new Url(address, location, parser);\n  }\n\n  var relative, extracted, parse, instruction, index, key\n    , instructions = rules.slice()\n    , type = typeof location\n    , url = this\n    , i = 0;\n\n  //\n  // The following if statements allows this module two have compatibility with\n  // 2 different API:\n  //\n  // 1. Node.js's `url.parse` api which accepts a URL, boolean as arguments\n  //    where the boolean indicates that the query string should also be parsed.\n  //\n  // 2. The `URL` interface of the browser which accepts a URL, object as\n  //    arguments. The supplied object will be used as default values / fall-back\n  //    for relative paths.\n  //\n  if ('object' !== type && 'string' !== type) {\n    parser = location;\n    location = null;\n  }\n\n  if (parser && 'function' !== typeof parser) parser = qs.parse;\n\n  location = lolcation(location);\n\n  //\n  // Extract protocol information before running the instructions.\n  //\n  extracted = extractProtocol(address || '');\n  relative = !extracted.protocol && !extracted.slashes;\n  url.slashes = extracted.slashes || relative && location.slashes;\n  url.protocol = extracted.protocol || location.protocol || '';\n  address = extracted.rest;\n\n  //\n  // When the authority component is absent the URL starts with a path\n  // component.\n  //\n  if (!extracted.slashes) instructions[3] = [/(.*)/, 'pathname'];\n\n  for (; i < instructions.length; i++) {\n    instruction = instructions[i];\n\n    if (typeof instruction === 'function') {\n      address = instruction(address);\n      continue;\n    }\n\n    parse = instruction[0];\n    key = instruction[1];\n\n    if (parse !== parse) {\n      url[key] = address;\n    } else if ('string' === typeof parse) {\n      if (~(index = address.indexOf(parse))) {\n        if ('number' === typeof instruction[2]) {\n          url[key] = address.slice(0, index);\n          address = address.slice(index + instruction[2]);\n        } else {\n          url[key] = address.slice(index);\n          address = address.slice(0, index);\n        }\n      }\n    } else if ((index = parse.exec(address))) {\n      url[key] = index[1];\n      address = address.slice(0, index.index);\n    }\n\n    url[key] = url[key] || (\n      relative && instruction[3] ? location[key] || '' : ''\n    );\n\n    //\n    // Hostname, host and protocol should be lowercased so they can be used to\n    // create a proper `origin`.\n    //\n    if (instruction[4]) url[key] = url[key].toLowerCase();\n  }\n\n  //\n  // Also parse the supplied query string in to an object. If we're supplied\n  // with a custom parser as function use that instead of the default build-in\n  // parser.\n  //\n  if (parser) url.query = parser(url.query);\n\n  //\n  // If the URL is relative, resolve the pathname against the base URL.\n  //\n  if (\n      relative\n    && location.slashes\n    && url.pathname.charAt(0) !== '/'\n    && (url.pathname !== '' || location.pathname !== '')\n  ) {\n    url.pathname = resolve(url.pathname, location.pathname);\n  }\n\n  //\n  // We should not add port numbers if they are already the default port number\n  // for a given protocol. As the host also contains the port number we're going\n  // override it with the hostname which contains no port number.\n  //\n  if (!required(url.port, url.protocol)) {\n    url.host = url.hostname;\n    url.port = '';\n  }\n\n  //\n  // Parse down the `auth` for the username and password.\n  //\n  url.username = url.password = '';\n  if (url.auth) {\n    instruction = url.auth.split(':');\n    url.username = instruction[0] || '';\n    url.password = instruction[1] || '';\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:'\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  //\n  // The href is just the compiled result.\n  //\n  url.href = url.toString();\n}\n\n/**\n * This is convenience method for changing properties in the URL instance to\n * insure that they all propagate correctly.\n *\n * @param {String} part          Property we need to adjust.\n * @param {Mixed} value          The newly assigned value.\n * @param {Boolean|Function} fn  When setting the query, it will be the function\n *                               used to parse the query.\n *                               When setting the protocol, double slash will be\n *                               removed from the final url if it is true.\n * @returns {URL} URL instance for chaining.\n * @public\n */\nfunction set(part, value, fn) {\n  var url = this;\n\n  switch (part) {\n    case 'query':\n      if ('string' === typeof value && value.length) {\n        value = (fn || qs.parse)(value);\n      }\n\n      url[part] = value;\n      break;\n\n    case 'port':\n      url[part] = value;\n\n      if (!required(value, url.protocol)) {\n        url.host = url.hostname;\n        url[part] = '';\n      } else if (value) {\n        url.host = url.hostname +':'+ value;\n      }\n\n      break;\n\n    case 'hostname':\n      url[part] = value;\n\n      if (url.port) value += ':'+ url.port;\n      url.host = value;\n      break;\n\n    case 'host':\n      url[part] = value;\n\n      if (/:\\d+$/.test(value)) {\n        value = value.split(':');\n        url.port = value.pop();\n        url.hostname = value.join(':');\n      } else {\n        url.hostname = value;\n        url.port = '';\n      }\n\n      break;\n\n    case 'protocol':\n      url.protocol = value.toLowerCase();\n      url.slashes = !fn;\n      break;\n\n    case 'pathname':\n    case 'hash':\n      if (value) {\n        var char = part === 'pathname' ? '/' : '#';\n        url[part] = value.charAt(0) !== char ? char + value : value;\n      } else {\n        url[part] = value;\n      }\n      break;\n\n    default:\n      url[part] = value;\n  }\n\n  for (var i = 0; i < rules.length; i++) {\n    var ins = rules[i];\n\n    if (ins[4]) url[ins[1]] = url[ins[1]].toLowerCase();\n  }\n\n  url.origin = url.protocol && url.host && url.protocol !== 'file:'\n    ? url.protocol +'//'+ url.host\n    : 'null';\n\n  url.href = url.toString();\n\n  return url;\n}\n\n/**\n * Transform the properties back in to a valid and full URL string.\n *\n * @param {Function} stringify Optional query stringify function.\n * @returns {String} Compiled version of the URL.\n * @public\n */\nfunction toString(stringify) {\n  if (!stringify || 'function' !== typeof stringify) stringify = qs.stringify;\n\n  var query\n    , url = this\n    , protocol = url.protocol;\n\n  if (protocol && protocol.charAt(protocol.length - 1) !== ':') protocol += ':';\n\n  var result = protocol + (url.slashes ? '//' : '');\n\n  if (url.username) {\n    result += url.username;\n    if (url.password) result += ':'+ url.password;\n    result += '@';\n  }\n\n  result += url.host + url.pathname;\n\n  query = 'object' === typeof url.query ? stringify(url.query) : url.query;\n  if (query) result += '?' !== query.charAt(0) ? '?'+ query : query;\n\n  if (url.hash) result += url.hash;\n\n  return result;\n}\n\nUrl.prototype = { set: set, toString: toString };\n\n//\n// Expose the URL parser and some additional properties that might be useful for\n// others or testing.\n//\nUrl.extractProtocol = extractProtocol;\nUrl.location = lolcation;\nUrl.trimLeft = trimLeft;\nUrl.qs = qs;\n\nmodule.exports = Url;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nvar __assign = (this && this.__assign) || function () {\n    __assign = Object.assign || function(t) {\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\n            s = arguments[i];\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\n                t[p] = s[p];\n        }\n        return t;\n    };\n    return __assign.apply(this, arguments);\n};\nexports.__esModule = true;\nexports.JqTreeWidget = void 0;\nvar version_1 = require(\"./version\");\nvar jQuery = require(\"jquery\");\nvar dragAndDropHandler_1 = require(\"./dragAndDropHandler\");\nvar elementsRenderer_1 = require(\"./elementsRenderer\");\nvar dataLoader_1 = require(\"./dataLoader\");\nvar keyHandler_1 = require(\"./keyHandler\");\nvar mouse_widget_1 = require(\"./mouse.widget\");\nvar saveStateHandler_1 = require(\"./saveStateHandler\");\nvar scrollHandler_1 = require(\"./scrollHandler\");\nvar selectNodeHandler_1 = require(\"./selectNodeHandler\");\nvar simple_widget_1 = require(\"./simple.widget\");\nvar node_1 = require(\"./node\");\nvar util_1 = require(\"./util\");\nvar nodeElement_1 = require(\"./nodeElement\");\nvar NODE_PARAM_IS_EMPTY = \"Node parameter is empty\";\nvar PARAM_IS_EMPTY = \"Parameter is empty: \";\nvar JqTreeWidget = /** @class */ (function (_super) {\n    __extends(JqTreeWidget, _super);\n    function JqTreeWidget() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.handleClick = function (e) {\n            var clickTarget = _this.getClickTarget(e.target);\n            if (clickTarget) {\n                if (clickTarget.type === \"button\") {\n                    _this.toggle(clickTarget.node, _this.options.slide);\n                    e.preventDefault();\n                    e.stopPropagation();\n                }\n                else if (clickTarget.type === \"label\") {\n                    var node = clickTarget.node;\n                    var event_1 = _this._triggerEvent(\"tree.click\", {\n                        node: node,\n                        click_event: e\n                    });\n                    if (!event_1.isDefaultPrevented()) {\n                        _this.doSelectNode(node);\n                    }\n                }\n            }\n        };\n        _this.handleDblclick = function (e) {\n            var clickTarget = _this.getClickTarget(e.target);\n            if ((clickTarget === null || clickTarget === void 0 ? void 0 : clickTarget.type) === \"label\") {\n                _this._triggerEvent(\"tree.dblclick\", {\n                    node: clickTarget.node,\n                    click_event: e\n                });\n            }\n        };\n        _this.handleContextmenu = function (e) {\n            var $div = jQuery(e.target).closest(\"ul.jqtree-tree .jqtree-element\");\n            if ($div.length) {\n                var node = _this.getNode($div);\n                if (node) {\n                    e.preventDefault();\n                    e.stopPropagation();\n                    _this._triggerEvent(\"tree.contextmenu\", {\n                        node: node,\n                        click_event: e\n                    });\n                    return false;\n                }\n            }\n            return null;\n        };\n        return _this;\n    }\n    JqTreeWidget.prototype.toggle = function (node, slideParam) {\n        if (slideParam === void 0) { slideParam = null; }\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        var slide = slideParam !== null && slideParam !== void 0 ? slideParam : this.options.slide;\n        if (node.is_open) {\n            this.closeNode(node, slide);\n        }\n        else {\n            this.openNode(node, slide);\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.getTree = function () {\n        return this.tree;\n    };\n    JqTreeWidget.prototype.selectNode = function (node, optionsParam) {\n        this.doSelectNode(node, optionsParam);\n        return this.element;\n    };\n    JqTreeWidget.prototype.getSelectedNode = function () {\n        return this.selectNodeHandler.getSelectedNode();\n    };\n    JqTreeWidget.prototype.toJson = function () {\n        return JSON.stringify(this.tree.getData());\n    };\n    JqTreeWidget.prototype.loadData = function (data, parentNode) {\n        this.doLoadData(data, parentNode);\n        return this.element;\n    };\n    /*\n    signatures:\n    - loadDataFromUrl(url, parent_node=null, on_finished=null)\n        loadDataFromUrl('/my_data');\n        loadDataFromUrl('/my_data', node1);\n        loadDataFromUrl('/my_data', node1, function() { console.log('finished'); });\n        loadDataFromUrl('/my_data', null, function() { console.log('finished'); });\n\n    - loadDataFromUrl(parent_node=null, on_finished=null)\n        loadDataFromUrl();\n        loadDataFromUrl(node1);\n        loadDataFromUrl(null, function() { console.log('finished'); });\n        loadDataFromUrl(node1, function() { console.log('finished'); });\n    */\n    JqTreeWidget.prototype.loadDataFromUrl = function (param1, param2, param3) {\n        if (typeof param1 === \"string\") {\n            // first parameter is url\n            this.doLoadDataFromUrl(param1, param2, param3 !== null && param3 !== void 0 ? param3 : null);\n        }\n        else {\n            // first parameter is not url\n            this.doLoadDataFromUrl(null, param1, param2);\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.reload = function (onFinished) {\n        this.doLoadDataFromUrl(null, null, onFinished);\n        return this.element;\n    };\n    JqTreeWidget.prototype.getNodeById = function (nodeId) {\n        return this.tree.getNodeById(nodeId);\n    };\n    JqTreeWidget.prototype.getNodeByName = function (name) {\n        return this.tree.getNodeByName(name);\n    };\n    JqTreeWidget.prototype.getNodeByNameMustExist = function (name) {\n        return this.tree.getNodeByNameMustExist(name);\n    };\n    JqTreeWidget.prototype.getNodesByProperty = function (key, value) {\n        return this.tree.getNodesByProperty(key, value);\n    };\n    JqTreeWidget.prototype.getNodeByHtmlElement = function (element) {\n        return this.getNode(jQuery(element));\n    };\n    JqTreeWidget.prototype.getNodeByCallback = function (callback) {\n        return this.tree.getNodeByCallback(callback);\n    };\n    JqTreeWidget.prototype.openNode = function (node, param1, param2) {\n        var _this = this;\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        var parseParams = function () {\n            var _a;\n            var onFinished;\n            var slide;\n            if (util_1.isFunction(param1)) {\n                onFinished = param1;\n                slide = null;\n            }\n            else {\n                slide = param1;\n                onFinished = param2;\n            }\n            if (slide == null) {\n                slide = (_a = _this.options.slide) !== null && _a !== void 0 ? _a : false;\n            }\n            return [slide, onFinished];\n        };\n        var _a = parseParams(), slide = _a[0], onFinished = _a[1];\n        this._openNode(node, slide, onFinished);\n        return this.element;\n    };\n    JqTreeWidget.prototype.closeNode = function (node, slideParam) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        var slide = slideParam !== null && slideParam !== void 0 ? slideParam : this.options.slide;\n        if (node.isFolder() || node.isEmptyFolder) {\n            new nodeElement_1.FolderElement(node, this).close(slide, this.options.animationSpeed);\n            this.saveState();\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.isDragging = function () {\n        return this.dndHandler.isDragging;\n    };\n    JqTreeWidget.prototype.refreshHitAreas = function () {\n        this.dndHandler.refresh();\n        return this.element;\n    };\n    JqTreeWidget.prototype.addNodeAfter = function (newNodeInfo, existingNode) {\n        var newNode = existingNode.addAfter(newNodeInfo);\n        if (newNode) {\n            this._refreshElements(existingNode.parent);\n        }\n        return newNode;\n    };\n    JqTreeWidget.prototype.addNodeBefore = function (newNodeInfo, existingNode) {\n        if (!existingNode) {\n            throw Error(PARAM_IS_EMPTY + \"existingNode\");\n        }\n        var newNode = existingNode.addBefore(newNodeInfo);\n        if (newNode) {\n            this._refreshElements(existingNode.parent);\n        }\n        return newNode;\n    };\n    JqTreeWidget.prototype.addParentNode = function (newNodeInfo, existingNode) {\n        if (!existingNode) {\n            throw Error(PARAM_IS_EMPTY + \"existingNode\");\n        }\n        var newNode = existingNode.addParent(newNodeInfo);\n        if (newNode) {\n            this._refreshElements(newNode.parent);\n        }\n        return newNode;\n    };\n    JqTreeWidget.prototype.removeNode = function (node) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        if (!node.parent) {\n            throw Error(\"Node has no parent\");\n        }\n        this.selectNodeHandler.removeFromSelection(node, true); // including children\n        var parent = node.parent;\n        node.remove();\n        this._refreshElements(parent);\n        return this.element;\n    };\n    JqTreeWidget.prototype.appendNode = function (newNodeInfo, parentNodeParam) {\n        var parentNode = parentNodeParam || this.tree;\n        var node = parentNode.append(newNodeInfo);\n        this._refreshElements(parentNode);\n        return node;\n    };\n    JqTreeWidget.prototype.prependNode = function (newNodeInfo, parentNodeParam) {\n        var parentNode = parentNodeParam !== null && parentNodeParam !== void 0 ? parentNodeParam : this.tree;\n        var node = parentNode.prepend(newNodeInfo);\n        this._refreshElements(parentNode);\n        return node;\n    };\n    JqTreeWidget.prototype.updateNode = function (node, data) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        var idIsChanged = typeof data === \"object\" && data.id && data.id !== node.id;\n        if (idIsChanged) {\n            this.tree.removeNodeFromIndex(node);\n        }\n        node.setData(data);\n        if (idIsChanged) {\n            this.tree.addNodeToIndex(node);\n        }\n        if (typeof data === \"object\" &&\n            data[\"children\"] &&\n            data[\"children\"] instanceof Array) {\n            node.removeChildren();\n            if (data.children.length) {\n                node.loadFromData(data.children);\n            }\n        }\n        this._refreshElements(node);\n        this.selectCurrentNode();\n        return this.element;\n    };\n    JqTreeWidget.prototype.moveNode = function (node, targetNode, position) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        if (!targetNode) {\n            throw Error(PARAM_IS_EMPTY + \"targetNode\");\n        }\n        var positionIndex = node_1.getPosition(position);\n        if (positionIndex !== undefined) {\n            this.tree.moveNode(node, targetNode, positionIndex);\n            this._refreshElements(null);\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.getStateFromStorage = function () {\n        return this.saveStateHandler.getStateFromStorage();\n    };\n    JqTreeWidget.prototype.addToSelection = function (node, mustSetFocus) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        this.selectNodeHandler.addToSelection(node);\n        this._getNodeElementForNode(node).select(mustSetFocus === undefined ? true : mustSetFocus);\n        this.saveState();\n        return this.element;\n    };\n    JqTreeWidget.prototype.getSelectedNodes = function () {\n        return this.selectNodeHandler.getSelectedNodes();\n    };\n    JqTreeWidget.prototype.isNodeSelected = function (node) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        return this.selectNodeHandler.isNodeSelected(node);\n    };\n    JqTreeWidget.prototype.removeFromSelection = function (node) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        this.selectNodeHandler.removeFromSelection(node);\n        this._getNodeElementForNode(node).deselect();\n        this.saveState();\n        return this.element;\n    };\n    JqTreeWidget.prototype.scrollToNode = function (node) {\n        if (!node) {\n            throw Error(NODE_PARAM_IS_EMPTY);\n        }\n        var nodeOffset = jQuery(node.element).offset();\n        var nodeTop = nodeOffset ? nodeOffset.top : 0;\n        var treeOffset = this.$el.offset();\n        var treeTop = treeOffset ? treeOffset.top : 0;\n        var top = nodeTop - treeTop;\n        this.scrollHandler.scrollToY(top);\n        return this.element;\n    };\n    JqTreeWidget.prototype.getState = function () {\n        return this.saveStateHandler.getState();\n    };\n    JqTreeWidget.prototype.setState = function (state) {\n        this.saveStateHandler.setInitialState(state);\n        this._refreshElements(null);\n        return this.element;\n    };\n    JqTreeWidget.prototype.setOption = function (option, value) {\n        this.options[option] = value;\n        return this.element;\n    };\n    JqTreeWidget.prototype.moveDown = function () {\n        var selectedNode = this.getSelectedNode();\n        if (selectedNode) {\n            this.keyHandler.moveDown(selectedNode);\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.moveUp = function () {\n        var selectedNode = this.getSelectedNode();\n        if (selectedNode) {\n            this.keyHandler.moveUp(selectedNode);\n        }\n        return this.element;\n    };\n    JqTreeWidget.prototype.getVersion = function () {\n        return version_1[\"default\"];\n    };\n    JqTreeWidget.prototype._triggerEvent = function (eventName, values) {\n        var event = jQuery.Event(eventName);\n        jQuery.extend(event, values);\n        this.element.trigger(event);\n        return event;\n    };\n    JqTreeWidget.prototype._openNode = function (node, slide, onFinished) {\n        var _this = this;\n        if (slide === void 0) { slide = true; }\n        var doOpenNode = function (_node, _slide, _onFinished) {\n            var folderElement = new nodeElement_1.FolderElement(_node, _this);\n            folderElement.open(_onFinished, _slide, _this.options.animationSpeed);\n        };\n        if (node.isFolder() || node.isEmptyFolder) {\n            if (node.load_on_demand) {\n                this.loadFolderOnDemand(node, slide, onFinished);\n            }\n            else {\n                var parent_1 = node.parent;\n                while (parent_1) {\n                    // nb: do not open root element\n                    if (parent_1.parent) {\n                        doOpenNode(parent_1, false, null);\n                    }\n                    parent_1 = parent_1.parent;\n                }\n                doOpenNode(node, slide, onFinished);\n                this.saveState();\n            }\n        }\n    };\n    /*\n    Redraw the tree or part of the tree.\n     from_node: redraw this subtree\n    */\n    JqTreeWidget.prototype._refreshElements = function (fromNode) {\n        this.renderer.render(fromNode);\n        this._triggerEvent(\"tree.refresh\");\n    };\n    JqTreeWidget.prototype._getNodeElementForNode = function (node) {\n        if (node.isFolder()) {\n            return new nodeElement_1.FolderElement(node, this);\n        }\n        else {\n            return new nodeElement_1.NodeElement(node, this);\n        }\n    };\n    JqTreeWidget.prototype._getNodeElement = function ($element) {\n        var node = this.getNode($element);\n        if (node) {\n            return this._getNodeElementForNode(node);\n        }\n        else {\n            return null;\n        }\n    };\n    JqTreeWidget.prototype._containsElement = function (element) {\n        var node = this.getNode(jQuery(element));\n        return node != null && node.tree === this.tree;\n    };\n    JqTreeWidget.prototype._getScrollLeft = function () {\n        return this.scrollHandler.getScrollLeft();\n    };\n    JqTreeWidget.prototype.init = function () {\n        _super.prototype.init.call(this);\n        this.element = this.$el;\n        this.mouseDelay = 300;\n        this.isInitialized = false;\n        this.options.rtl = this.getRtlOption();\n        if (this.options.closedIcon == null) {\n            this.options.closedIcon = this.getDefaultClosedIcon();\n        }\n        this.renderer = new elementsRenderer_1[\"default\"](this);\n        this.dataLoader = new dataLoader_1[\"default\"](this);\n        this.saveStateHandler = new saveStateHandler_1[\"default\"](this);\n        this.selectNodeHandler = new selectNodeHandler_1[\"default\"](this);\n        this.dndHandler = new dragAndDropHandler_1.DragAndDropHandler(this);\n        this.scrollHandler = new scrollHandler_1[\"default\"](this);\n        this.keyHandler = new keyHandler_1[\"default\"](this);\n        this.initData();\n        this.element.click(this.handleClick);\n        this.element.dblclick(this.handleDblclick);\n        if (this.options.useContextMenu) {\n            this.element.on(\"contextmenu\", this.handleContextmenu);\n        }\n    };\n    JqTreeWidget.prototype.deinit = function () {\n        this.element.empty();\n        this.element.off();\n        this.keyHandler.deinit();\n        this.tree = new node_1.Node({}, true);\n        _super.prototype.deinit.call(this);\n    };\n    JqTreeWidget.prototype.mouseCapture = function (positionInfo) {\n        if (this.options.dragAndDrop) {\n            return this.dndHandler.mouseCapture(positionInfo);\n        }\n        else {\n            return false;\n        }\n    };\n    JqTreeWidget.prototype.mouseStart = function (positionInfo) {\n        if (this.options.dragAndDrop) {\n            return this.dndHandler.mouseStart(positionInfo);\n        }\n        else {\n            return false;\n        }\n    };\n    JqTreeWidget.prototype.mouseDrag = function (positionInfo) {\n        if (this.options.dragAndDrop) {\n            var result = this.dndHandler.mouseDrag(positionInfo);\n            this.scrollHandler.checkScrolling();\n            return result;\n        }\n        else {\n            return false;\n        }\n    };\n    JqTreeWidget.prototype.mouseStop = function (positionInfo) {\n        if (this.options.dragAndDrop) {\n            return this.dndHandler.mouseStop(positionInfo);\n        }\n        else {\n            return false;\n        }\n    };\n    JqTreeWidget.prototype.initData = function () {\n        if (this.options.data) {\n            this.doLoadData(this.options.data, null);\n        }\n        else {\n            var dataUrl = this.getDataUrlInfo(null);\n            if (dataUrl) {\n                this.doLoadDataFromUrl(null, null, null);\n            }\n            else {\n                this.doLoadData([], null);\n            }\n        }\n    };\n    JqTreeWidget.prototype.getDataUrlInfo = function (node) {\n        var _this = this;\n        var dataUrl = this.options.dataUrl || this.element.data(\"url\");\n        var getUrlFromString = function (url) {\n            var urlInfo = { url: url };\n            setUrlInfoData(urlInfo);\n            return urlInfo;\n        };\n        var setUrlInfoData = function (urlInfo) {\n            if (node === null || node === void 0 ? void 0 : node.id) {\n                // Load on demand of a subtree; add node parameter\n                var data = { node: node.id };\n                urlInfo[\"data\"] = data;\n            }\n            else {\n                // Add selected_node parameter\n                var selectedNodeId = _this.getNodeIdToBeSelected();\n                if (selectedNodeId) {\n                    var data = { selected_node: selectedNodeId };\n                    urlInfo[\"data\"] = data;\n                }\n            }\n        };\n        if (typeof dataUrl === \"function\") {\n            return dataUrl(node);\n        }\n        else if (typeof dataUrl === \"string\") {\n            return getUrlFromString(dataUrl);\n        }\n        else if (dataUrl && typeof dataUrl === \"object\") {\n            setUrlInfoData(dataUrl);\n            return dataUrl;\n        }\n        else {\n            return null;\n        }\n    };\n    JqTreeWidget.prototype.getNodeIdToBeSelected = function () {\n        if (this.options.saveState) {\n            return this.saveStateHandler.getNodeIdToBeSelected();\n        }\n        else {\n            return null;\n        }\n    };\n    JqTreeWidget.prototype.initTree = function (data) {\n        var _this = this;\n        var doInit = function () {\n            if (!_this.isInitialized) {\n                _this.isInitialized = true;\n                _this._triggerEvent(\"tree.init\");\n            }\n        };\n        if (!this.options.nodeClass) {\n            return;\n        }\n        this.tree = new this.options.nodeClass(null, true, this.options.nodeClass);\n        this.selectNodeHandler.clear();\n        this.tree.loadFromData(data);\n        var mustLoadOnDemand = this.setInitialState();\n        this._refreshElements(null);\n        if (!mustLoadOnDemand) {\n            doInit();\n        }\n        else {\n            // Load data on demand and then init the tree\n            this.setInitialStateOnDemand(doInit);\n        }\n    };\n    // Set initial state, either by restoring the state or auto-opening nodes\n    // result: must load nodes on demand?\n    JqTreeWidget.prototype.setInitialState = function () {\n        var _this = this;\n        var restoreState = function () {\n            // result: is state restored, must load on demand?\n            if (!_this.options.saveState) {\n                return [false, false];\n            }\n            else {\n                var state = _this.saveStateHandler.getStateFromStorage();\n                if (!state) {\n                    return [false, false];\n                }\n                else {\n                    var mustLoadOnDemand_1 = _this.saveStateHandler.setInitialState(state);\n                    // return true: the state is restored\n                    return [true, mustLoadOnDemand_1];\n                }\n            }\n        };\n        var autoOpenNodes = function () {\n            // result: must load on demand?\n            if (_this.options.autoOpen === false) {\n                return false;\n            }\n            var maxLevel = _this.getAutoOpenMaxLevel();\n            var mustLoadOnDemand = false;\n            _this.tree.iterate(function (node, level) {\n                if (node.load_on_demand) {\n                    mustLoadOnDemand = true;\n                    return false;\n                }\n                else if (!node.hasChildren()) {\n                    return false;\n                }\n                else {\n                    node.is_open = true;\n                    return level !== maxLevel;\n                }\n            });\n            return mustLoadOnDemand;\n        };\n        var _a = restoreState(), isRestored = _a[0], mustLoadOnDemand = _a[1]; // eslint-disable-line prefer-const\n        if (!isRestored) {\n            mustLoadOnDemand = autoOpenNodes();\n        }\n        return mustLoadOnDemand;\n    };\n    // Set the initial state for nodes that are loaded on demand\n    // Call cb_finished when done\n    JqTreeWidget.prototype.setInitialStateOnDemand = function (cbFinished) {\n        var _this = this;\n        var restoreState = function () {\n            if (!_this.options.saveState) {\n                return false;\n            }\n            else {\n                var state = _this.saveStateHandler.getStateFromStorage();\n                if (!state) {\n                    return false;\n                }\n                else {\n                    _this.saveStateHandler.setInitialStateOnDemand(state, cbFinished);\n                    return true;\n                }\n            }\n        };\n        var autoOpenNodes = function () {\n            var maxLevel = _this.getAutoOpenMaxLevel();\n            var loadingCount = 0;\n            var loadAndOpenNode = function (node) {\n                loadingCount += 1;\n                _this._openNode(node, false, function () {\n                    loadingCount -= 1;\n                    openNodes();\n                });\n            };\n            var openNodes = function () {\n                _this.tree.iterate(function (node, level) {\n                    if (node.load_on_demand) {\n                        if (!node.is_loading) {\n                            loadAndOpenNode(node);\n                        }\n                        return false;\n                    }\n                    else {\n                        _this._openNode(node, false, null);\n                        return level !== maxLevel;\n                    }\n                });\n                if (loadingCount === 0) {\n                    cbFinished();\n                }\n            };\n            openNodes();\n        };\n        if (!restoreState()) {\n            autoOpenNodes();\n        }\n    };\n    JqTreeWidget.prototype.getAutoOpenMaxLevel = function () {\n        if (this.options.autoOpen === true) {\n            return -1;\n        }\n        else if (typeof this.options.autoOpen === \"number\") {\n            return this.options.autoOpen;\n        }\n        else if (typeof this.options.autoOpen === \"string\") {\n            return parseInt(this.options.autoOpen, 10);\n        }\n        else {\n            return 0;\n        }\n    };\n    JqTreeWidget.prototype.getClickTarget = function (element) {\n        var $target = jQuery(element);\n        var $button = $target.closest(\".jqtree-toggler\");\n        if ($button.length) {\n            var node = this.getNode($button);\n            if (node) {\n                return {\n                    type: \"button\",\n                    node: node\n                };\n            }\n        }\n        else {\n            var $el = $target.closest(\".jqtree-element\");\n            if ($el.length) {\n                var node = this.getNode($el);\n                if (node) {\n                    return {\n                        type: \"label\",\n                        node: node\n                    };\n                }\n            }\n        }\n        return null;\n    };\n    JqTreeWidget.prototype.getNode = function ($element) {\n        var $li = $element.closest(\"li.jqtree_common\");\n        if ($li.length === 0) {\n            return null;\n        }\n        else {\n            return $li.data(\"node\");\n        }\n    };\n    JqTreeWidget.prototype.saveState = function () {\n        if (this.options.saveState) {\n            this.saveStateHandler.saveState();\n        }\n    };\n    JqTreeWidget.prototype.selectCurrentNode = function () {\n        var node = this.getSelectedNode();\n        if (node) {\n            var nodeElement = this._getNodeElementForNode(node);\n            if (nodeElement) {\n                nodeElement.select(true);\n            }\n        }\n    };\n    JqTreeWidget.prototype.deselectCurrentNode = function () {\n        var node = this.getSelectedNode();\n        if (node) {\n            this.removeFromSelection(node);\n        }\n    };\n    JqTreeWidget.prototype.getDefaultClosedIcon = function () {\n        if (this.options.rtl) {\n            // triangle to the left\n            return \"&#x25c0;\";\n        }\n        else {\n            // triangle to the right\n            return \"&#x25ba;\";\n        }\n    };\n    JqTreeWidget.prototype.getRtlOption = function () {\n        if (this.options.rtl != null) {\n            return this.options.rtl;\n        }\n        else {\n            var dataRtl = this.element.data(\"rtl\");\n            if (dataRtl !== null &&\n                dataRtl !== false &&\n                dataRtl !== undefined) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n    };\n    JqTreeWidget.prototype.doSelectNode = function (node, optionsParam) {\n        var _this = this;\n        var saveState = function () {\n            if (_this.options.saveState) {\n                _this.saveStateHandler.saveState();\n            }\n        };\n        if (!node) {\n            // Called with empty node -> deselect current node\n            this.deselectCurrentNode();\n            saveState();\n            return;\n        }\n        var defaultOptions = { mustSetFocus: true, mustToggle: true };\n        var selectOptions = __assign(__assign({}, defaultOptions), (optionsParam || {}));\n        var canSelect = function () {\n            if (_this.options.onCanSelectNode) {\n                return (_this.options.selectable === true &&\n                    _this.options.onCanSelectNode(node));\n            }\n            else {\n                return _this.options.selectable === true;\n            }\n        };\n        var openParents = function () {\n            var parent = node.parent;\n            if (parent && parent.parent && !parent.is_open) {\n                _this.openNode(parent, false);\n            }\n        };\n        if (!canSelect()) {\n            return;\n        }\n        if (this.selectNodeHandler.isNodeSelected(node)) {\n            if (selectOptions.mustToggle) {\n                this.deselectCurrentNode();\n                this._triggerEvent(\"tree.select\", {\n                    node: null,\n                    previous_node: node\n                });\n            }\n        }\n        else {\n            var deselectedNode = this.getSelectedNode() || null;\n            this.deselectCurrentNode();\n            this.addToSelection(node, selectOptions.mustSetFocus);\n            this._triggerEvent(\"tree.select\", {\n                node: node,\n                deselected_node: deselectedNode\n            });\n            openParents();\n        }\n        saveState();\n    };\n    JqTreeWidget.prototype.doLoadData = function (data, parentNode) {\n        if (!data) {\n            return;\n        }\n        else {\n            this._triggerEvent(\"tree.load_data\", { tree_data: data });\n            if (parentNode) {\n                this.deselectNodes(parentNode);\n                this.loadSubtree(data, parentNode);\n            }\n            else {\n                this.initTree(data);\n            }\n            if (this.isDragging()) {\n                this.dndHandler.refresh();\n            }\n        }\n    };\n    JqTreeWidget.prototype.deselectNodes = function (parentNode) {\n        var selectedNodesUnderParent = this.selectNodeHandler.getSelectedNodesUnder(parentNode);\n        for (var _i = 0, selectedNodesUnderParent_1 = selectedNodesUnderParent; _i < selectedNodesUnderParent_1.length; _i++) {\n            var n = selectedNodesUnderParent_1[_i];\n            this.selectNodeHandler.removeFromSelection(n);\n        }\n    };\n    JqTreeWidget.prototype.loadSubtree = function (data, parentNode) {\n        parentNode.loadFromData(data);\n        parentNode.load_on_demand = false;\n        parentNode.is_loading = false;\n        this._refreshElements(parentNode);\n    };\n    JqTreeWidget.prototype.doLoadDataFromUrl = function (urlInfoParam, parentNode, onFinished) {\n        var urlInfo = urlInfoParam || this.getDataUrlInfo(parentNode);\n        this.dataLoader.loadFromUrl(urlInfo, parentNode, onFinished);\n    };\n    JqTreeWidget.prototype.loadFolderOnDemand = function (node, slide, onFinished) {\n        var _this = this;\n        if (slide === void 0) { slide = true; }\n        node.is_loading = true;\n        this.doLoadDataFromUrl(null, node, function () {\n            _this._openNode(node, slide, onFinished);\n        });\n    };\n    JqTreeWidget.defaults = {\n        animationSpeed: \"fast\",\n        autoOpen: false,\n        saveState: false,\n        dragAndDrop: false,\n        selectable: true,\n        useContextMenu: true,\n        onCanSelectNode: undefined,\n        onSetStateFromStorage: undefined,\n        onGetStateFromStorage: undefined,\n        onCreateLi: undefined,\n        onIsMoveHandle: undefined,\n        // Can this node be moved?\n        onCanMove: undefined,\n        // Can this node be moved to this position? function(moved_node, target_node, position)\n        onCanMoveTo: undefined,\n        onLoadFailed: undefined,\n        autoEscape: true,\n        dataUrl: undefined,\n        // The symbol to use for a closed node -  BLACK RIGHT-POINTING POINTER\n        // http://www.fileformat.info/info/unicode/char/25ba/index.htm\n        closedIcon: undefined,\n        // The symbol to use for an open node -  BLACK DOWN-POINTING TRIANGLE\n        // http://www.fileformat.info/info/unicode/char/25bc/index.htm\n        openedIcon: \"&#x25bc;\",\n        slide: true,\n        nodeClass: node_1.Node,\n        dataFilter: undefined,\n        keyboardSupport: true,\n        openFolderDelay: 500,\n        rtl: undefined,\n        onDragMove: undefined,\n        onDragStop: undefined,\n        buttonLeft: true,\n        onLoading: undefined,\n        showEmptyFolder: false,\n        tabIndex: 0\n    };\n    return JqTreeWidget;\n}(mouse_widget_1[\"default\"]));\nexports.JqTreeWidget = JqTreeWidget;\nsimple_widget_1[\"default\"].register(JqTreeWidget, \"tree\");\n","\"use strict\";\nexports.__esModule = true;\nvar version = \"1.5.0\";\nexports[\"default\"] = version;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nexports.HitAreasGenerator = exports.DragAndDropHandler = void 0;\nvar jQuery = require(\"jquery\");\nvar node_1 = require(\"./node\");\nvar DragAndDropHandler = /** @class */ (function () {\n    function DragAndDropHandler(treeWidget) {\n        this.treeWidget = treeWidget;\n        this.hoveredArea = null;\n        this.hitAreas = [];\n        this.isDragging = false;\n        this.currentItem = null;\n        this.positionInfo = null;\n    }\n    DragAndDropHandler.prototype.mouseCapture = function (positionInfo) {\n        var $element = jQuery(positionInfo.target);\n        if (!this.mustCaptureElement($element)) {\n            return null;\n        }\n        if (this.treeWidget.options.onIsMoveHandle &&\n            !this.treeWidget.options.onIsMoveHandle($element)) {\n            return null;\n        }\n        var nodeElement = this.treeWidget._getNodeElement($element);\n        if (nodeElement && this.treeWidget.options.onCanMove) {\n            if (!this.treeWidget.options.onCanMove(nodeElement.node)) {\n                nodeElement = null;\n            }\n        }\n        this.currentItem = nodeElement;\n        return this.currentItem != null;\n    };\n    DragAndDropHandler.prototype.generateHitAreas = function () {\n        if (!this.currentItem) {\n            this.hitAreas = [];\n        }\n        else {\n            var hitAreasGenerator = new HitAreasGenerator(this.treeWidget.tree, this.currentItem.node, this.getTreeDimensions().bottom);\n            this.hitAreas = hitAreasGenerator.generate();\n        }\n    };\n    DragAndDropHandler.prototype.mouseStart = function (positionInfo) {\n        var _a;\n        if (!this.currentItem ||\n            positionInfo.pageX === undefined ||\n            positionInfo.pageY === undefined) {\n            return false;\n        }\n        else {\n            this.refresh();\n            var offset = jQuery(positionInfo.target).offset();\n            var left = offset ? offset.left : 0;\n            var top_1 = offset ? offset.top : 0;\n            var node = this.currentItem.node;\n            this.dragElement = new DragElement(node.name, positionInfo.pageX - left, positionInfo.pageY - top_1, this.treeWidget.element, (_a = this.treeWidget.options.autoEscape) !== null && _a !== void 0 ? _a : true);\n            this.isDragging = true;\n            this.positionInfo = positionInfo;\n            this.currentItem.$element.addClass(\"jqtree-moving\");\n            return true;\n        }\n    };\n    DragAndDropHandler.prototype.mouseDrag = function (positionInfo) {\n        if (!this.currentItem ||\n            !this.dragElement ||\n            positionInfo.pageX === undefined ||\n            positionInfo.pageY === undefined) {\n            return false;\n        }\n        else {\n            this.dragElement.move(positionInfo.pageX, positionInfo.pageY);\n            this.positionInfo = positionInfo;\n            var area = this.findHoveredArea(positionInfo.pageX, positionInfo.pageY);\n            var canMoveTo = this.canMoveToArea(area);\n            if (canMoveTo && area) {\n                if (!area.node.isFolder()) {\n                    this.stopOpenFolderTimer();\n                }\n                if (this.hoveredArea !== area) {\n                    this.hoveredArea = area;\n                    // If this is a closed folder, start timer to open it\n                    if (this.mustOpenFolderTimer(area)) {\n                        this.startOpenFolderTimer(area.node);\n                    }\n                    else {\n                        this.stopOpenFolderTimer();\n                    }\n                    this.updateDropHint();\n                }\n            }\n            else {\n                this.removeHover();\n                this.removeDropHint();\n                this.stopOpenFolderTimer();\n            }\n            if (!area) {\n                if (this.treeWidget.options.onDragMove) {\n                    this.treeWidget.options.onDragMove(this.currentItem.node, positionInfo.originalEvent);\n                }\n            }\n            return true;\n        }\n    };\n    DragAndDropHandler.prototype.mouseStop = function (positionInfo) {\n        this.moveItem(positionInfo);\n        this.clear();\n        this.removeHover();\n        this.removeDropHint();\n        this.removeHitAreas();\n        var currentItem = this.currentItem;\n        if (this.currentItem) {\n            this.currentItem.$element.removeClass(\"jqtree-moving\");\n            this.currentItem = null;\n        }\n        this.isDragging = false;\n        this.positionInfo = null;\n        if (!this.hoveredArea && currentItem) {\n            if (this.treeWidget.options.onDragStop) {\n                this.treeWidget.options.onDragStop(currentItem.node, positionInfo.originalEvent);\n            }\n        }\n        return false;\n    };\n    DragAndDropHandler.prototype.refresh = function () {\n        this.removeHitAreas();\n        if (this.currentItem) {\n            this.generateHitAreas();\n            this.currentItem = this.treeWidget._getNodeElementForNode(this.currentItem.node);\n            if (this.isDragging) {\n                this.currentItem.$element.addClass(\"jqtree-moving\");\n            }\n        }\n    };\n    DragAndDropHandler.prototype.mustCaptureElement = function ($element) {\n        return !$element.is(\"input,select,textarea\");\n    };\n    DragAndDropHandler.prototype.canMoveToArea = function (area) {\n        if (!area || !this.currentItem) {\n            return false;\n        }\n        else if (this.treeWidget.options.onCanMoveTo) {\n            var positionName = node_1.getPositionName(area.position);\n            return this.treeWidget.options.onCanMoveTo(this.currentItem.node, area.node, positionName);\n        }\n        else {\n            return true;\n        }\n    };\n    DragAndDropHandler.prototype.removeHitAreas = function () {\n        this.hitAreas = [];\n    };\n    DragAndDropHandler.prototype.clear = function () {\n        if (this.dragElement) {\n            this.dragElement.remove();\n            this.dragElement = null;\n        }\n    };\n    DragAndDropHandler.prototype.removeDropHint = function () {\n        if (this.previousGhost) {\n            this.previousGhost.remove();\n        }\n    };\n    DragAndDropHandler.prototype.removeHover = function () {\n        this.hoveredArea = null;\n    };\n    DragAndDropHandler.prototype.findHoveredArea = function (x, y) {\n        var dimensions = this.getTreeDimensions();\n        if (x < dimensions.left ||\n            y < dimensions.top ||\n            x > dimensions.right ||\n            y > dimensions.bottom) {\n            return null;\n        }\n        var low = 0;\n        var high = this.hitAreas.length;\n        while (low < high) {\n            var mid = (low + high) >> 1;\n            var area = this.hitAreas[mid];\n            if (y < area.top) {\n                high = mid;\n            }\n            else if (y > area.bottom) {\n                low = mid + 1;\n            }\n            else {\n                return area;\n            }\n        }\n        return null;\n    };\n    DragAndDropHandler.prototype.mustOpenFolderTimer = function (area) {\n        var node = area.node;\n        return (node.isFolder() &&\n            !node.is_open &&\n            area.position === node_1.Position.Inside);\n    };\n    DragAndDropHandler.prototype.updateDropHint = function () {\n        if (!this.hoveredArea) {\n            return;\n        }\n        // remove previous drop hint\n        this.removeDropHint();\n        // add new drop hint\n        var nodeElement = this.treeWidget._getNodeElementForNode(this.hoveredArea.node);\n        this.previousGhost = nodeElement.addDropHint(this.hoveredArea.position);\n    };\n    DragAndDropHandler.prototype.startOpenFolderTimer = function (folder) {\n        var _this = this;\n        var openFolder = function () {\n            _this.treeWidget._openNode(folder, _this.treeWidget.options.slide, function () {\n                _this.refresh();\n                _this.updateDropHint();\n            });\n        };\n        this.stopOpenFolderTimer();\n        this.openFolderTimer = window.setTimeout(openFolder, this.treeWidget.options.openFolderDelay);\n    };\n    DragAndDropHandler.prototype.stopOpenFolderTimer = function () {\n        if (this.openFolderTimer) {\n            clearTimeout(this.openFolderTimer);\n            this.openFolderTimer = null;\n        }\n    };\n    DragAndDropHandler.prototype.moveItem = function (positionInfo) {\n        var _this = this;\n        if (this.currentItem &&\n            this.hoveredArea &&\n            this.hoveredArea.position !== node_1.Position.None &&\n            this.canMoveToArea(this.hoveredArea)) {\n            var movedNode_1 = this.currentItem.node;\n            var targetNode_1 = this.hoveredArea.node;\n            var position_1 = this.hoveredArea.position;\n            var previousParent = movedNode_1.parent;\n            if (position_1 === node_1.Position.Inside) {\n                this.hoveredArea.node.is_open = true;\n            }\n            var doMove = function () {\n                _this.treeWidget.tree.moveNode(movedNode_1, targetNode_1, position_1);\n                _this.treeWidget.element.empty();\n                _this.treeWidget._refreshElements(null);\n            };\n            var event_1 = this.treeWidget._triggerEvent(\"tree.move\", {\n                move_info: {\n                    moved_node: movedNode_1,\n                    target_node: targetNode_1,\n                    position: node_1.getPositionName(position_1),\n                    previous_parent: previousParent,\n                    do_move: doMove,\n                    original_event: positionInfo.originalEvent\n                }\n            });\n            if (!event_1.isDefaultPrevented()) {\n                doMove();\n            }\n        }\n    };\n    DragAndDropHandler.prototype.getTreeDimensions = function () {\n        // Return the dimensions of the tree. Add a margin to the bottom to allow\n        // to drag-and-drop after the last element.\n        var offset = this.treeWidget.element.offset();\n        if (!offset) {\n            return { left: 0, top: 0, right: 0, bottom: 0 };\n        }\n        else {\n            var el = this.treeWidget.element;\n            var width = el.width() || 0;\n            var height = el.height() || 0;\n            var left = offset.left + this.treeWidget._getScrollLeft();\n            return {\n                left: left,\n                top: offset.top,\n                right: left + width,\n                bottom: offset.top + height + 16\n            };\n        }\n    };\n    return DragAndDropHandler;\n}());\nexports.DragAndDropHandler = DragAndDropHandler;\nvar VisibleNodeIterator = /** @class */ (function () {\n    function VisibleNodeIterator(tree) {\n        this.tree = tree;\n    }\n    VisibleNodeIterator.prototype.iterate = function () {\n        var _this = this;\n        var isFirstNode = true;\n        var _iterateNode = function (node, nextNode) {\n            var mustIterateInside = (node.is_open || !node.element) && node.hasChildren();\n            var $element = null;\n            if (node.element) {\n                $element = jQuery(node.element);\n                if (!$element.is(\":visible\")) {\n                    return;\n                }\n                if (isFirstNode) {\n                    _this.handleFirstNode(node);\n                    isFirstNode = false;\n                }\n                if (!node.hasChildren()) {\n                    _this.handleNode(node, nextNode, $element);\n                }\n                else if (node.is_open) {\n                    if (!_this.handleOpenFolder(node, $element)) {\n                        mustIterateInside = false;\n                    }\n                }\n                else {\n                    _this.handleClosedFolder(node, nextNode, $element);\n                }\n            }\n            if (mustIterateInside) {\n                var childrenLength_1 = node.children.length;\n                node.children.forEach(function (_, i) {\n                    if (i === childrenLength_1 - 1) {\n                        _iterateNode(node.children[i], null);\n                    }\n                    else {\n                        _iterateNode(node.children[i], node.children[i + 1]);\n                    }\n                });\n                if (node.is_open && $element) {\n                    _this.handleAfterOpenFolder(node, nextNode);\n                }\n            }\n        };\n        _iterateNode(this.tree, null);\n    };\n    return VisibleNodeIterator;\n}());\nvar HitAreasGenerator = /** @class */ (function (_super) {\n    __extends(HitAreasGenerator, _super);\n    function HitAreasGenerator(tree, currentNode, treeBottom) {\n        var _this = _super.call(this, tree) || this;\n        _this.currentNode = currentNode;\n        _this.treeBottom = treeBottom;\n        return _this;\n    }\n    HitAreasGenerator.prototype.generate = function () {\n        this.positions = [];\n        this.lastTop = 0;\n        this.iterate();\n        return this.generateHitAreas(this.positions);\n    };\n    HitAreasGenerator.prototype.generateHitAreas = function (positions) {\n        var previousTop = -1;\n        var group = [];\n        var hitAreas = [];\n        for (var _i = 0, positions_1 = positions; _i < positions_1.length; _i++) {\n            var position = positions_1[_i];\n            if (position.top !== previousTop && group.length) {\n                if (group.length) {\n                    this.generateHitAreasForGroup(hitAreas, group, previousTop, position.top);\n                }\n                previousTop = position.top;\n                group = [];\n            }\n            group.push(position);\n        }\n        this.generateHitAreasForGroup(hitAreas, group, previousTop, this.treeBottom);\n        return hitAreas;\n    };\n    HitAreasGenerator.prototype.handleOpenFolder = function (node, $element) {\n        if (node === this.currentNode) {\n            // Cannot move inside current item\n            // Stop iterating\n            return false;\n        }\n        // Cannot move before current item\n        if (node.children[0] !== this.currentNode) {\n            this.addPosition(node, node_1.Position.Inside, this.getTop($element));\n        }\n        // Continue iterating\n        return true;\n    };\n    HitAreasGenerator.prototype.handleClosedFolder = function (node, nextNode, $element) {\n        var top = this.getTop($element);\n        if (node === this.currentNode) {\n            // Cannot move after current item\n            this.addPosition(node, node_1.Position.None, top);\n        }\n        else {\n            this.addPosition(node, node_1.Position.Inside, top);\n            // Cannot move before current item\n            if (nextNode !== this.currentNode) {\n                this.addPosition(node, node_1.Position.After, top);\n            }\n        }\n    };\n    HitAreasGenerator.prototype.handleFirstNode = function (node) {\n        if (node !== this.currentNode) {\n            this.addPosition(node, node_1.Position.Before, this.getTop(jQuery(node.element)));\n        }\n    };\n    HitAreasGenerator.prototype.handleAfterOpenFolder = function (node, nextNode) {\n        if (node === this.currentNode || nextNode === this.currentNode) {\n            // Cannot move before or after current item\n            this.addPosition(node, node_1.Position.None, this.lastTop);\n        }\n        else {\n            this.addPosition(node, node_1.Position.After, this.lastTop);\n        }\n    };\n    HitAreasGenerator.prototype.handleNode = function (node, nextNode, $element) {\n        var top = this.getTop($element);\n        if (node === this.currentNode) {\n            // Cannot move inside current item\n            this.addPosition(node, node_1.Position.None, top);\n        }\n        else {\n            this.addPosition(node, node_1.Position.Inside, top);\n        }\n        if (nextNode === this.currentNode || node === this.currentNode) {\n            // Cannot move before or after current item\n            this.addPosition(node, node_1.Position.None, top);\n        }\n        else {\n            this.addPosition(node, node_1.Position.After, top);\n        }\n    };\n    HitAreasGenerator.prototype.getTop = function ($element) {\n        var offset = $element.offset();\n        return offset ? offset.top : 0;\n    };\n    HitAreasGenerator.prototype.addPosition = function (node, position, top) {\n        var area = {\n            top: top,\n            bottom: 0,\n            node: node,\n            position: position\n        };\n        this.positions.push(area);\n        this.lastTop = top;\n    };\n    HitAreasGenerator.prototype.generateHitAreasForGroup = function (hitAreas, positionsInGroup, top, bottom) {\n        // limit positions in group\n        var positionCount = Math.min(positionsInGroup.length, 4);\n        var areaHeight = Math.round((bottom - top) / positionCount);\n        var areaTop = top;\n        var i = 0;\n        while (i < positionCount) {\n            var position = positionsInGroup[i];\n            hitAreas.push({\n                top: areaTop,\n                bottom: areaTop + areaHeight,\n                node: position.node,\n                position: position.position\n            });\n            areaTop += areaHeight;\n            i += 1;\n        }\n    };\n    return HitAreasGenerator;\n}(VisibleNodeIterator));\nexports.HitAreasGenerator = HitAreasGenerator;\nvar DragElement = /** @class */ (function () {\n    function DragElement(nodeName, offsetX, offsetY, $tree, autoEscape) {\n        this.offsetX = offsetX;\n        this.offsetY = offsetY;\n        this.$element = jQuery(\"<span>\").addClass(\"jqtree-title jqtree-dragging\");\n        if (autoEscape) {\n            this.$element.text(nodeName);\n        }\n        else {\n            this.$element.html(nodeName);\n        }\n        this.$element.css(\"position\", \"absolute\");\n        $tree.append(this.$element);\n    }\n    DragElement.prototype.move = function (pageX, pageY) {\n        this.$element.offset({\n            left: pageX - this.offsetX,\n            top: pageY - this.offsetY\n        });\n    };\n    DragElement.prototype.remove = function () {\n        this.$element.remove();\n    };\n    return DragElement;\n}());\n","\"use strict\";\nexports.__esModule = true;\nvar util_1 = require(\"./util\");\nvar ElementsRenderer = /** @class */ (function () {\n    function ElementsRenderer(treeWidget) {\n        this.treeWidget = treeWidget;\n        this.openedIconElement = this.createButtonElement(treeWidget.options.openedIcon || \"+\");\n        this.closedIconElement = this.createButtonElement(treeWidget.options.closedIcon || \"-\");\n    }\n    ElementsRenderer.prototype.render = function (fromNode) {\n        if (fromNode && fromNode.parent) {\n            this.renderFromNode(fromNode);\n        }\n        else {\n            this.renderFromRoot();\n        }\n    };\n    ElementsRenderer.prototype.renderFromRoot = function () {\n        var $element = this.treeWidget.element;\n        $element.empty();\n        this.createDomElements($element[0], this.treeWidget.tree.children, true, 1);\n    };\n    ElementsRenderer.prototype.renderFromNode = function (node) {\n        // remember current li\n        var $previousLi = jQuery(node.element);\n        // create element\n        var li = this.createLi(node, node.getLevel());\n        this.attachNodeData(node, li);\n        // add element to dom\n        $previousLi.after(li);\n        // remove previous li\n        $previousLi.remove();\n        // create children\n        if (node.children) {\n            this.createDomElements(li, node.children, false, node.getLevel() + 1);\n        }\n    };\n    ElementsRenderer.prototype.createDomElements = function (element, children, isRootNode, level) {\n        var ul = this.createUl(isRootNode);\n        element.appendChild(ul);\n        for (var _i = 0, children_1 = children; _i < children_1.length; _i++) {\n            var child = children_1[_i];\n            var li = this.createLi(child, level);\n            ul.appendChild(li);\n            this.attachNodeData(child, li);\n            if (child.hasChildren()) {\n                this.createDomElements(li, child.children, false, level + 1);\n            }\n        }\n    };\n    ElementsRenderer.prototype.attachNodeData = function (node, li) {\n        node.element = li;\n        jQuery(li).data(\"node\", node);\n    };\n    ElementsRenderer.prototype.createUl = function (isRootNode) {\n        var classString;\n        var role;\n        if (!isRootNode) {\n            classString = \"\";\n            role = \"group\";\n        }\n        else {\n            classString = \"jqtree-tree\";\n            role = \"tree\";\n            if (this.treeWidget.options.rtl) {\n                classString += \" jqtree-rtl\";\n            }\n        }\n        if (this.treeWidget.options.dragAndDrop) {\n            classString += \" jqtree-dnd\";\n        }\n        var ul = document.createElement(\"ul\");\n        ul.className = \"jqtree_common \" + classString;\n        ul.setAttribute(\"role\", role);\n        return ul;\n    };\n    ElementsRenderer.prototype.createLi = function (node, level) {\n        var isSelected = Boolean(this.treeWidget.selectNodeHandler.isNodeSelected(node));\n        var mustShowFolder = node.isFolder() ||\n            (node.isEmptyFolder && this.treeWidget.options.showEmptyFolder);\n        var li = mustShowFolder\n            ? this.createFolderLi(node, level, isSelected)\n            : this.createNodeLi(node, level, isSelected);\n        if (this.treeWidget.options.onCreateLi) {\n            this.treeWidget.options.onCreateLi(node, jQuery(li), isSelected);\n        }\n        return li;\n    };\n    ElementsRenderer.prototype.createFolderLi = function (node, level, isSelected) {\n        var buttonClasses = this.getButtonClasses(node);\n        var folderClasses = this.getFolderClasses(node, isSelected);\n        var iconElement = node.is_open\n            ? this.openedIconElement\n            : this.closedIconElement;\n        // li\n        var li = document.createElement(\"li\");\n        li.className = \"jqtree_common \" + folderClasses;\n        li.setAttribute(\"role\", \"presentation\");\n        // div\n        var div = document.createElement(\"div\");\n        div.className = \"jqtree-element jqtree_common\";\n        div.setAttribute(\"role\", \"presentation\");\n        li.appendChild(div);\n        // button link\n        var buttonLink = document.createElement(\"a\");\n        buttonLink.className = buttonClasses;\n        buttonLink.appendChild(iconElement.cloneNode(true));\n        buttonLink.setAttribute(\"role\", \"presentation\");\n        buttonLink.setAttribute(\"aria-hidden\", \"true\");\n        if (this.treeWidget.options.buttonLeft) {\n            div.appendChild(buttonLink);\n        }\n        // title span\n        div.appendChild(this.createTitleSpan(node.name, level, isSelected, node.is_open, true));\n        if (!this.treeWidget.options.buttonLeft) {\n            div.appendChild(buttonLink);\n        }\n        return li;\n    };\n    ElementsRenderer.prototype.createNodeLi = function (node, level, isSelected) {\n        var liClasses = [\"jqtree_common\"];\n        if (isSelected) {\n            liClasses.push(\"jqtree-selected\");\n        }\n        var classString = liClasses.join(\" \");\n        // li\n        var li = document.createElement(\"li\");\n        li.className = classString;\n        li.setAttribute(\"role\", \"presentation\");\n        // div\n        var div = document.createElement(\"div\");\n        div.className = \"jqtree-element jqtree_common\";\n        div.setAttribute(\"role\", \"presentation\");\n        li.appendChild(div);\n        // title span\n        div.appendChild(this.createTitleSpan(node.name, level, isSelected, node.is_open, false));\n        return li;\n    };\n    ElementsRenderer.prototype.createTitleSpan = function (nodeName, level, isSelected, isOpen, isFolder) {\n        var titleSpan = document.createElement(\"span\");\n        var classes = \"jqtree-title jqtree_common\";\n        if (isFolder) {\n            classes += \" jqtree-title-folder\";\n        }\n        titleSpan.className = classes;\n        titleSpan.setAttribute(\"role\", \"treeitem\");\n        titleSpan.setAttribute(\"aria-level\", \"\" + level);\n        titleSpan.setAttribute(\"aria-selected\", util_1.getBoolString(isSelected));\n        titleSpan.setAttribute(\"aria-expanded\", util_1.getBoolString(isOpen));\n        if (isSelected) {\n            var tabIndex = this.treeWidget.options.tabIndex;\n            if (tabIndex !== undefined) {\n                titleSpan.setAttribute(\"tabindex\", \"\" + tabIndex);\n            }\n        }\n        if (this.treeWidget.options.autoEscape) {\n            titleSpan.textContent = nodeName;\n        }\n        else {\n            titleSpan.innerHTML = nodeName;\n        }\n        return titleSpan;\n    };\n    ElementsRenderer.prototype.getButtonClasses = function (node) {\n        var classes = [\"jqtree-toggler\", \"jqtree_common\"];\n        if (!node.is_open) {\n            classes.push(\"jqtree-closed\");\n        }\n        if (this.treeWidget.options.buttonLeft) {\n            classes.push(\"jqtree-toggler-left\");\n        }\n        else {\n            classes.push(\"jqtree-toggler-right\");\n        }\n        return classes.join(\" \");\n    };\n    ElementsRenderer.prototype.getFolderClasses = function (node, isSelected) {\n        var classes = [\"jqtree-folder\"];\n        if (!node.is_open) {\n            classes.push(\"jqtree-closed\");\n        }\n        if (isSelected) {\n            classes.push(\"jqtree-selected\");\n        }\n        if (node.is_loading) {\n            classes.push(\"jqtree-loading\");\n        }\n        return classes.join(\" \");\n    };\n    ElementsRenderer.prototype.createButtonElement = function (value) {\n        if (typeof value === \"string\") {\n            // convert value to html\n            var div = document.createElement(\"div\");\n            div.innerHTML = value;\n            return document.createTextNode(div.innerHTML);\n        }\n        else {\n            return jQuery(value)[0];\n        }\n    };\n    return ElementsRenderer;\n}());\nexports[\"default\"] = ElementsRenderer;\n","\"use strict\";\nexports.__esModule = true;\nvar DataLoader = /** @class */ (function () {\n    function DataLoader(treeWidget) {\n        this.treeWidget = treeWidget;\n    }\n    DataLoader.prototype.loadFromUrl = function (urlInfo, parentNode, onFinished) {\n        var _this = this;\n        if (!urlInfo) {\n            return;\n        }\n        var $el = this.getDomElement(parentNode);\n        this.addLoadingClass($el);\n        this.notifyLoading(true, parentNode, $el);\n        var stopLoading = function () {\n            _this.removeLoadingClass($el);\n            _this.notifyLoading(false, parentNode, $el);\n        };\n        var handleSuccess = function (data) {\n            stopLoading();\n            _this.treeWidget.loadData(_this.parseData(data), parentNode);\n            if (onFinished && typeof onFinished === \"function\") {\n                onFinished();\n            }\n        };\n        var handleError = function (jqXHR) {\n            stopLoading();\n            if (_this.treeWidget.options.onLoadFailed) {\n                _this.treeWidget.options.onLoadFailed(jqXHR);\n            }\n        };\n        this.submitRequest(urlInfo, handleSuccess, handleError);\n    };\n    DataLoader.prototype.addLoadingClass = function ($el) {\n        if ($el) {\n            $el.addClass(\"jqtree-loading\");\n        }\n    };\n    DataLoader.prototype.removeLoadingClass = function ($el) {\n        if ($el) {\n            $el.removeClass(\"jqtree-loading\");\n        }\n    };\n    DataLoader.prototype.getDomElement = function (parentNode) {\n        if (parentNode) {\n            return jQuery(parentNode.element);\n        }\n        else {\n            return this.treeWidget.element;\n        }\n    };\n    DataLoader.prototype.notifyLoading = function (isLoading, node, $el) {\n        if (this.treeWidget.options.onLoading) {\n            this.treeWidget.options.onLoading(isLoading, node, $el);\n        }\n        this.treeWidget._triggerEvent(\"tree.loading_data\", {\n            isLoading: isLoading,\n            node: node,\n            $el: $el\n        });\n    };\n    DataLoader.prototype.submitRequest = function (urlInfo, handleSuccess, handleError) {\n        var ajaxSettings = jQuery.extend({ method: \"GET\" }, typeof urlInfo === \"string\" ? { url: urlInfo } : urlInfo, {\n            cache: false,\n            dataType: \"json\",\n            success: handleSuccess,\n            error: handleError\n        });\n        ajaxSettings.method = ajaxSettings.method.toUpperCase();\n        void jQuery.ajax(ajaxSettings);\n    };\n    DataLoader.prototype.parseData = function (data) {\n        var dataFilter = this.treeWidget.options.dataFilter;\n        var getParsedData = function () {\n            if (typeof data === \"string\") {\n                return jQuery.parseJSON(data);\n            }\n            else {\n                return data;\n            }\n        };\n        var parsedData = getParsedData();\n        if (dataFilter) {\n            return dataFilter(parsedData);\n        }\n        else {\n            return parsedData;\n        }\n    };\n    return DataLoader;\n}());\nexports[\"default\"] = DataLoader;\n","\"use strict\";\nexports.__esModule = true;\nvar KeyHandler = /** @class */ (function () {\n    function KeyHandler(treeWidget) {\n        var _this = this;\n        this.handleKeyDown = function (e) {\n            if (!_this.canHandleKeyboard()) {\n                return true;\n            }\n            var selectedNode = _this.treeWidget.getSelectedNode();\n            if (!selectedNode) {\n                return true;\n            }\n            var key = e.which;\n            switch (key) {\n                case KeyHandler.DOWN:\n                    return _this.moveDown(selectedNode);\n                case KeyHandler.UP:\n                    return _this.moveUp(selectedNode);\n                case KeyHandler.RIGHT:\n                    return _this.moveRight(selectedNode);\n                case KeyHandler.LEFT:\n                    return _this.moveLeft(selectedNode);\n                default:\n                    return true;\n            }\n        };\n        this.treeWidget = treeWidget;\n        if (treeWidget.options.keyboardSupport) {\n            jQuery(document).on(\"keydown.jqtree\", this.handleKeyDown);\n        }\n    }\n    KeyHandler.prototype.deinit = function () {\n        jQuery(document).off(\"keydown.jqtree\");\n    };\n    KeyHandler.prototype.moveDown = function (selectedNode) {\n        return this.selectNode(selectedNode.getNextNode());\n    };\n    KeyHandler.prototype.moveUp = function (selectedNode) {\n        return this.selectNode(selectedNode.getPreviousNode());\n    };\n    KeyHandler.prototype.moveRight = function (selectedNode) {\n        if (!selectedNode.isFolder()) {\n            return true;\n        }\n        else {\n            // folder node\n            if (selectedNode.is_open) {\n                // Right moves to the first child of an open node\n                return this.selectNode(selectedNode.getNextNode());\n            }\n            else {\n                // Right expands a closed node\n                this.treeWidget.openNode(selectedNode);\n                return false;\n            }\n        }\n    };\n    KeyHandler.prototype.moveLeft = function (selectedNode) {\n        if (selectedNode.isFolder() && selectedNode.is_open) {\n            // Left on an open node closes the node\n            this.treeWidget.closeNode(selectedNode);\n            return false;\n        }\n        else {\n            // Left on a closed or end node moves focus to the node's parent\n            return this.selectNode(selectedNode.getParent());\n        }\n    };\n    KeyHandler.prototype.selectNode = function (node) {\n        if (!node) {\n            return true;\n        }\n        else {\n            this.treeWidget.selectNode(node);\n            if (!this.treeWidget.scrollHandler.isScrolledIntoView(jQuery(node.element).find(\".jqtree-element\"))) {\n                this.treeWidget.scrollToNode(node);\n            }\n            return false;\n        }\n    };\n    KeyHandler.prototype.canHandleKeyboard = function () {\n        return ((this.treeWidget.options.keyboardSupport || false) &&\n            this.isFocusOnTree());\n    };\n    KeyHandler.prototype.isFocusOnTree = function () {\n        var activeElement = document.activeElement;\n        return Boolean(activeElement &&\n            activeElement.tagName === \"SPAN\" &&\n            this.treeWidget._containsElement(activeElement));\n    };\n    KeyHandler.LEFT = 37;\n    KeyHandler.UP = 38;\n    KeyHandler.RIGHT = 39;\n    KeyHandler.DOWN = 40;\n    return KeyHandler;\n}());\nexports[\"default\"] = KeyHandler;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\n/*\nThis widget does the same a the mouse widget in jqueryui.\n*/\nvar simple_widget_1 = require(\"./simple.widget\");\nvar getPositionInfoFromMouseEvent = function (e) { return ({\n    pageX: e.pageX,\n    pageY: e.pageY,\n    target: e.target,\n    originalEvent: e\n}); };\nvar getPositionInfoFromTouch = function (touch, e) { return ({\n    pageX: touch.pageX,\n    pageY: touch.pageY,\n    target: touch.target,\n    originalEvent: e\n}); };\nvar MouseWidget = /** @class */ (function (_super) {\n    __extends(MouseWidget, _super);\n    function MouseWidget() {\n        var _this = _super !== null && _super.apply(this, arguments) || this;\n        _this.mouseDown = function (e) {\n            // Left mouse button?\n            if (e.button !== 0) {\n                return;\n            }\n            var result = _this.handleMouseDown(getPositionInfoFromMouseEvent(e));\n            if (result && e.cancelable) {\n                e.preventDefault();\n            }\n        };\n        _this.mouseMove = function (e) {\n            _this.handleMouseMove(e, getPositionInfoFromMouseEvent(e));\n        };\n        _this.mouseUp = function (e) {\n            _this.handleMouseUp(getPositionInfoFromMouseEvent(e));\n        };\n        _this.touchStart = function (e) {\n            if (!e) {\n                return;\n            }\n            if (e.touches.length > 1) {\n                return;\n            }\n            var touch = e.changedTouches[0];\n            _this.handleMouseDown(getPositionInfoFromTouch(touch, e));\n        };\n        _this.touchMove = function (e) {\n            if (!e) {\n                return;\n            }\n            if (e.touches.length > 1) {\n                return;\n            }\n            var touch = e.changedTouches[0];\n            _this.handleMouseMove(e, getPositionInfoFromTouch(touch, e));\n        };\n        _this.touchEnd = function (e) {\n            if (!e) {\n                return;\n            }\n            if (e.touches.length > 1) {\n                return;\n            }\n            var touch = e.changedTouches[0];\n            _this.handleMouseUp(getPositionInfoFromTouch(touch, e));\n        };\n        return _this;\n    }\n    MouseWidget.prototype.setMouseDelay = function (mouseDelay) {\n        this.mouseDelay = mouseDelay;\n    };\n    MouseWidget.prototype.init = function () {\n        var element = this.$el.get(0);\n        element.addEventListener(\"mousedown\", this.mouseDown, {\n            passive: false\n        });\n        element.addEventListener(\"touchstart\", this.touchStart, {\n            passive: false\n        });\n        this.isMouseStarted = false;\n        this.mouseDelay = 0;\n        this.mouseDelayTimer = null;\n        this.isMouseDelayMet = false;\n        this.mouseDownInfo = null;\n    };\n    MouseWidget.prototype.deinit = function () {\n        var el = this.$el.get(0);\n        el.removeEventListener(\"mousedown\", this.mouseDown);\n        el.removeEventListener(\"touchstart\", this.touchStart);\n        document.removeEventListener(\"mousemove\", this.mouseMove);\n        document.removeEventListener(\"touchmove\", this.touchMove);\n        document.removeEventListener(\"mouseup\", this.mouseUp);\n        document.removeEventListener(\"touchend\", this.touchEnd);\n    };\n    MouseWidget.prototype.handleMouseDown = function (positionInfo) {\n        // We may have missed mouseup (out of window)\n        if (this.isMouseStarted) {\n            this.handleMouseUp(positionInfo);\n        }\n        this.mouseDownInfo = positionInfo;\n        if (!this.mouseCapture(positionInfo)) {\n            return false;\n        }\n        this.handleStartMouse();\n        return true;\n    };\n    MouseWidget.prototype.handleStartMouse = function () {\n        document.addEventListener(\"mousemove\", this.mouseMove, {\n            passive: false\n        });\n        document.addEventListener(\"touchmove\", this.touchMove, {\n            passive: false\n        });\n        document.addEventListener(\"mouseup\", this.mouseUp, { passive: false });\n        document.addEventListener(\"touchend\", this.touchEnd, {\n            passive: false\n        });\n        if (this.mouseDelay) {\n            this.startMouseDelayTimer();\n        }\n    };\n    MouseWidget.prototype.startMouseDelayTimer = function () {\n        var _this = this;\n        if (this.mouseDelayTimer) {\n            clearTimeout(this.mouseDelayTimer);\n        }\n        this.mouseDelayTimer = window.setTimeout(function () {\n            _this.isMouseDelayMet = true;\n        }, this.mouseDelay);\n        this.isMouseDelayMet = false;\n    };\n    MouseWidget.prototype.handleMouseMove = function (e, positionInfo) {\n        if (this.isMouseStarted) {\n            this.mouseDrag(positionInfo);\n            if (e.cancelable) {\n                e.preventDefault();\n            }\n            return;\n        }\n        if (this.mouseDelay && !this.isMouseDelayMet) {\n            return;\n        }\n        if (this.mouseDownInfo) {\n            this.isMouseStarted = this.mouseStart(this.mouseDownInfo) !== false;\n        }\n        if (this.isMouseStarted) {\n            this.mouseDrag(positionInfo);\n            if (e.cancelable) {\n                e.preventDefault();\n            }\n        }\n        else {\n            this.handleMouseUp(positionInfo);\n        }\n    };\n    MouseWidget.prototype.handleMouseUp = function (positionInfo) {\n        document.removeEventListener(\"mousemove\", this.mouseMove);\n        document.removeEventListener(\"touchmove\", this.touchMove);\n        document.removeEventListener(\"mouseup\", this.mouseUp);\n        document.removeEventListener(\"touchend\", this.touchEnd);\n        if (this.isMouseStarted) {\n            this.isMouseStarted = false;\n            this.mouseStop(positionInfo);\n        }\n    };\n    return MouseWidget;\n}(simple_widget_1[\"default\"]));\nexports[\"default\"] = MouseWidget;\n","\"use strict\";\nexports.__esModule = true;\nvar util_1 = require(\"./util\");\nvar SaveStateHandler = /** @class */ (function () {\n    function SaveStateHandler(treeWidget) {\n        this.treeWidget = treeWidget;\n    }\n    SaveStateHandler.prototype.saveState = function () {\n        var state = JSON.stringify(this.getState());\n        if (this.treeWidget.options.onSetStateFromStorage) {\n            this.treeWidget.options.onSetStateFromStorage(state);\n        }\n        else if (this.supportsLocalStorage()) {\n            localStorage.setItem(this.getKeyName(), state);\n        }\n    };\n    SaveStateHandler.prototype.getStateFromStorage = function () {\n        var jsonData = this.loadFromStorage();\n        if (jsonData) {\n            return this.parseState(jsonData);\n        }\n        else {\n            return null;\n        }\n    };\n    SaveStateHandler.prototype.getState = function () {\n        var _this = this;\n        var getOpenNodeIds = function () {\n            var openNodes = [];\n            _this.treeWidget.tree.iterate(function (node) {\n                if (node.is_open && node.id && node.hasChildren()) {\n                    openNodes.push(node.id);\n                }\n                return true;\n            });\n            return openNodes;\n        };\n        var getSelectedNodeIds = function () {\n            var selectedNodeIds = [];\n            _this.treeWidget.getSelectedNodes().forEach(function (node) {\n                if (node.id != null) {\n                    selectedNodeIds.push(node.id);\n                }\n            });\n            return selectedNodeIds;\n        };\n        return {\n            open_nodes: getOpenNodeIds(),\n            selected_node: getSelectedNodeIds()\n        };\n    };\n    /*\n    Set initial state\n    Don't handle nodes that are loaded on demand\n\n    result: must load on demand\n    */\n    SaveStateHandler.prototype.setInitialState = function (state) {\n        if (!state) {\n            return false;\n        }\n        else {\n            var mustLoadOnDemand = false;\n            if (state.open_nodes) {\n                mustLoadOnDemand = this.openInitialNodes(state.open_nodes);\n            }\n            if (state.selected_node) {\n                this.resetSelection();\n                this.selectInitialNodes(state.selected_node);\n            }\n            return mustLoadOnDemand;\n        }\n    };\n    SaveStateHandler.prototype.setInitialStateOnDemand = function (state, cbFinished) {\n        if (state) {\n            this.doSetInitialStateOnDemand(state.open_nodes, state.selected_node, cbFinished);\n        }\n        else {\n            cbFinished();\n        }\n    };\n    SaveStateHandler.prototype.getNodeIdToBeSelected = function () {\n        var state = this.getStateFromStorage();\n        if (state && state.selected_node) {\n            return state.selected_node[0];\n        }\n        else {\n            return null;\n        }\n    };\n    SaveStateHandler.prototype.parseState = function (jsonData) {\n        var state = jQuery.parseJSON(jsonData);\n        // Check if selected_node is an int (instead of an array)\n        if (state && state.selected_node && util_1.isInt(state.selected_node)) {\n            // Convert to array\n            state.selected_node = [state.selected_node];\n        }\n        return state;\n    };\n    SaveStateHandler.prototype.loadFromStorage = function () {\n        if (this.treeWidget.options.onGetStateFromStorage) {\n            return this.treeWidget.options.onGetStateFromStorage();\n        }\n        else if (this.supportsLocalStorage()) {\n            return localStorage.getItem(this.getKeyName());\n        }\n        else {\n            return null;\n        }\n    };\n    SaveStateHandler.prototype.openInitialNodes = function (nodeIds) {\n        var mustLoadOnDemand = false;\n        for (var _i = 0, nodeIds_1 = nodeIds; _i < nodeIds_1.length; _i++) {\n            var nodeDd = nodeIds_1[_i];\n            var node = this.treeWidget.getNodeById(nodeDd);\n            if (node) {\n                if (!node.load_on_demand) {\n                    node.is_open = true;\n                }\n                else {\n                    mustLoadOnDemand = true;\n                }\n            }\n        }\n        return mustLoadOnDemand;\n    };\n    SaveStateHandler.prototype.selectInitialNodes = function (nodeIds) {\n        var selectCount = 0;\n        for (var _i = 0, nodeIds_2 = nodeIds; _i < nodeIds_2.length; _i++) {\n            var nodeId = nodeIds_2[_i];\n            var node = this.treeWidget.getNodeById(nodeId);\n            if (node) {\n                selectCount += 1;\n                this.treeWidget.selectNodeHandler.addToSelection(node);\n            }\n        }\n        return selectCount !== 0;\n    };\n    SaveStateHandler.prototype.resetSelection = function () {\n        var selectNodeHandler = this.treeWidget.selectNodeHandler;\n        var selectedNodes = selectNodeHandler.getSelectedNodes();\n        selectedNodes.forEach(function (node) {\n            selectNodeHandler.removeFromSelection(node);\n        });\n    };\n    SaveStateHandler.prototype.doSetInitialStateOnDemand = function (nodeIdsParam, selectedNodes, cbFinished) {\n        var _this = this;\n        var loadingCount = 0;\n        var nodeIds = nodeIdsParam;\n        var openNodes = function () {\n            var newNodesIds = [];\n            for (var _i = 0, nodeIds_3 = nodeIds; _i < nodeIds_3.length; _i++) {\n                var nodeId = nodeIds_3[_i];\n                var node = _this.treeWidget.getNodeById(nodeId);\n                if (!node) {\n                    newNodesIds.push(nodeId);\n                }\n                else {\n                    if (!node.is_loading) {\n                        if (node.load_on_demand) {\n                            loadAndOpenNode(node);\n                        }\n                        else {\n                            _this.treeWidget._openNode(node, false, null);\n                        }\n                    }\n                }\n            }\n            nodeIds = newNodesIds;\n            if (_this.selectInitialNodes(selectedNodes)) {\n                _this.treeWidget._refreshElements(null);\n            }\n            if (loadingCount === 0) {\n                cbFinished();\n            }\n        };\n        var loadAndOpenNode = function (node) {\n            loadingCount += 1;\n            _this.treeWidget._openNode(node, false, function () {\n                loadingCount -= 1;\n                openNodes();\n            });\n        };\n        openNodes();\n    };\n    SaveStateHandler.prototype.getKeyName = function () {\n        if (typeof this.treeWidget.options.saveState === \"string\") {\n            return this.treeWidget.options.saveState;\n        }\n        else {\n            return \"tree\";\n        }\n    };\n    SaveStateHandler.prototype.supportsLocalStorage = function () {\n        var testSupport = function () {\n            // Is local storage supported?\n            if (localStorage == null) {\n                return false;\n            }\n            else {\n                // Check if it's possible to store an item. Safari does not allow this in private browsing mode.\n                try {\n                    var key = \"_storage_test\";\n                    sessionStorage.setItem(key, \"value\");\n                    sessionStorage.removeItem(key);\n                }\n                catch (error) {\n                    return false;\n                }\n                return true;\n            }\n        };\n        if (this._supportsLocalStorage == null) {\n            this._supportsLocalStorage = testSupport();\n        }\n        return this._supportsLocalStorage;\n    };\n    return SaveStateHandler;\n}());\nexports[\"default\"] = SaveStateHandler;\n","\"use strict\";\nexports.__esModule = true;\nvar ScrollHandler = /** @class */ (function () {\n    function ScrollHandler(treeWidget) {\n        this.treeWidget = treeWidget;\n        this.previousTop = -1;\n        this.isInitialized = false;\n    }\n    ScrollHandler.prototype.checkScrolling = function () {\n        this.ensureInit();\n        this.checkVerticalScrolling();\n        this.checkHorizontalScrolling();\n    };\n    ScrollHandler.prototype.scrollToY = function (top) {\n        this.ensureInit();\n        if (this.$scrollParent) {\n            this.$scrollParent[0].scrollTop = top;\n        }\n        else {\n            var offset = this.treeWidget.$el.offset();\n            var treeTop = offset ? offset.top : 0;\n            jQuery(document).scrollTop(top + treeTop);\n        }\n    };\n    ScrollHandler.prototype.isScrolledIntoView = function ($element) {\n        this.ensureInit();\n        var elementBottom;\n        var viewBottom;\n        var elementTop;\n        var viewTop;\n        var elHeight = $element.height() || 0;\n        if (this.$scrollParent) {\n            viewTop = 0;\n            viewBottom = this.$scrollParent.height() || 0;\n            var offset = $element.offset();\n            var originalTop = offset ? offset.top : 0;\n            elementTop = originalTop - this.scrollParentTop;\n            elementBottom = elementTop + elHeight;\n        }\n        else {\n            viewTop = jQuery(window).scrollTop() || 0;\n            var windowHeight = jQuery(window).height() || 0;\n            viewBottom = viewTop + windowHeight;\n            var offset = $element.offset();\n            elementTop = offset ? offset.top : 0;\n            elementBottom = elementTop + elHeight;\n        }\n        return elementBottom <= viewBottom && elementTop >= viewTop;\n    };\n    ScrollHandler.prototype.getScrollLeft = function () {\n        if (!this.$scrollParent) {\n            return 0;\n        }\n        else {\n            return this.$scrollParent.scrollLeft() || 0;\n        }\n    };\n    ScrollHandler.prototype.initScrollParent = function () {\n        var _this = this;\n        var getParentWithOverflow = function () {\n            var cssAttributes = [\"overflow\", \"overflow-y\"];\n            var hasOverFlow = function ($el) {\n                for (var _i = 0, cssAttributes_1 = cssAttributes; _i < cssAttributes_1.length; _i++) {\n                    var attr = cssAttributes_1[_i];\n                    var overflowValue = $el.css(attr);\n                    if (overflowValue === \"auto\" ||\n                        overflowValue === \"scroll\") {\n                        return true;\n                    }\n                }\n                return false;\n            };\n            if (hasOverFlow(_this.treeWidget.$el)) {\n                return _this.treeWidget.$el;\n            }\n            for (var _i = 0, _a = _this.treeWidget.$el.parents().get(); _i < _a.length; _i++) {\n                var el = _a[_i];\n                var $el = jQuery(el);\n                if (hasOverFlow($el)) {\n                    return $el;\n                }\n            }\n            return null;\n        };\n        var setDocumentAsScrollParent = function () {\n            _this.scrollParentTop = 0;\n            _this.$scrollParent = null;\n        };\n        if (this.treeWidget.$el.css(\"position\") === \"fixed\") {\n            setDocumentAsScrollParent();\n        }\n        var $scrollParent = getParentWithOverflow();\n        if ($scrollParent &&\n            $scrollParent.length &&\n            $scrollParent[0].tagName !== \"HTML\") {\n            this.$scrollParent = $scrollParent;\n            var offset = this.$scrollParent.offset();\n            this.scrollParentTop = offset ? offset.top : 0;\n        }\n        else {\n            setDocumentAsScrollParent();\n        }\n        this.isInitialized = true;\n    };\n    ScrollHandler.prototype.ensureInit = function () {\n        if (!this.isInitialized) {\n            this.initScrollParent();\n        }\n    };\n    ScrollHandler.prototype.handleVerticalScrollingWithScrollParent = function (area) {\n        var scrollParent = this.$scrollParent && this.$scrollParent[0];\n        if (!scrollParent) {\n            return;\n        }\n        var distanceBottom = this.scrollParentTop + scrollParent.offsetHeight - area.bottom;\n        if (distanceBottom < 20) {\n            scrollParent.scrollTop += 20;\n            this.treeWidget.refreshHitAreas();\n            this.previousTop = -1;\n        }\n        else if (area.top - this.scrollParentTop < 20) {\n            scrollParent.scrollTop -= 20;\n            this.treeWidget.refreshHitAreas();\n            this.previousTop = -1;\n        }\n    };\n    ScrollHandler.prototype.handleVerticalScrollingWithDocument = function (area) {\n        var scrollTop = jQuery(document).scrollTop() || 0;\n        var distanceTop = area.top - scrollTop;\n        if (distanceTop < 20) {\n            jQuery(document).scrollTop(scrollTop - 20);\n        }\n        else {\n            var windowHeight = jQuery(window).height() || 0;\n            if (windowHeight - (area.bottom - scrollTop) < 20) {\n                jQuery(document).scrollTop(scrollTop + 20);\n            }\n        }\n    };\n    ScrollHandler.prototype.checkVerticalScrolling = function () {\n        var hoveredArea = this.treeWidget.dndHandler.hoveredArea;\n        if (hoveredArea && hoveredArea.top !== this.previousTop) {\n            this.previousTop = hoveredArea.top;\n            if (this.$scrollParent) {\n                this.handleVerticalScrollingWithScrollParent(hoveredArea);\n            }\n            else {\n                this.handleVerticalScrollingWithDocument(hoveredArea);\n            }\n        }\n    };\n    ScrollHandler.prototype.checkHorizontalScrolling = function () {\n        var positionInfo = this.treeWidget.dndHandler.positionInfo;\n        if (!positionInfo) {\n            return;\n        }\n        if (this.$scrollParent) {\n            this.handleHorizontalScrollingWithParent(positionInfo);\n        }\n        else {\n            this.handleHorizontalScrollingWithDocument(positionInfo);\n        }\n    };\n    ScrollHandler.prototype.handleHorizontalScrollingWithParent = function (positionInfo) {\n        if (positionInfo.pageX === undefined ||\n            positionInfo.pageY === undefined) {\n            return;\n        }\n        var $scrollParent = this.$scrollParent;\n        var scrollParentOffset = $scrollParent && $scrollParent.offset();\n        if (!($scrollParent && scrollParentOffset)) {\n            return;\n        }\n        var scrollParent = $scrollParent[0];\n        var canScrollRight = scrollParent.scrollLeft + scrollParent.clientWidth <\n            scrollParent.scrollWidth;\n        var canScrollLeft = scrollParent.scrollLeft > 0;\n        var rightEdge = scrollParentOffset.left + scrollParent.clientWidth;\n        var leftEdge = scrollParentOffset.left;\n        var isNearRightEdge = positionInfo.pageX > rightEdge - 20;\n        var isNearLeftEdge = positionInfo.pageX < leftEdge + 20;\n        if (isNearRightEdge && canScrollRight) {\n            scrollParent.scrollLeft = Math.min(scrollParent.scrollLeft + 20, scrollParent.scrollWidth);\n        }\n        else if (isNearLeftEdge && canScrollLeft) {\n            scrollParent.scrollLeft = Math.max(scrollParent.scrollLeft - 20, 0);\n        }\n    };\n    ScrollHandler.prototype.handleHorizontalScrollingWithDocument = function (positionInfo) {\n        if (positionInfo.pageX === undefined ||\n            positionInfo.pageY === undefined) {\n            return;\n        }\n        var $document = jQuery(document);\n        var scrollLeft = $document.scrollLeft() || 0;\n        var windowWidth = jQuery(window).width() || 0;\n        var canScrollLeft = scrollLeft > 0;\n        var isNearRightEdge = positionInfo.pageX > windowWidth - 20;\n        var isNearLeftEdge = positionInfo.pageX - scrollLeft < 20;\n        if (isNearRightEdge) {\n            $document.scrollLeft(scrollLeft + 20);\n        }\n        else if (isNearLeftEdge && canScrollLeft) {\n            $document.scrollLeft(Math.max(scrollLeft - 20, 0));\n        }\n    };\n    return ScrollHandler;\n}());\nexports[\"default\"] = ScrollHandler;\n","\"use strict\";\nexports.__esModule = true;\nvar SelectNodeHandler = /** @class */ (function () {\n    function SelectNodeHandler(treeWidget) {\n        this.treeWidget = treeWidget;\n        this.clear();\n    }\n    SelectNodeHandler.prototype.getSelectedNode = function () {\n        var selectedNodes = this.getSelectedNodes();\n        if (selectedNodes.length) {\n            return selectedNodes[0];\n        }\n        else {\n            return false;\n        }\n    };\n    SelectNodeHandler.prototype.getSelectedNodes = function () {\n        if (this.selectedSingleNode) {\n            return [this.selectedSingleNode];\n        }\n        else {\n            var selectedNodes = [];\n            for (var id in this.selectedNodes) {\n                if (Object.prototype.hasOwnProperty.call(this.selectedNodes, id)) {\n                    var node = this.treeWidget.getNodeById(id);\n                    if (node) {\n                        selectedNodes.push(node);\n                    }\n                }\n            }\n            return selectedNodes;\n        }\n    };\n    SelectNodeHandler.prototype.getSelectedNodesUnder = function (parent) {\n        if (this.selectedSingleNode) {\n            if (parent.isParentOf(this.selectedSingleNode)) {\n                return [this.selectedSingleNode];\n            }\n            else {\n                return [];\n            }\n        }\n        else {\n            var selectedNodes = [];\n            for (var id in this.selectedNodes) {\n                if (Object.prototype.hasOwnProperty.call(this.selectedNodes, id)) {\n                    var node = this.treeWidget.getNodeById(id);\n                    if (node && parent.isParentOf(node)) {\n                        selectedNodes.push(node);\n                    }\n                }\n            }\n            return selectedNodes;\n        }\n    };\n    SelectNodeHandler.prototype.isNodeSelected = function (node) {\n        if (node.id != null) {\n            if (this.selectedNodes[node.id]) {\n                return true;\n            }\n            else {\n                return false;\n            }\n        }\n        else if (this.selectedSingleNode) {\n            return this.selectedSingleNode.element === node.element;\n        }\n        else {\n            return false;\n        }\n    };\n    SelectNodeHandler.prototype.clear = function () {\n        this.selectedNodes = {};\n        this.selectedSingleNode = null;\n    };\n    SelectNodeHandler.prototype.removeFromSelection = function (node, includeChildren) {\n        var _this = this;\n        if (includeChildren === void 0) { includeChildren = false; }\n        if (node.id == null) {\n            if (this.selectedSingleNode &&\n                node.element === this.selectedSingleNode.element) {\n                this.selectedSingleNode = null;\n            }\n        }\n        else {\n            delete this.selectedNodes[node.id];\n            if (includeChildren) {\n                node.iterate(function () {\n                    if (node.id != null) {\n                        delete _this.selectedNodes[node.id];\n                    }\n                    return true;\n                });\n            }\n        }\n    };\n    SelectNodeHandler.prototype.addToSelection = function (node) {\n        if (node.id != null) {\n            this.selectedNodes[node.id] = true;\n        }\n        else {\n            this.selectedSingleNode = node;\n        }\n    };\n    return SelectNodeHandler;\n}());\nexports[\"default\"] = SelectNodeHandler;\n","\"use strict\";\nvar __extends = (this && this.__extends) || (function () {\n    var extendStatics = function (d, b) {\n        extendStatics = Object.setPrototypeOf ||\n            ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n            function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n        return extendStatics(d, b);\n    };\n    return function (d, b) {\n        extendStatics(d, b);\n        function __() { this.constructor = d; }\n        d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n    };\n})();\nexports.__esModule = true;\nexports.BorderDropHint = exports.FolderElement = exports.NodeElement = void 0;\nvar node_1 = require(\"./node\");\nvar NodeElement = /** @class */ (function () {\n    function NodeElement(node, treeWidget) {\n        this.init(node, treeWidget);\n    }\n    NodeElement.prototype.init = function (node, treeWidget) {\n        this.node = node;\n        this.treeWidget = treeWidget;\n        if (!node.element) {\n            node.element = this.treeWidget.element.get(0);\n        }\n        this.$element = jQuery(node.element);\n    };\n    NodeElement.prototype.addDropHint = function (position) {\n        if (this.mustShowBorderDropHint(position)) {\n            return new BorderDropHint(this.$element, this.treeWidget._getScrollLeft());\n        }\n        else {\n            return new GhostDropHint(this.node, this.$element, position);\n        }\n    };\n    NodeElement.prototype.select = function (mustSetFocus) {\n        var _a;\n        var $li = this.getLi();\n        $li.addClass(\"jqtree-selected\");\n        $li.attr(\"aria-selected\", \"true\");\n        var $span = this.getSpan();\n        $span.attr(\"tabindex\", (_a = this.treeWidget.options.tabIndex) !== null && _a !== void 0 ? _a : null);\n        if (mustSetFocus) {\n            $span.focus();\n        }\n    };\n    NodeElement.prototype.deselect = function () {\n        var $li = this.getLi();\n        $li.removeClass(\"jqtree-selected\");\n        $li.attr(\"aria-selected\", \"false\");\n        var $span = this.getSpan();\n        $span.removeAttr(\"tabindex\");\n        $span.blur();\n    };\n    NodeElement.prototype.getUl = function () {\n        return this.$element.children(\"ul:first\");\n    };\n    NodeElement.prototype.getSpan = function () {\n        return this.$element\n            .children(\".jqtree-element\")\n            .find(\"span.jqtree-title\");\n    };\n    NodeElement.prototype.getLi = function () {\n        return this.$element;\n    };\n    NodeElement.prototype.mustShowBorderDropHint = function (position) {\n        return position === node_1.Position.Inside;\n    };\n    return NodeElement;\n}());\nexports.NodeElement = NodeElement;\nvar FolderElement = /** @class */ (function (_super) {\n    __extends(FolderElement, _super);\n    function FolderElement() {\n        return _super !== null && _super.apply(this, arguments) || this;\n    }\n    FolderElement.prototype.open = function (onFinished, slide, animationSpeed) {\n        var _this = this;\n        if (slide === void 0) { slide = true; }\n        if (animationSpeed === void 0) { animationSpeed = \"fast\"; }\n        if (this.node.is_open) {\n            return;\n        }\n        this.node.is_open = true;\n        var $button = this.getButton();\n        $button.removeClass(\"jqtree-closed\");\n        $button.html(\"\");\n        var buttonEl = $button.get(0);\n        if (buttonEl) {\n            var icon = this.treeWidget.renderer.openedIconElement.cloneNode(true);\n            buttonEl.appendChild(icon);\n        }\n        var doOpen = function () {\n            var $li = _this.getLi();\n            $li.removeClass(\"jqtree-closed\");\n            var $span = _this.getSpan();\n            $span.attr(\"aria-expanded\", \"true\");\n            if (onFinished) {\n                onFinished(_this.node);\n            }\n            _this.treeWidget._triggerEvent(\"tree.open\", {\n                node: _this.node\n            });\n        };\n        if (slide) {\n            this.getUl().slideDown(animationSpeed, doOpen);\n        }\n        else {\n            this.getUl().show();\n            doOpen();\n        }\n    };\n    FolderElement.prototype.close = function (slide, animationSpeed) {\n        var _this = this;\n        if (slide === void 0) { slide = true; }\n        if (animationSpeed === void 0) { animationSpeed = \"fast\"; }\n        if (!this.node.is_open) {\n            return;\n        }\n        this.node.is_open = false;\n        var $button = this.getButton();\n        $button.addClass(\"jqtree-closed\");\n        $button.html(\"\");\n        var buttonEl = $button.get(0);\n        if (buttonEl) {\n            var icon = this.treeWidget.renderer.closedIconElement.cloneNode(true);\n            buttonEl.appendChild(icon);\n        }\n        var doClose = function () {\n            var $li = _this.getLi();\n            $li.addClass(\"jqtree-closed\");\n            var $span = _this.getSpan();\n            $span.attr(\"aria-expanded\", \"false\");\n            _this.treeWidget._triggerEvent(\"tree.close\", {\n                node: _this.node\n            });\n        };\n        if (slide) {\n            this.getUl().slideUp(animationSpeed, doClose);\n        }\n        else {\n            this.getUl().hide();\n            doClose();\n        }\n    };\n    FolderElement.prototype.mustShowBorderDropHint = function (position) {\n        return !this.node.is_open && position === node_1.Position.Inside;\n    };\n    FolderElement.prototype.getButton = function () {\n        return this.$element\n            .children(\".jqtree-element\")\n            .find(\"a.jqtree-toggler\");\n    };\n    return FolderElement;\n}(NodeElement));\nexports.FolderElement = FolderElement;\nvar BorderDropHint = /** @class */ (function () {\n    function BorderDropHint($element, scrollLeft) {\n        var $div = $element.children(\".jqtree-element\");\n        var elWidth = $element.width() || 0;\n        var width = Math.max(elWidth + scrollLeft - 4, 0);\n        var elHeight = $div.outerHeight() || 0;\n        var height = Math.max(elHeight - 4, 0);\n        this.$hint = jQuery('<span class=\"jqtree-border\"></span>');\n        $div.append(this.$hint);\n        this.$hint.css({ width: width, height: height });\n    }\n    BorderDropHint.prototype.remove = function () {\n        this.$hint.remove();\n    };\n    return BorderDropHint;\n}());\nexports.BorderDropHint = BorderDropHint;\nvar GhostDropHint = /** @class */ (function () {\n    function GhostDropHint(node, $element, position) {\n        this.$element = $element;\n        this.node = node;\n        this.$ghost = jQuery(\"<li class=\\\"jqtree_common jqtree-ghost\\\"><span class=\\\"jqtree_common jqtree-circle\\\"></span>\\n            <span class=\\\"jqtree_common jqtree-line\\\"></span></li>\");\n        if (position === node_1.Position.After) {\n            this.moveAfter();\n        }\n        else if (position === node_1.Position.Before) {\n            this.moveBefore();\n        }\n        else if (position === node_1.Position.Inside) {\n            if (node.isFolder() && node.is_open) {\n                this.moveInsideOpenFolder();\n            }\n            else {\n                this.moveInside();\n            }\n        }\n    }\n    GhostDropHint.prototype.remove = function () {\n        this.$ghost.remove();\n    };\n    GhostDropHint.prototype.moveAfter = function () {\n        this.$element.after(this.$ghost);\n    };\n    GhostDropHint.prototype.moveBefore = function () {\n        this.$element.before(this.$ghost);\n    };\n    GhostDropHint.prototype.moveInsideOpenFolder = function () {\n        jQuery(this.node.children[0].element).before(this.$ghost);\n    };\n    GhostDropHint.prototype.moveInside = function () {\n        this.$element.after(this.$ghost);\n        this.$ghost.addClass(\"jqtree-inside\");\n    };\n    return GhostDropHint;\n}());\n","var g;\n\n// This works in non-strict mode\ng = (function() {\n\treturn this;\n})();\n\ntry {\n\t// This works if eval is allowed (see CSP)\n\tg = g || new Function(\"return this\")();\n} catch (e) {\n\t// This works if the window reference is available\n\tif (typeof window === \"object\") g = window;\n}\n\n// g can still be undefined, but nothing to do about it...\n// We return undefined, instead of nothing here, so it's\n// easier to handle this case. if(!global) { ...}\n\nmodule.exports = g;\n","'use strict';\n\n/**\n * Check if we're required to add a port number.\n *\n * @see https://url.spec.whatwg.org/#default-port\n * @param {Number|String} port Port number we need to check\n * @param {String} protocol Protocol we need to check against.\n * @returns {Boolean} Is it a default port for the given protocol\n * @api private\n */\nmodule.exports = function required(port, protocol) {\n  protocol = protocol.split(':')[0];\n  port = +port;\n\n  if (!port) return false;\n\n  switch (protocol) {\n    case 'http':\n    case 'ws':\n    return port !== 80;\n\n    case 'https':\n    case 'wss':\n    return port !== 443;\n\n    case 'ftp':\n    return port !== 21;\n\n    case 'gopher':\n    return port !== 70;\n\n    case 'file':\n    return false;\n  }\n\n  return port !== 0;\n};\n","var __assign = (this && this.__assign) || function () {\r\n    __assign = Object.assign || function(t) {\r\n        for (var s, i = 1, n = arguments.length; i < n; i++) {\r\n            s = arguments[i];\r\n            for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p))\r\n                t[p] = s[p];\r\n        }\r\n        return t;\r\n    };\r\n    return __assign.apply(this, arguments);\r\n};\r\nvar defaults = {\r\n    lines: 12,\r\n    length: 7,\r\n    width: 5,\r\n    radius: 10,\r\n    scale: 1.0,\r\n    corners: 1,\r\n    color: '#000',\r\n    fadeColor: 'transparent',\r\n    animation: 'spinner-line-fade-default',\r\n    rotate: 0,\r\n    direction: 1,\r\n    speed: 1,\r\n    zIndex: 2e9,\r\n    className: 'spinner',\r\n    top: '50%',\r\n    left: '50%',\r\n    shadow: '0 0 1px transparent',\r\n    position: 'absolute',\r\n};\r\nvar Spinner = /** @class */ (function () {\r\n    function Spinner(opts) {\r\n        if (opts === void 0) { opts = {}; }\r\n        this.opts = __assign(__assign({}, defaults), opts);\r\n    }\r\n    /**\r\n     * Adds the spinner to the given target element. If this instance is already\r\n     * spinning, it is automatically removed from its previous target by calling\r\n     * stop() internally.\r\n     */\r\n    Spinner.prototype.spin = function (target) {\r\n        this.stop();\r\n        this.el = document.createElement('div');\r\n        this.el.className = this.opts.className;\r\n        this.el.setAttribute('role', 'progressbar');\r\n        css(this.el, {\r\n            position: this.opts.position,\r\n            width: 0,\r\n            zIndex: this.opts.zIndex,\r\n            left: this.opts.left,\r\n            top: this.opts.top,\r\n            transform: \"scale(\" + this.opts.scale + \")\",\r\n        });\r\n        if (target) {\r\n            target.insertBefore(this.el, target.firstChild || null);\r\n        }\r\n        drawLines(this.el, this.opts);\r\n        return this;\r\n    };\r\n    /**\r\n     * Stops and removes the Spinner.\r\n     * Stopped spinners may be reused by calling spin() again.\r\n     */\r\n    Spinner.prototype.stop = function () {\r\n        if (this.el) {\r\n            if (typeof requestAnimationFrame !== 'undefined') {\r\n                cancelAnimationFrame(this.animateId);\r\n            }\r\n            else {\r\n                clearTimeout(this.animateId);\r\n            }\r\n            if (this.el.parentNode) {\r\n                this.el.parentNode.removeChild(this.el);\r\n            }\r\n            this.el = undefined;\r\n        }\r\n        return this;\r\n    };\r\n    return Spinner;\r\n}());\r\nexport { Spinner };\r\n/**\r\n * Sets multiple style properties at once.\r\n */\r\nfunction css(el, props) {\r\n    for (var prop in props) {\r\n        el.style[prop] = props[prop];\r\n    }\r\n    return el;\r\n}\r\n/**\r\n * Returns the line color from the given string or array.\r\n */\r\nfunction getColor(color, idx) {\r\n    return typeof color == 'string' ? color : color[idx % color.length];\r\n}\r\n/**\r\n * Internal method that draws the individual lines.\r\n */\r\nfunction drawLines(el, opts) {\r\n    var borderRadius = (Math.round(opts.corners * opts.width * 500) / 1000) + 'px';\r\n    var shadow = 'none';\r\n    if (opts.shadow === true) {\r\n        shadow = '0 2px 4px #000'; // default shadow\r\n    }\r\n    else if (typeof opts.shadow === 'string') {\r\n        shadow = opts.shadow;\r\n    }\r\n    var shadows = parseBoxShadow(shadow);\r\n    for (var i = 0; i < opts.lines; i++) {\r\n        var degrees = ~~(360 / opts.lines * i + opts.rotate);\r\n        var backgroundLine = css(document.createElement('div'), {\r\n            position: 'absolute',\r\n            top: -opts.width / 2 + \"px\",\r\n            width: (opts.length + opts.width) + 'px',\r\n            height: opts.width + 'px',\r\n            background: getColor(opts.fadeColor, i),\r\n            borderRadius: borderRadius,\r\n            transformOrigin: 'left',\r\n            transform: \"rotate(\" + degrees + \"deg) translateX(\" + opts.radius + \"px)\",\r\n        });\r\n        var delay = i * opts.direction / opts.lines / opts.speed;\r\n        delay -= 1 / opts.speed; // so initial animation state will include trail\r\n        var line = css(document.createElement('div'), {\r\n            width: '100%',\r\n            height: '100%',\r\n            background: getColor(opts.color, i),\r\n            borderRadius: borderRadius,\r\n            boxShadow: normalizeShadow(shadows, degrees),\r\n            animation: 1 / opts.speed + \"s linear \" + delay + \"s infinite \" + opts.animation,\r\n        });\r\n        backgroundLine.appendChild(line);\r\n        el.appendChild(backgroundLine);\r\n    }\r\n}\r\nfunction parseBoxShadow(boxShadow) {\r\n    var regex = /^\\s*([a-zA-Z]+\\s+)?(-?\\d+(\\.\\d+)?)([a-zA-Z]*)\\s+(-?\\d+(\\.\\d+)?)([a-zA-Z]*)(.*)$/;\r\n    var shadows = [];\r\n    for (var _i = 0, _a = boxShadow.split(','); _i < _a.length; _i++) {\r\n        var shadow = _a[_i];\r\n        var matches = shadow.match(regex);\r\n        if (matches === null) {\r\n            continue; // invalid syntax\r\n        }\r\n        var x = +matches[2];\r\n        var y = +matches[5];\r\n        var xUnits = matches[4];\r\n        var yUnits = matches[7];\r\n        if (x === 0 && !xUnits) {\r\n            xUnits = yUnits;\r\n        }\r\n        if (y === 0 && !yUnits) {\r\n            yUnits = xUnits;\r\n        }\r\n        if (xUnits !== yUnits) {\r\n            continue; // units must match to use as coordinates\r\n        }\r\n        shadows.push({\r\n            prefix: matches[1] || '',\r\n            x: x,\r\n            y: y,\r\n            xUnits: xUnits,\r\n            yUnits: yUnits,\r\n            end: matches[8],\r\n        });\r\n    }\r\n    return shadows;\r\n}\r\n/**\r\n * Modify box-shadow x/y offsets to counteract rotation\r\n */\r\nfunction normalizeShadow(shadows, degrees) {\r\n    var normalized = [];\r\n    for (var _i = 0, shadows_1 = shadows; _i < shadows_1.length; _i++) {\r\n        var shadow = shadows_1[_i];\r\n        var xy = convertOffset(shadow.x, shadow.y, degrees);\r\n        normalized.push(shadow.prefix + xy[0] + shadow.xUnits + ' ' + xy[1] + shadow.yUnits + shadow.end);\r\n    }\r\n    return normalized.join(', ');\r\n}\r\nfunction convertOffset(x, y, degrees) {\r\n    var radians = degrees * Math.PI / 180;\r\n    var sin = Math.sin(radians);\r\n    var cos = Math.cos(radians);\r\n    return [\r\n        Math.round((x * cos + y * sin) * 1000) / 1000,\r\n        Math.round((-x * sin + y * cos) * 1000) / 1000,\r\n    ];\r\n}\r\n","import \"jqtree\";\nimport { Spinner } from \"spin.js\";\nimport * as cookie from \"cookie\";\nimport * as URL from \"url-parse\";\nimport * as qs from \"querystringify\";\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\ninterface JQTreeMoveEvent extends JQuery.Event {\n    move_info: {\n        moved_node: INode;\n        position: string;\n        target_node: INode;\n        do_move: () => void;\n    };\n}\n\n// eslint-disable-next-line @typescript-eslint/no-unsafe-member-access\ninterface JQTreeSelectEvent extends JQuery.Event {\n    deselected_node: INode | null;\n    node: INode;\n}\n\ninterface Parameters {\n    animationSpeed: number | string | null;\n    autoOpen: boolean | number;\n    autoEscape: boolean;\n    csrfCookieName: string;\n    mouseDelay: number | null;\n    rtl: boolean;\n}\n\nfunction initTree(\n    $tree: JQuery,\n    {\n        animationSpeed,\n        autoOpen,\n        autoEscape,\n        csrfCookieName,\n        mouseDelay,\n        rtl,\n    }: Parameters\n) {\n    let errorNode: INode | null = null;\n    const insertAtUrl = new URL($tree.data(\"insert_at_url\"), true);\n\n    function createLi(node: INode, $li: JQuery, isSelected: boolean) {\n        // Create edit link\n        const $title = $li.find(\".jqtree-title\");\n\n        insertAtUrl.query.insert_at = `${node.id as string | number}`;\n\n        const insertUrlString = urlToString(insertAtUrl);\n\n        const tabindex = isSelected ? \"0\" : \"-1\";\n\n        $title.after(\n            `<a href=\"${\n                node.url as string\n            }\" class=\"edit\" tabindex=\"${tabindex}\">(${gettext(\"edit\")})</a>`,\n            `<a href=\"${insertUrlString}\" class=\"edit\" tabindex=\"${tabindex}\">(${gettext(\n                \"add\"\n            )})</a>`\n        );\n    }\n\n    function getCsrfToken() {\n        function getFromMiddleware() {\n            return (document.querySelector(\n                '[name=\"csrfmiddlewaretoken\"]'\n            ) as HTMLInputElement).value;\n        }\n\n        function getFromCookie() {\n            if (!csrfCookieName) {\n                return null;\n            } else {\n                return cookie.parse(document.cookie)[csrfCookieName];\n            }\n        }\n\n        return getFromCookie() || getFromMiddleware();\n    }\n\n    function handleMove(eventParam: JQuery.Event) {\n        const e = eventParam as JQTreeMoveEvent;\n        const info = e.move_info;\n        const data = {\n            target_id: info.target_node.id,\n            position: info.position,\n        };\n        const $el = jQuery(info.moved_node.element);\n\n        handleLoading(true, null, $el);\n\n        removeErrorMessage();\n\n        e.preventDefault();\n\n        void jQuery.ajax({\n            type: \"POST\",\n            url: info.moved_node.move_url as string,\n            data,\n            beforeSend: (xhr) => {\n                // Set Django csrf token\n                xhr.setRequestHeader(\"X-CSRFToken\", getCsrfToken());\n            },\n            success: () => {\n                info.do_move();\n                handleLoading(false, null, $el);\n            },\n            error: () => {\n                handleLoading(false, null, $el);\n                const $node = $el.find(\".jqtree-element\");\n                $node.append(\n                    `<span class=\"mptt-admin-error\">${gettext(\n                        \"move failed\"\n                    )}</span>`\n                );\n\n                errorNode = info.moved_node;\n            },\n        });\n\n        function removeErrorMessage() {\n            if (errorNode) {\n                jQuery(errorNode.element).find(\".mptt-admin-error\").remove();\n                errorNode = null;\n            }\n        }\n    }\n\n    function handleLoadFailed() {\n        $tree.html(gettext(\"Error while loading the data from the server\"));\n    }\n\n    const spinners: Record<number | string, Spinner | null> = {};\n\n    function handleLoading(\n        isLoading: boolean,\n        node: INode | null,\n        $el: JQuery\n    ) {\n        function getNodeId(): string | number {\n            if (!node) {\n                return \"__root__\";\n            } else {\n                return node.id as string | number;\n            }\n        }\n\n        function getContainer() {\n            if (node) {\n                return $el.find(\".jqtree-element\")[0];\n            } else {\n                return $el[0];\n            }\n        }\n\n        const nodeId = getNodeId();\n\n        if (isLoading) {\n            spinners[nodeId] = new Spinner().spin(getContainer());\n        } else {\n            const spinner = spinners[nodeId];\n\n            if (spinner) {\n                spinner.stop();\n                spinners[nodeId] = null;\n            }\n        }\n    }\n\n    function handleSelect(eventParam: JQuery.Event) {\n        const e = eventParam as JQTreeSelectEvent;\n        const { node, deselected_node } = e;\n\n        if (deselected_node) {\n            // deselected node: remove tabindex\n            jQuery(deselected_node.element).find(\".edit\").attr(\"tabindex\", -1);\n        }\n\n        if (node) {\n            // selected: add tabindex\n            jQuery(node.element).find(\".edit\").attr(\"tabindex\", 0);\n        }\n    }\n\n    const treeOptions: Record<string, unknown> = {\n        autoOpen,\n        autoEscape,\n        buttonLeft: rtl,\n        closedIcon: rtl ? \"&#x25c0;\" : \"&#x25ba;\",\n        dragAndDrop: true,\n        onCreateLi: createLi,\n        onLoadFailed: handleLoadFailed,\n        onLoading: handleLoading as any, // eslint-disable-line @typescript-eslint/no-unsafe-assignment\n        saveState: $tree.data(\"save_state\") as boolean,\n        useContextMenu: Boolean($tree.data(\"use_context_menu\")),\n    };\n\n    if (animationSpeed !== null) {\n        treeOptions[\"animationSpeed\"] = animationSpeed;\n    }\n\n    $tree.tree(treeOptions);\n\n    $tree.on(\"tree.move\", handleMove);\n    $tree.on(\"tree.select\", handleSelect);\n\n    if (mouseDelay !== null) {\n        $tree.tree(\"setMouseDelay\", mouseDelay);\n    }\n}\n\nfunction urlToString(url: URL): string {\n    const { pathname, query } = url;\n    const querystring = qs.stringify(query);\n\n    if (!querystring) {\n        return pathname;\n    } else {\n        return `${pathname}?${querystring}`;\n    }\n}\n\njQuery(() => {\n    const $tree = jQuery(\"#tree\");\n\n    if ($tree.length) {\n        const animationSpeed = $tree.data(\"tree-animation-speed\") as\n            | number\n            | string\n            | null;\n        const autoOpen = $tree.data(\"auto_open\") as boolean | number;\n        const autoEscape = Boolean($tree.data(\"autoescape\"));\n        const mouseDelay = $tree.data(\"tree-mouse-delay\") as number | null;\n        const rtl = $tree.data(\"rtl\") === \"1\";\n        const csrfCookieName = $tree.data(\"csrf-cookie-name\") as string;\n\n        initTree($tree, {\n            animationSpeed,\n            autoOpen,\n            autoEscape,\n            csrfCookieName,\n            mouseDelay,\n            rtl,\n        });\n    }\n});\n"],"sourceRoot":""}